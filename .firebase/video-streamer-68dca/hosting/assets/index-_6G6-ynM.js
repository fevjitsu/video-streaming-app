function uP(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function cP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ff={exports:{}},_l={},Uf={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function hP(){if(Nv)return Ve;Nv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function E(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function C(j,U,X){this.props=j,this.context=U,this.refs=D,this.updater=X||S}C.prototype.isReactComponent={},C.prototype.setState=function(j,U){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,U,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function G(){}G.prototype=C.prototype;function Q(j,U,X){this.props=j,this.context=U,this.refs=D,this.updater=X||S}var z=Q.prototype=new G;z.constructor=Q,N(z,C.prototype),z.isPureReactComponent=!0;var J=Array.isArray,ce=Object.prototype.hasOwnProperty,Z={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function x(j,U,X){var oe,he={},_e=null,De=null;if(U!=null)for(oe in U.ref!==void 0&&(De=U.ref),U.key!==void 0&&(_e=""+U.key),U)ce.call(U,oe)&&!b.hasOwnProperty(oe)&&(he[oe]=U[oe]);var Be=arguments.length-2;if(Be===1)he.children=X;else if(1<Be){for(var He=Array(Be),rt=0;rt<Be;rt++)He[rt]=arguments[rt+2];he.children=He}if(j&&j.defaultProps)for(oe in Be=j.defaultProps,Be)he[oe]===void 0&&(he[oe]=Be[oe]);return{$$typeof:n,type:j,key:_e,ref:De,props:he,_owner:Z.current}}function A(j,U){return{$$typeof:n,type:j.type,key:U,ref:j.ref,props:j.props,_owner:j._owner}}function V(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function O(j){var U={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(X){return U[X]})}var F=/\/+/g;function R(j,U){return typeof j=="object"&&j!==null&&j.key!=null?O(""+j.key):U.toString(36)}function se(j,U,X,oe,he){var _e=typeof j;(_e==="undefined"||_e==="boolean")&&(j=null);var De=!1;if(j===null)De=!0;else switch(_e){case"string":case"number":De=!0;break;case"object":switch(j.$$typeof){case n:case e:De=!0}}if(De)return De=j,he=he(De),j=oe===""?"."+R(De,0):oe,J(he)?(X="",j!=null&&(X=j.replace(F,"$&/")+"/"),se(he,U,X,"",function(rt){return rt})):he!=null&&(V(he)&&(he=A(he,X+(!he.key||De&&De.key===he.key?"":(""+he.key).replace(F,"$&/")+"/")+j)),U.push(he)),1;if(De=0,oe=oe===""?".":oe+":",J(j))for(var Be=0;Be<j.length;Be++){_e=j[Be];var He=oe+R(_e,Be);De+=se(_e,U,X,He,he)}else if(He=E(j),typeof He=="function")for(j=He.call(j),Be=0;!(_e=j.next()).done;)_e=_e.value,He=oe+R(_e,Be++),De+=se(_e,U,X,He,he);else if(_e==="object")throw U=String(j),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return De}function be(j,U,X){if(j==null)return j;var oe=[],he=0;return se(j,oe,"","",function(_e){return U.call(X,_e,he++)}),oe}function xe(j){if(j._status===-1){var U=j._result;U=U(),U.then(function(X){(j._status===0||j._status===-1)&&(j._status=1,j._result=X)},function(X){(j._status===0||j._status===-1)&&(j._status=2,j._result=X)}),j._status===-1&&(j._status=0,j._result=U)}if(j._status===1)return j._result.default;throw j._result}var Ae={current:null},q={transition:null},de={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:q,ReactCurrentOwner:Z};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:be,forEach:function(j,U,X){be(j,function(){U.apply(this,arguments)},X)},count:function(j){var U=0;return be(j,function(){U++}),U},toArray:function(j){return be(j,function(U){return U})||[]},only:function(j){if(!V(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ve.Component=C,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=Q,Ve.StrictMode=r,Ve.Suspense=f,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Ve.act=le,Ve.cloneElement=function(j,U,X){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var oe=N({},j.props),he=j.key,_e=j.ref,De=j._owner;if(U!=null){if(U.ref!==void 0&&(_e=U.ref,De=Z.current),U.key!==void 0&&(he=""+U.key),j.type&&j.type.defaultProps)var Be=j.type.defaultProps;for(He in U)ce.call(U,He)&&!b.hasOwnProperty(He)&&(oe[He]=U[He]===void 0&&Be!==void 0?Be[He]:U[He])}var He=arguments.length-2;if(He===1)oe.children=X;else if(1<He){Be=Array(He);for(var rt=0;rt<He;rt++)Be[rt]=arguments[rt+2];oe.children=Be}return{$$typeof:n,type:j.type,key:he,ref:_e,props:oe,_owner:De}},Ve.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},Ve.createElement=x,Ve.createFactory=function(j){var U=x.bind(null,j);return U.type=j,U},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(j){return{$$typeof:h,render:j}},Ve.isValidElement=V,Ve.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:xe}},Ve.memo=function(j,U){return{$$typeof:p,type:j,compare:U===void 0?null:U}},Ve.startTransition=function(j){var U=q.transition;q.transition={};try{j()}finally{q.transition=U}},Ve.unstable_act=le,Ve.useCallback=function(j,U){return Ae.current.useCallback(j,U)},Ve.useContext=function(j){return Ae.current.useContext(j)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(j){return Ae.current.useDeferredValue(j)},Ve.useEffect=function(j,U){return Ae.current.useEffect(j,U)},Ve.useId=function(){return Ae.current.useId()},Ve.useImperativeHandle=function(j,U,X){return Ae.current.useImperativeHandle(j,U,X)},Ve.useInsertionEffect=function(j,U){return Ae.current.useInsertionEffect(j,U)},Ve.useLayoutEffect=function(j,U){return Ae.current.useLayoutEffect(j,U)},Ve.useMemo=function(j,U){return Ae.current.useMemo(j,U)},Ve.useReducer=function(j,U,X){return Ae.current.useReducer(j,U,X)},Ve.useRef=function(j){return Ae.current.useRef(j)},Ve.useState=function(j){return Ae.current.useState(j)},Ve.useSyncExternalStore=function(j,U,X){return Ae.current.useSyncExternalStore(j,U,X)},Ve.useTransition=function(){return Ae.current.useTransition()},Ve.version="18.3.1",Ve}var bv;function om(){return bv||(bv=1,Uf.exports=hP()),Uf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function dP(){if(Dv)return _l;Dv=1;var n=om(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,p){var _,w={},E=null,S=null;p!==void 0&&(E=""+p),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(S=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(w[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)w[_]===void 0&&(w[_]=f[_]);return{$$typeof:e,type:h,key:E,ref:S,props:w,_owner:o.current}}return _l.Fragment=t,_l.jsx=u,_l.jsxs=u,_l}var Vv;function fP(){return Vv||(Vv=1,Ff.exports=dP()),Ff.exports}var g=fP(),B=om();const Nh=cP(B),pP=uP({__proto__:null,default:Nh},[B]);var Rc={},Bf={exports:{}},hn={},zf={exports:{}},$f={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function mP(){return Mv||(Mv=1,(function(n){function e(q,de){var le=q.length;q.push(de);e:for(;0<le;){var j=le-1>>>1,U=q[j];if(0<o(U,de))q[j]=de,q[le]=U,le=j;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var de=q[0],le=q.pop();if(le!==de){q[0]=le;e:for(var j=0,U=q.length,X=U>>>1;j<X;){var oe=2*(j+1)-1,he=q[oe],_e=oe+1,De=q[_e];if(0>o(he,le))_e<U&&0>o(De,he)?(q[j]=De,q[_e]=le,j=_e):(q[j]=he,q[oe]=le,j=oe);else if(_e<U&&0>o(De,le))q[j]=De,q[_e]=le,j=_e;else break e}}return de}function o(q,de){var le=q.sortIndex-de.sortIndex;return le!==0?le:q.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],p=[],_=1,w=null,E=3,S=!1,N=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(q){for(var de=t(p);de!==null;){if(de.callback===null)r(p);else if(de.startTime<=q)r(p),de.sortIndex=de.expirationTime,e(f,de);else break;de=t(p)}}function J(q){if(D=!1,z(q),!N)if(t(f)!==null)N=!0,xe(ce);else{var de=t(p);de!==null&&Ae(J,de.startTime-q)}}function ce(q,de){N=!1,D&&(D=!1,G(x),x=-1),S=!0;var le=E;try{for(z(de),w=t(f);w!==null&&(!(w.expirationTime>de)||q&&!O());){var j=w.callback;if(typeof j=="function"){w.callback=null,E=w.priorityLevel;var U=j(w.expirationTime<=de);de=n.unstable_now(),typeof U=="function"?w.callback=U:w===t(f)&&r(f),z(de)}else r(f);w=t(f)}if(w!==null)var X=!0;else{var oe=t(p);oe!==null&&Ae(J,oe.startTime-de),X=!1}return X}finally{w=null,E=le,S=!1}}var Z=!1,b=null,x=-1,A=5,V=-1;function O(){return!(n.unstable_now()-V<A)}function F(){if(b!==null){var q=n.unstable_now();V=q;var de=!0;try{de=b(!0,q)}finally{de?R():(Z=!1,b=null)}}else Z=!1}var R;if(typeof Q=="function")R=function(){Q(F)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,be=se.port2;se.port1.onmessage=F,R=function(){be.postMessage(null)}}else R=function(){C(F,0)};function xe(q){b=q,Z||(Z=!0,R())}function Ae(q,de){x=C(function(){q(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){N||S||(N=!0,xe(ce))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(q){switch(E){case 1:case 2:case 3:var de=3;break;default:de=E}var le=E;E=de;try{return q()}finally{E=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,de){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var le=E;E=q;try{return de()}finally{E=le}},n.unstable_scheduleCallback=function(q,de,le){var j=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?j+le:j):le=j,q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=le+U,q={id:_++,callback:de,priorityLevel:q,startTime:le,expirationTime:U,sortIndex:-1},le>j?(q.sortIndex=le,e(p,q),t(f)===null&&q===t(p)&&(D?(G(x),x=-1):D=!0,Ae(J,le-j))):(q.sortIndex=U,e(f,q),N||S||(N=!0,xe(ce))),q},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(q){var de=E;return function(){var le=E;E=de;try{return q.apply(this,arguments)}finally{E=le}}}})($f)),$f}var jv;function gP(){return jv||(jv=1,zf.exports=mP()),zf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function yP(){if(Ov)return hn;Ov=1;var n=om(),e=gP();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(i,s){u(i,s),u(i+"Capture",s)}function u(i,s){for(o[i]=s,i=0;i<s.length;i++)r.add(s[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function E(i){return f.call(w,i)?!0:f.call(_,i)?!1:p.test(i)?w[i]=!0:(_[i]=!0,!1)}function S(i,s,l,d){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function N(i,s,l,d){if(s===null||typeof s>"u"||S(i,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function D(i,s,l,d,m,v,I){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=i,this.type=s,this.sanitizeURL=v,this.removeEmptyString=I}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];C[s]=new D(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(G,Q);C[s]=new D(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(G,Q);C[s]=new D(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(G,Q);C[s]=new D(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function z(i,s,l,d){var m=C.hasOwnProperty(s)?C[s]:null;(m!==null?m.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(N(s,l,m,d)&&(l=null),d||m===null?E(s)&&(l===null?i.removeAttribute(s):i.setAttribute(s,""+l)):m.mustUseProperty?i[m.propertyName]=l===null?m.type===3?!1:"":l:(s=m.attributeName,d=m.attributeNamespace,l===null?i.removeAttribute(s):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,d?i.setAttributeNS(d,s,l):i.setAttribute(s,l))))}var J=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),Z=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),q=Symbol.iterator;function de(i){return i===null||typeof i!="object"?null:(i=q&&i[q]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,j;function U(i){if(j===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+i}var X=!1;function oe(i,s){if(!i||X)return"";X=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var d=K}Reflect.construct(i,[],s)}else{try{s.call()}catch(K){d=K}i.call(s.prototype)}else{try{throw Error()}catch(K){d=K}i()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var m=K.stack.split(`
`),v=d.stack.split(`
`),I=m.length-1,k=v.length-1;1<=I&&0<=k&&m[I]!==v[k];)k--;for(;1<=I&&0<=k;I--,k--)if(m[I]!==v[k]){if(I!==1||k!==1)do if(I--,k--,0>k||m[I]!==v[k]){var M=`
`+m[I].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=I&&0<=k);break}}}finally{X=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?U(i):""}function he(i){switch(i.tag){case 5:return U(i.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return i=oe(i.type,!1),i;case 11:return i=oe(i.type.render,!1),i;case 1:return i=oe(i.type,!0),i;default:return""}}function _e(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case Z:return"Portal";case A:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case se:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case F:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case be:return s=i.displayName||null,s!==null?s:_e(i.type)||"Memo";case xe:s=i._payload,i=i._init;try{return _e(i(s))}catch{}}return null}function De(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _e(s);case 8:return s===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Be(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function He(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function rt(i){var s=He(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),d=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(I){d=""+I,v.call(this,I)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(I){d=""+I},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Dt(i){i._valueTracker||(i._valueTracker=rt(i))}function Zi(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return i&&(d=He(i)?i.checked?"true":"false":i.value),i=d,i!==l?(s.setValue(i),!0):!1}function li(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function es(i,s){var l=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function no(i,s){var l=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;l=Be(s.value!=null?s.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Pa(i,s){s=s.checked,s!=null&&z(i,"checked",s,!1)}function xa(i,s){Pa(i,s);var l=Be(s.value),d=s.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?ro(i,s.type,l):s.hasOwnProperty("defaultValue")&&ro(i,s.type,Be(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function pu(i,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,l||s===i.value||(i.value=s),i.defaultValue=s}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function ro(i,s,l){(s!=="number"||li(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var kr=Array.isArray;function Nr(i,s,l,d){if(i=i.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=s.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Be(l),s=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,d&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function Aa(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function io(i,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(kr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}i._wrapperState={initialValue:Be(l)}}function so(i,s){var l=Be(s.value),d=Be(s.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),s.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function Ca(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function _t(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?_t(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var br,Ra=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,m){MSApp.execUnsafeLocalFunction(function(){return i(s,l,d,m)})}:i})(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(br=br||document.createElement("div"),br.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=br.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function ui(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ns=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(i){ns.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),ts[s]=ts[i]})});function ka(i,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ts.hasOwnProperty(i)&&ts[i]?(""+s).trim():s+"px"}function Na(i,s){i=i.style;for(var l in s)if(s.hasOwnProperty(l)){var d=l.indexOf("--")===0,m=ka(l,s[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,m):i[l]=m}}var ba=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Da(i,s){if(s){if(ba[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Va(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rs=null;function oo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ao=null,Rn=null,ur=null;function lo(i){if(i=il(i)){if(typeof ao!="function")throw Error(t(280));var s=i.stateNode;s&&(s=Wu(s),ao(i.stateNode,i.type,s))}}function cr(i){Rn?ur?ur.push(i):ur=[i]:Rn=i}function Ma(){if(Rn){var i=Rn,s=ur;if(ur=Rn=null,lo(i),s)for(i=0;i<s.length;i++)lo(s[i])}}function is(i,s){return i(s)}function ja(){}var Dr=!1;function Oa(i,s,l){if(Dr)return i(s,l);Dr=!0;try{return is(i,s,l)}finally{Dr=!1,(Rn!==null||ur!==null)&&(ja(),Ma())}}function ct(i,s){var l=i.stateNode;if(l===null)return null;var d=Wu(l);if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var uo=!1;if(h)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){uo=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{uo=!1}function ss(i,s,l,d,m,v,I,k,M){var K=Array.prototype.slice.call(arguments,3);try{s.apply(l,K)}catch(te){this.onError(te)}}var os=!1,co=null,Hn=!1,La=null,dd={onError:function(i){os=!0,co=i}};function ho(i,s,l,d,m,v,I,k,M){os=!1,co=null,ss.apply(dd,arguments)}function mu(i,s,l,d,m,v,I,k,M){if(ho.apply(this,arguments),os){if(os){var K=co;os=!1,co=null}else throw Error(t(198));Hn||(Hn=!0,La=K)}}function qn(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function as(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function Kn(i){if(qn(i)!==i)throw Error(t(188))}function gu(i){var s=i.alternate;if(!s){if(s=qn(i),s===null)throw Error(t(188));return s!==i?null:i}for(var l=i,d=s;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return Kn(m),i;if(v===d)return Kn(m),s;v=v.sibling}throw Error(t(188))}if(l.return!==d.return)l=m,d=v;else{for(var I=!1,k=m.child;k;){if(k===l){I=!0,l=m,d=v;break}if(k===d){I=!0,d=m,l=v;break}k=k.sibling}if(!I){for(k=v.child;k;){if(k===l){I=!0,l=v,d=m;break}if(k===d){I=!0,d=v,l=m;break}k=k.sibling}if(!I)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:s}function Fa(i){return i=gu(i),i!==null?fo(i):null}function fo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=fo(i);if(s!==null)return s;i=i.sibling}return null}var po=e.unstable_scheduleCallback,Ua=e.unstable_cancelCallback,yu=e.unstable_shouldYield,fd=e.unstable_requestPaint,Qe=e.unstable_now,vu=e.unstable_getCurrentPriorityLevel,ls=e.unstable_ImmediatePriority,ci=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,Ba=e.unstable_LowPriority,_u=e.unstable_IdlePriority,us=null,yn=null;function wu(i){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(us,i,void 0,(i.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:Eu,za=Math.log,Tu=Math.LN2;function Eu(i){return i>>>=0,i===0?32:31-(za(i)/Tu|0)|0}var mo=64,go=4194304;function hi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function cs(i,s){var l=i.pendingLanes;if(l===0)return 0;var d=0,m=i.suspendedLanes,v=i.pingedLanes,I=l&268435455;if(I!==0){var k=I&~m;k!==0?d=hi(k):(v&=I,v!==0&&(d=hi(v)))}else I=l&~m,I!==0?d=hi(I):v!==0&&(d=hi(v));if(d===0)return 0;if(s!==0&&s!==d&&(s&m)===0&&(m=d&-d,v=s&-s,m>=v||m===16&&(v&4194240)!==0))return s;if((d&4)!==0&&(d|=l&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=d;0<s;)l=31-Xt(s),m=1<<l,d|=i[l],s&=~m;return d}function pd(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vr(i,s){for(var l=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,v=i.pendingLanes;0<v;){var I=31-Xt(v),k=1<<I,M=m[I];M===-1?((k&l)===0||(k&d)!==0)&&(m[I]=pd(k,s)):M<=s&&(i.expiredLanes|=k),v&=~k}}function vn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function hs(){var i=mo;return mo<<=1,(mo&4194240)===0&&(mo=64),i}function di(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function fi(i,s,l){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-Xt(s),i[s]=l}function Ge(i,s){var l=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var m=31-Xt(l),v=1<<m;s[m]=0,d[m]=-1,i[m]=-1,l&=~v}}function pi(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var d=31-Xt(l),m=1<<d;m&s|i[d]&s&&(i[d]|=s),l&=~m}}var je=0;function mi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Iu,yo,Su,Pu,xu,$a=!1,hr=[],Vt=null,Gn=null,Qn=null,gi=new Map,Nn=new Map,dr=[],md="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Au(i,s){switch(i){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":gi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nn.delete(s.pointerId)}}function rn(i,s,l,d,m,v){return i===null||i.nativeEvent!==v?(i={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[m]},s!==null&&(s=il(s),s!==null&&yo(s)),i):(i.eventSystemFlags|=d,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function gd(i,s,l,d,m){switch(s){case"focusin":return Vt=rn(Vt,i,s,l,d,m),!0;case"dragenter":return Gn=rn(Gn,i,s,l,d,m),!0;case"mouseover":return Qn=rn(Qn,i,s,l,d,m),!0;case"pointerover":var v=m.pointerId;return gi.set(v,rn(gi.get(v)||null,i,s,l,d,m)),!0;case"gotpointercapture":return v=m.pointerId,Nn.set(v,rn(Nn.get(v)||null,i,s,l,d,m)),!0}return!1}function Cu(i){var s=gs(i.target);if(s!==null){var l=qn(s);if(l!==null){if(s=l.tag,s===13){if(s=as(l),s!==null){i.blockedOn=s,xu(i.priority,function(){Su(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Mr(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=vo(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);rs=d,l.target.dispatchEvent(d),rs=null}else return s=il(l),s!==null&&yo(s),i.blockedOn=l,!1;s.shift()}return!0}function ds(i,s,l){Mr(i)&&l.delete(s)}function Ru(){$a=!1,Vt!==null&&Mr(Vt)&&(Vt=null),Gn!==null&&Mr(Gn)&&(Gn=null),Qn!==null&&Mr(Qn)&&(Qn=null),gi.forEach(ds),Nn.forEach(ds)}function Yn(i,s){i.blockedOn===s&&(i.blockedOn=null,$a||($a=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ru)))}function Xn(i){function s(m){return Yn(m,i)}if(0<hr.length){Yn(hr[0],i);for(var l=1;l<hr.length;l++){var d=hr[l];d.blockedOn===i&&(d.blockedOn=null)}}for(Vt!==null&&Yn(Vt,i),Gn!==null&&Yn(Gn,i),Qn!==null&&Yn(Qn,i),gi.forEach(s),Nn.forEach(s),l=0;l<dr.length;l++)d=dr[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<dr.length&&(l=dr[0],l.blockedOn===null);)Cu(l),l.blockedOn===null&&dr.shift()}var jr=J.ReactCurrentBatchConfig,yi=!0;function tt(i,s,l,d){var m=je,v=jr.transition;jr.transition=null;try{je=1,Wa(i,s,l,d)}finally{je=m,jr.transition=v}}function yd(i,s,l,d){var m=je,v=jr.transition;jr.transition=null;try{je=4,Wa(i,s,l,d)}finally{je=m,jr.transition=v}}function Wa(i,s,l,d){if(yi){var m=vo(i,s,l,d);if(m===null)Cd(i,s,d,fs,l),Au(i,d);else if(gd(m,i,s,l,d))d.stopPropagation();else if(Au(i,d),s&4&&-1<md.indexOf(i)){for(;m!==null;){var v=il(m);if(v!==null&&Iu(v),v=vo(i,s,l,d),v===null&&Cd(i,s,d,fs,l),v===m)break;m=v}m!==null&&d.stopPropagation()}else Cd(i,s,d,null,l)}}var fs=null;function vo(i,s,l,d){if(fs=null,i=oo(d),i=gs(i),i!==null)if(s=qn(i),s===null)i=null;else if(l=s.tag,l===13){if(i=as(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return fs=i,null}function Ha(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vu()){case ls:return 1;case ci:return 4;case kn:case Ba:return 16;case _u:return 536870912;default:return 16}default:return 16}}var _n=null,_o=null,sn=null;function qa(){if(sn)return sn;var i,s=_o,l=s.length,d,m="value"in _n?_n.value:_n.textContent,v=m.length;for(i=0;i<l&&s[i]===m[i];i++);var I=l-i;for(d=1;d<=I&&s[l-d]===m[v-d];d++);return sn=m.slice(i,1<d?1-d:void 0)}function wo(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function fr(){return!0}function Ka(){return!1}function Mt(i){function s(l,d,m,v,I){this._reactName=l,this._targetInst=m,this.type=d,this.nativeEvent=v,this.target=I,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(l=i[k],this[k]=l?l(v):v[k]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?fr:Ka,this.isPropagationStopped=Ka,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),s}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},To=Mt(Jn),pr=le({},Jn,{view:0,detail:0}),vd=Mt(pr),Eo,Or,vi,ps=le({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vi&&(vi&&i.type==="mousemove"?(Eo=i.screenX-vi.screenX,Or=i.screenY-vi.screenY):Or=Eo=0,vi=i),Eo)},movementY:function(i){return"movementY"in i?i.movementY:Or}}),Io=Mt(ps),Ga=le({},ps,{dataTransfer:0}),ku=Mt(Ga),So=le({},pr,{relatedTarget:0}),Po=Mt(So),Nu=le({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Lr=Mt(Nu),bu=le({},Jn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Du=Mt(bu),Vu=le({},Jn,{data:0}),Qa=Mt(Vu),xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ju(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Mu[i])?!!s[i]:!1}function mr(){return ju}var c=le({},pr,{key:function(i){if(i.key){var s=xo[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=wo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Jt[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(i){return i.type==="keypress"?wo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),y=Mt(c),T=le({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P=Mt(T),$=le({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr}),Y=Mt($),ue=le({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Mt(ue),Tt=le({},ps,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Mt(Tt),xt=[9,13,27,32],pt=h&&"CompositionEvent"in window,bn=null;h&&"documentMode"in document&&(bn=document.documentMode);var wn=h&&"TextEvent"in window&&!bn,ms=h&&(!pt||bn&&8<bn&&11>=bn),Ao=" ",Pg=!1;function xg(i,s){switch(i){case"keyup":return xt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ag(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Co=!1;function o1(i,s){switch(i){case"compositionend":return Ag(s);case"keypress":return s.which!==32?null:(Pg=!0,Ao);case"textInput":return i=s.data,i===Ao&&Pg?null:i;default:return null}}function a1(i,s){if(Co)return i==="compositionend"||!pt&&xg(i,s)?(i=qa(),sn=_o=_n=null,Co=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ms&&s.locale!=="ko"?null:s.data;default:return null}}var l1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cg(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!l1[i.type]:s==="textarea"}function Rg(i,s,l,d){cr(d),s=Bu(s,"onChange"),0<s.length&&(l=new To("onChange","change",null,l,d),i.push({event:l,listeners:s}))}var Ya=null,Xa=null;function u1(i){Kg(i,0)}function Ou(i){var s=Do(i);if(Zi(s))return i}function c1(i,s){if(i==="change")return s}var kg=!1;if(h){var _d;if(h){var wd="oninput"in document;if(!wd){var Ng=document.createElement("div");Ng.setAttribute("oninput","return;"),wd=typeof Ng.oninput=="function"}_d=wd}else _d=!1;kg=_d&&(!document.documentMode||9<document.documentMode)}function bg(){Ya&&(Ya.detachEvent("onpropertychange",Dg),Xa=Ya=null)}function Dg(i){if(i.propertyName==="value"&&Ou(Xa)){var s=[];Rg(s,Xa,i,oo(i)),Oa(u1,s)}}function h1(i,s,l){i==="focusin"?(bg(),Ya=s,Xa=l,Ya.attachEvent("onpropertychange",Dg)):i==="focusout"&&bg()}function d1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ou(Xa)}function f1(i,s){if(i==="click")return Ou(s)}function p1(i,s){if(i==="input"||i==="change")return Ou(s)}function m1(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Zn=typeof Object.is=="function"?Object.is:m1;function Ja(i,s){if(Zn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!f.call(s,m)||!Zn(i[m],s[m]))return!1}return!0}function Vg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Mg(i,s){var l=Vg(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=s&&d>=s)return{node:l,offset:s-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Vg(l)}}function jg(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?jg(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Og(){for(var i=window,s=li();s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=li(i.document)}return s}function Td(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function g1(i){var s=Og(),l=i.focusedElem,d=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&jg(l.ownerDocument.documentElement,l)){if(d!==null&&Td(l)){if(s=d.start,i=d.end,i===void 0&&(i=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(i,l.value.length);else if(i=(s=l.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var m=l.textContent.length,v=Math.min(d.start,m);d=d.end===void 0?v:Math.min(d.end,m),!i.extend&&v>d&&(m=d,d=v,v=m),m=Mg(l,v);var I=Mg(l,d);m&&I&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),i.removeAllRanges(),v>d?(i.addRange(s),i.extend(I.node,I.offset)):(s.setEnd(I.node,I.offset),i.addRange(s)))}}for(s=[],i=l;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)i=s[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var y1=h&&"documentMode"in document&&11>=document.documentMode,Ro=null,Ed=null,Za=null,Id=!1;function Lg(i,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Id||Ro==null||Ro!==li(d)||(d=Ro,"selectionStart"in d&&Td(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Za&&Ja(Za,d)||(Za=d,d=Bu(Ed,"onSelect"),0<d.length&&(s=new To("onSelect","select",null,s,l),i.push({event:s,listeners:d}),s.target=Ro)))}function Lu(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var ko={animationend:Lu("Animation","AnimationEnd"),animationiteration:Lu("Animation","AnimationIteration"),animationstart:Lu("Animation","AnimationStart"),transitionend:Lu("Transition","TransitionEnd")},Sd={},Fg={};h&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function Fu(i){if(Sd[i])return Sd[i];if(!ko[i])return i;var s=ko[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in Fg)return Sd[i]=s[l];return i}var Ug=Fu("animationend"),Bg=Fu("animationiteration"),zg=Fu("animationstart"),$g=Fu("transitionend"),Wg=new Map,Hg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(i,s){Wg.set(i,s),a(s,[i])}for(var Pd=0;Pd<Hg.length;Pd++){var xd=Hg[Pd],v1=xd.toLowerCase(),_1=xd[0].toUpperCase()+xd.slice(1);_i(v1,"on"+_1)}_i(Ug,"onAnimationEnd"),_i(Bg,"onAnimationIteration"),_i(zg,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i($g,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w1=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function qg(i,s,l){var d=i.type||"unknown-event";i.currentTarget=l,mu(d,s,void 0,i),i.currentTarget=null}function Kg(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],m=d.event;d=d.listeners;e:{var v=void 0;if(s)for(var I=d.length-1;0<=I;I--){var k=d[I],M=k.instance,K=k.currentTarget;if(k=k.listener,M!==v&&m.isPropagationStopped())break e;qg(m,k,K),v=M}else for(I=0;I<d.length;I++){if(k=d[I],M=k.instance,K=k.currentTarget,k=k.listener,M!==v&&m.isPropagationStopped())break e;qg(m,k,K),v=M}}}if(Hn)throw i=La,Hn=!1,La=null,i}function Ze(i,s){var l=s[Vd];l===void 0&&(l=s[Vd]=new Set);var d=i+"__bubble";l.has(d)||(Gg(s,i,2,!1),l.add(d))}function Ad(i,s,l){var d=0;s&&(d|=4),Gg(l,i,d,s)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function tl(i){if(!i[Uu]){i[Uu]=!0,r.forEach(function(l){l!=="selectionchange"&&(w1.has(l)||Ad(l,!1,i),Ad(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Uu]||(s[Uu]=!0,Ad("selectionchange",!1,s))}}function Gg(i,s,l,d){switch(Ha(s)){case 1:var m=tt;break;case 4:m=yd;break;default:m=Wa}l=m.bind(null,s,l,i),m=void 0,!uo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),d?m!==void 0?i.addEventListener(s,l,{capture:!0,passive:m}):i.addEventListener(s,l,!0):m!==void 0?i.addEventListener(s,l,{passive:m}):i.addEventListener(s,l,!1)}function Cd(i,s,l,d,m){var v=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var I=d.tag;if(I===3||I===4){var k=d.stateNode.containerInfo;if(k===m||k.nodeType===8&&k.parentNode===m)break;if(I===4)for(I=d.return;I!==null;){var M=I.tag;if((M===3||M===4)&&(M=I.stateNode.containerInfo,M===m||M.nodeType===8&&M.parentNode===m))return;I=I.return}for(;k!==null;){if(I=gs(k),I===null)return;if(M=I.tag,M===5||M===6){d=v=I;continue e}k=k.parentNode}}d=d.return}Oa(function(){var K=v,te=oo(l),re=[];e:{var ee=Wg.get(i);if(ee!==void 0){var fe=To,me=i;switch(i){case"keypress":if(wo(l)===0)break e;case"keydown":case"keyup":fe=y;break;case"focusin":me="focus",fe=Po;break;case"focusout":me="blur",fe=Po;break;case"beforeblur":case"afterblur":fe=Po;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Y;break;case Ug:case Bg:case zg:fe=Lr;break;case $g:fe=qe;break;case"scroll":fe=vd;break;case"wheel":fe=Fe;break;case"copy":case"cut":case"paste":fe=Du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=P}var ge=(s&4)!==0,ht=!ge&&i==="scroll",W=ge?ee!==null?ee+"Capture":null:ee;ge=[];for(var L=K,H;L!==null;){H=L;var ae=H.stateNode;if(H.tag===5&&ae!==null&&(H=ae,W!==null&&(ae=ct(L,W),ae!=null&&ge.push(nl(L,ae,H)))),ht)break;L=L.return}0<ge.length&&(ee=new fe(ee,me,null,l,te),re.push({event:ee,listeners:ge}))}}if((s&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",ee&&l!==rs&&(me=l.relatedTarget||l.fromElement)&&(gs(me)||me[Fr]))break e;if((fe||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,fe?(me=l.relatedTarget||l.toElement,fe=K,me=me?gs(me):null,me!==null&&(ht=qn(me),me!==ht||me.tag!==5&&me.tag!==6)&&(me=null)):(fe=null,me=K),fe!==me)){if(ge=Io,ae="onMouseLeave",W="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(ge=P,ae="onPointerLeave",W="onPointerEnter",L="pointer"),ht=fe==null?ee:Do(fe),H=me==null?ee:Do(me),ee=new ge(ae,L+"leave",fe,l,te),ee.target=ht,ee.relatedTarget=H,ae=null,gs(te)===K&&(ge=new ge(W,L+"enter",me,l,te),ge.target=H,ge.relatedTarget=ht,ae=ge),ht=ae,fe&&me)t:{for(ge=fe,W=me,L=0,H=ge;H;H=No(H))L++;for(H=0,ae=W;ae;ae=No(ae))H++;for(;0<L-H;)ge=No(ge),L--;for(;0<H-L;)W=No(W),H--;for(;L--;){if(ge===W||W!==null&&ge===W.alternate)break t;ge=No(ge),W=No(W)}ge=null}else ge=null;fe!==null&&Qg(re,ee,fe,ge,!1),me!==null&&ht!==null&&Qg(re,ht,me,ge,!0)}}e:{if(ee=K?Do(K):window,fe=ee.nodeName&&ee.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ee.type==="file")var ve=c1;else if(Cg(ee))if(kg)ve=p1;else{ve=d1;var we=h1}else(fe=ee.nodeName)&&fe.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ve=f1);if(ve&&(ve=ve(i,K))){Rg(re,ve,l,te);break e}we&&we(i,ee,K),i==="focusout"&&(we=ee._wrapperState)&&we.controlled&&ee.type==="number"&&ro(ee,"number",ee.value)}switch(we=K?Do(K):window,i){case"focusin":(Cg(we)||we.contentEditable==="true")&&(Ro=we,Ed=K,Za=null);break;case"focusout":Za=Ed=Ro=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,Lg(re,l,te);break;case"selectionchange":if(y1)break;case"keydown":case"keyup":Lg(re,l,te)}var Te;if(pt)e:{switch(i){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Co?xg(i,l)&&(Ce="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ce="onCompositionStart");Ce&&(ms&&l.locale!=="ko"&&(Co||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Co&&(Te=qa()):(_n=te,_o="value"in _n?_n.value:_n.textContent,Co=!0)),we=Bu(K,Ce),0<we.length&&(Ce=new Qa(Ce,i,null,l,te),re.push({event:Ce,listeners:we}),Te?Ce.data=Te:(Te=Ag(l),Te!==null&&(Ce.data=Te)))),(Te=wn?o1(i,l):a1(i,l))&&(K=Bu(K,"onBeforeInput"),0<K.length&&(te=new Qa("onBeforeInput","beforeinput",null,l,te),re.push({event:te,listeners:K}),te.data=Te))}Kg(re,s)})}function nl(i,s,l){return{instance:i,listener:s,currentTarget:l}}function Bu(i,s){for(var l=s+"Capture",d=[];i!==null;){var m=i,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=ct(i,l),v!=null&&d.unshift(nl(i,v,m)),v=ct(i,s),v!=null&&d.push(nl(i,v,m))),i=i.return}return d}function No(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Qg(i,s,l,d,m){for(var v=s._reactName,I=[];l!==null&&l!==d;){var k=l,M=k.alternate,K=k.stateNode;if(M!==null&&M===d)break;k.tag===5&&K!==null&&(k=K,m?(M=ct(l,v),M!=null&&I.unshift(nl(l,M,k))):m||(M=ct(l,v),M!=null&&I.push(nl(l,M,k)))),l=l.return}I.length!==0&&i.push({event:s,listeners:I})}var T1=/\r\n?/g,E1=/\u0000|\uFFFD/g;function Yg(i){return(typeof i=="string"?i:""+i).replace(T1,`
`).replace(E1,"")}function zu(i,s,l){if(s=Yg(s),Yg(i)!==s&&l)throw Error(t(425))}function $u(){}var Rd=null,kd=null;function Nd(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,I1=typeof clearTimeout=="function"?clearTimeout:void 0,Xg=typeof Promise=="function"?Promise:void 0,S1=typeof queueMicrotask=="function"?queueMicrotask:typeof Xg<"u"?function(i){return Xg.resolve(null).then(i).catch(P1)}:bd;function P1(i){setTimeout(function(){throw i})}function Dd(i,s){var l=s,d=0;do{var m=l.nextSibling;if(i.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(d===0){i.removeChild(m),Xn(s);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=m}while(l);Xn(s)}function wi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function Jg(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}var bo=Math.random().toString(36).slice(2),gr="__reactFiber$"+bo,rl="__reactProps$"+bo,Fr="__reactContainer$"+bo,Vd="__reactEvents$"+bo,x1="__reactListeners$"+bo,A1="__reactHandles$"+bo;function gs(i){var s=i[gr];if(s)return s;for(var l=i.parentNode;l;){if(s=l[Fr]||l[gr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=Jg(i);i!==null;){if(l=i[gr])return l;i=Jg(i)}return s}i=l,l=i.parentNode}return null}function il(i){return i=i[gr]||i[Fr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Do(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Wu(i){return i[rl]||null}var Md=[],Vo=-1;function Ti(i){return{current:i}}function et(i){0>Vo||(i.current=Md[Vo],Md[Vo]=null,Vo--)}function Ye(i,s){Vo++,Md[Vo]=i.current,i.current=s}var Ei={},zt=Ti(Ei),on=Ti(!1),ys=Ei;function Mo(i,s){var l=i.type.contextTypes;if(!l)return Ei;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in l)m[v]=s[v];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=m),m}function an(i){return i=i.childContextTypes,i!=null}function Hu(){et(on),et(zt)}function Zg(i,s,l){if(zt.current!==Ei)throw Error(t(168));Ye(zt,s),Ye(on,l)}function ey(i,s,l){var d=i.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var m in d)if(!(m in s))throw Error(t(108,De(i)||"Unknown",m));return le({},l,d)}function qu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ei,ys=zt.current,Ye(zt,i),Ye(on,on.current),!0}function ty(i,s,l){var d=i.stateNode;if(!d)throw Error(t(169));l?(i=ey(i,s,ys),d.__reactInternalMemoizedMergedChildContext=i,et(on),et(zt),Ye(zt,i)):et(on),Ye(on,l)}var Ur=null,Ku=!1,jd=!1;function ny(i){Ur===null?Ur=[i]:Ur.push(i)}function C1(i){Ku=!0,ny(i)}function Ii(){if(!jd&&Ur!==null){jd=!0;var i=0,s=je;try{var l=Ur;for(je=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}Ur=null,Ku=!1}catch(m){throw Ur!==null&&(Ur=Ur.slice(i+1)),po(ls,Ii),m}finally{je=s,jd=!1}}return null}var jo=[],Oo=0,Gu=null,Qu=0,Dn=[],Vn=0,vs=null,Br=1,zr="";function _s(i,s){jo[Oo++]=Qu,jo[Oo++]=Gu,Gu=i,Qu=s}function ry(i,s,l){Dn[Vn++]=Br,Dn[Vn++]=zr,Dn[Vn++]=vs,vs=i;var d=Br;i=zr;var m=32-Xt(d)-1;d&=~(1<<m),l+=1;var v=32-Xt(s)+m;if(30<v){var I=m-m%5;v=(d&(1<<I)-1).toString(32),d>>=I,m-=I,Br=1<<32-Xt(s)+m|l<<m|d,zr=v+i}else Br=1<<v|l<<m|d,zr=i}function Od(i){i.return!==null&&(_s(i,1),ry(i,1,0))}function Ld(i){for(;i===Gu;)Gu=jo[--Oo],jo[Oo]=null,Qu=jo[--Oo],jo[Oo]=null;for(;i===vs;)vs=Dn[--Vn],Dn[Vn]=null,zr=Dn[--Vn],Dn[Vn]=null,Br=Dn[--Vn],Dn[Vn]=null}var Tn=null,En=null,nt=!1,er=null;function iy(i,s){var l=Ln(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=i,s=i.deletions,s===null?(i.deletions=[l],i.flags|=16):s.push(l)}function sy(i,s){switch(i.tag){case 5:var l=i.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,Tn=i,En=wi(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,Tn=i,En=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=vs!==null?{id:Br,overflow:zr}:null,i.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Ln(18,null,null,0),l.stateNode=s,l.return=i,i.child=l,Tn=i,En=null,!0):!1;default:return!1}}function Fd(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Ud(i){if(nt){var s=En;if(s){var l=s;if(!sy(i,s)){if(Fd(i))throw Error(t(418));s=wi(l.nextSibling);var d=Tn;s&&sy(i,s)?iy(d,l):(i.flags=i.flags&-4097|2,nt=!1,Tn=i)}}else{if(Fd(i))throw Error(t(418));i.flags=i.flags&-4097|2,nt=!1,Tn=i}}}function oy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Tn=i}function Yu(i){if(i!==Tn)return!1;if(!nt)return oy(i),nt=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Nd(i.type,i.memoizedProps)),s&&(s=En)){if(Fd(i))throw ay(),Error(t(418));for(;s;)iy(i,s),s=wi(s.nextSibling)}if(oy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(s===0){En=wi(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}i=i.nextSibling}En=null}}else En=Tn?wi(i.stateNode.nextSibling):null;return!0}function ay(){for(var i=En;i;)i=wi(i.nextSibling)}function Lo(){En=Tn=null,nt=!1}function Bd(i){er===null?er=[i]:er.push(i)}var R1=J.ReactCurrentBatchConfig;function sl(i,s,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,i));var m=d,v=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(I){var k=m.refs;I===null?delete k[v]:k[v]=I},s._stringRef=v,s)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function Xu(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function ly(i){var s=i._init;return s(i._payload)}function uy(i){function s(W,L){if(i){var H=W.deletions;H===null?(W.deletions=[L],W.flags|=16):H.push(L)}}function l(W,L){if(!i)return null;for(;L!==null;)s(W,L),L=L.sibling;return null}function d(W,L){for(W=new Map;L!==null;)L.key!==null?W.set(L.key,L):W.set(L.index,L),L=L.sibling;return W}function m(W,L){return W=Ni(W,L),W.index=0,W.sibling=null,W}function v(W,L,H){return W.index=H,i?(H=W.alternate,H!==null?(H=H.index,H<L?(W.flags|=2,L):H):(W.flags|=2,L)):(W.flags|=1048576,L)}function I(W){return i&&W.alternate===null&&(W.flags|=2),W}function k(W,L,H,ae){return L===null||L.tag!==6?(L=Df(H,W.mode,ae),L.return=W,L):(L=m(L,H),L.return=W,L)}function M(W,L,H,ae){var ve=H.type;return ve===b?te(W,L,H.props.children,ae,H.key):L!==null&&(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===xe&&ly(ve)===L.type)?(ae=m(L,H.props),ae.ref=sl(W,L,H),ae.return=W,ae):(ae=Tc(H.type,H.key,H.props,null,W.mode,ae),ae.ref=sl(W,L,H),ae.return=W,ae)}function K(W,L,H,ae){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Vf(H,W.mode,ae),L.return=W,L):(L=m(L,H.children||[]),L.return=W,L)}function te(W,L,H,ae,ve){return L===null||L.tag!==7?(L=As(H,W.mode,ae,ve),L.return=W,L):(L=m(L,H),L.return=W,L)}function re(W,L,H){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Df(""+L,W.mode,H),L.return=W,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ce:return H=Tc(L.type,L.key,L.props,null,W.mode,H),H.ref=sl(W,null,L),H.return=W,H;case Z:return L=Vf(L,W.mode,H),L.return=W,L;case xe:var ae=L._init;return re(W,ae(L._payload),H)}if(kr(L)||de(L))return L=As(L,W.mode,H,null),L.return=W,L;Xu(W,L)}return null}function ee(W,L,H,ae){var ve=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return ve!==null?null:k(W,L,""+H,ae);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case ce:return H.key===ve?M(W,L,H,ae):null;case Z:return H.key===ve?K(W,L,H,ae):null;case xe:return ve=H._init,ee(W,L,ve(H._payload),ae)}if(kr(H)||de(H))return ve!==null?null:te(W,L,H,ae,null);Xu(W,H)}return null}function fe(W,L,H,ae,ve){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return W=W.get(H)||null,k(L,W,""+ae,ve);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case ce:return W=W.get(ae.key===null?H:ae.key)||null,M(L,W,ae,ve);case Z:return W=W.get(ae.key===null?H:ae.key)||null,K(L,W,ae,ve);case xe:var we=ae._init;return fe(W,L,H,we(ae._payload),ve)}if(kr(ae)||de(ae))return W=W.get(H)||null,te(L,W,ae,ve,null);Xu(L,ae)}return null}function me(W,L,H,ae){for(var ve=null,we=null,Te=L,Ce=L=0,Rt=null;Te!==null&&Ce<H.length;Ce++){Te.index>Ce?(Rt=Te,Te=null):Rt=Te.sibling;var $e=ee(W,Te,H[Ce],ae);if($e===null){Te===null&&(Te=Rt);break}i&&Te&&$e.alternate===null&&s(W,Te),L=v($e,L,Ce),we===null?ve=$e:we.sibling=$e,we=$e,Te=Rt}if(Ce===H.length)return l(W,Te),nt&&_s(W,Ce),ve;if(Te===null){for(;Ce<H.length;Ce++)Te=re(W,H[Ce],ae),Te!==null&&(L=v(Te,L,Ce),we===null?ve=Te:we.sibling=Te,we=Te);return nt&&_s(W,Ce),ve}for(Te=d(W,Te);Ce<H.length;Ce++)Rt=fe(Te,W,Ce,H[Ce],ae),Rt!==null&&(i&&Rt.alternate!==null&&Te.delete(Rt.key===null?Ce:Rt.key),L=v(Rt,L,Ce),we===null?ve=Rt:we.sibling=Rt,we=Rt);return i&&Te.forEach(function(bi){return s(W,bi)}),nt&&_s(W,Ce),ve}function ge(W,L,H,ae){var ve=de(H);if(typeof ve!="function")throw Error(t(150));if(H=ve.call(H),H==null)throw Error(t(151));for(var we=ve=null,Te=L,Ce=L=0,Rt=null,$e=H.next();Te!==null&&!$e.done;Ce++,$e=H.next()){Te.index>Ce?(Rt=Te,Te=null):Rt=Te.sibling;var bi=ee(W,Te,$e.value,ae);if(bi===null){Te===null&&(Te=Rt);break}i&&Te&&bi.alternate===null&&s(W,Te),L=v(bi,L,Ce),we===null?ve=bi:we.sibling=bi,we=bi,Te=Rt}if($e.done)return l(W,Te),nt&&_s(W,Ce),ve;if(Te===null){for(;!$e.done;Ce++,$e=H.next())$e=re(W,$e.value,ae),$e!==null&&(L=v($e,L,Ce),we===null?ve=$e:we.sibling=$e,we=$e);return nt&&_s(W,Ce),ve}for(Te=d(W,Te);!$e.done;Ce++,$e=H.next())$e=fe(Te,W,Ce,$e.value,ae),$e!==null&&(i&&$e.alternate!==null&&Te.delete($e.key===null?Ce:$e.key),L=v($e,L,Ce),we===null?ve=$e:we.sibling=$e,we=$e);return i&&Te.forEach(function(lP){return s(W,lP)}),nt&&_s(W,Ce),ve}function ht(W,L,H,ae){if(typeof H=="object"&&H!==null&&H.type===b&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case ce:e:{for(var ve=H.key,we=L;we!==null;){if(we.key===ve){if(ve=H.type,ve===b){if(we.tag===7){l(W,we.sibling),L=m(we,H.props.children),L.return=W,W=L;break e}}else if(we.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===xe&&ly(ve)===we.type){l(W,we.sibling),L=m(we,H.props),L.ref=sl(W,we,H),L.return=W,W=L;break e}l(W,we);break}else s(W,we);we=we.sibling}H.type===b?(L=As(H.props.children,W.mode,ae,H.key),L.return=W,W=L):(ae=Tc(H.type,H.key,H.props,null,W.mode,ae),ae.ref=sl(W,L,H),ae.return=W,W=ae)}return I(W);case Z:e:{for(we=H.key;L!==null;){if(L.key===we)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){l(W,L.sibling),L=m(L,H.children||[]),L.return=W,W=L;break e}else{l(W,L);break}else s(W,L);L=L.sibling}L=Vf(H,W.mode,ae),L.return=W,W=L}return I(W);case xe:return we=H._init,ht(W,L,we(H._payload),ae)}if(kr(H))return me(W,L,H,ae);if(de(H))return ge(W,L,H,ae);Xu(W,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,L!==null&&L.tag===6?(l(W,L.sibling),L=m(L,H),L.return=W,W=L):(l(W,L),L=Df(H,W.mode,ae),L.return=W,W=L),I(W)):l(W,L)}return ht}var Fo=uy(!0),cy=uy(!1),Ju=Ti(null),Zu=null,Uo=null,zd=null;function $d(){zd=Uo=Zu=null}function Wd(i){var s=Ju.current;et(Ju),i._currentValue=s}function Hd(i,s,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),i===l)break;i=i.return}}function Bo(i,s){Zu=i,zd=Uo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(ln=!0),i.firstContext=null)}function Mn(i){var s=i._currentValue;if(zd!==i)if(i={context:i,memoizedValue:s,next:null},Uo===null){if(Zu===null)throw Error(t(308));Uo=i,Zu.dependencies={lanes:0,firstContext:i}}else Uo=Uo.next=i;return s}var ws=null;function qd(i){ws===null?ws=[i]:ws.push(i)}function hy(i,s,l,d){var m=s.interleaved;return m===null?(l.next=l,qd(s)):(l.next=m.next,m.next=l),s.interleaved=l,$r(i,d)}function $r(i,s){i.lanes|=s;var l=i.alternate;for(l!==null&&(l.lanes|=s),l=i,i=i.return;i!==null;)i.childLanes|=s,l=i.alternate,l!==null&&(l.childLanes|=s),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Si=!1;function Kd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dy(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Wr(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function Pi(i,s,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ze&2)!==0){var m=d.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),d.pending=s,$r(i,l)}return m=d.interleaved,m===null?(s.next=s,qd(d)):(s.next=m.next,m.next=s),d.interleaved=s,$r(i,l)}function ec(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var d=s.lanes;d&=i.pendingLanes,l|=d,s.lanes=l,pi(i,l)}}function fy(i,s){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var I={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?m=v=I:v=v.next=I,l=l.next}while(l!==null);v===null?m=v=s:v=v.next=s}else m=v=s;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}function tc(i,s,l,d){var m=i.updateQueue;Si=!1;var v=m.firstBaseUpdate,I=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var M=k,K=M.next;M.next=null,I===null?v=K:I.next=K,I=M;var te=i.alternate;te!==null&&(te=te.updateQueue,k=te.lastBaseUpdate,k!==I&&(k===null?te.firstBaseUpdate=K:k.next=K,te.lastBaseUpdate=M))}if(v!==null){var re=m.baseState;I=0,te=K=M=null,k=v;do{var ee=k.lane,fe=k.eventTime;if((d&ee)===ee){te!==null&&(te=te.next={eventTime:fe,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var me=i,ge=k;switch(ee=s,fe=l,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){re=me.call(fe,re,ee);break e}re=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,ee=typeof me=="function"?me.call(fe,re,ee):me,ee==null)break e;re=le({},re,ee);break e;case 2:Si=!0}}k.callback!==null&&k.lane!==0&&(i.flags|=64,ee=m.effects,ee===null?m.effects=[k]:ee.push(k))}else fe={eventTime:fe,lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},te===null?(K=te=fe,M=re):te=te.next=fe,I|=ee;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;ee=k,k=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);if(te===null&&(M=re),m.baseState=M,m.firstBaseUpdate=K,m.lastBaseUpdate=te,s=m.shared.interleaved,s!==null){m=s;do I|=m.lane,m=m.next;while(m!==s)}else v===null&&(m.shared.lanes=0);Is|=I,i.lanes=I,i.memoizedState=re}}function py(i,s,l){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var d=i[s],m=d.callback;if(m!==null){if(d.callback=null,d=l,typeof m!="function")throw Error(t(191,m));m.call(d)}}}var ol={},yr=Ti(ol),al=Ti(ol),ll=Ti(ol);function Ts(i){if(i===ol)throw Error(t(174));return i}function Gd(i,s){switch(Ye(ll,s),Ye(al,i),Ye(yr,ol),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:wt(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=wt(s,i)}et(yr),Ye(yr,s)}function zo(){et(yr),et(al),et(ll)}function my(i){Ts(ll.current);var s=Ts(yr.current),l=wt(s,i.type);s!==l&&(Ye(al,i),Ye(yr,l))}function Qd(i){al.current===i&&(et(yr),et(al))}var it=Ti(0);function nc(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Yd=[];function Xd(){for(var i=0;i<Yd.length;i++)Yd[i]._workInProgressVersionPrimary=null;Yd.length=0}var rc=J.ReactCurrentDispatcher,Jd=J.ReactCurrentBatchConfig,Es=0,st=null,Et=null,At=null,ic=!1,ul=!1,cl=0,k1=0;function $t(){throw Error(t(321))}function Zd(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!Zn(i[l],s[l]))return!1;return!0}function ef(i,s,l,d,m,v){if(Es=v,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,rc.current=i===null||i.memoizedState===null?V1:M1,i=l(d,m),ul){v=0;do{if(ul=!1,cl=0,25<=v)throw Error(t(301));v+=1,At=Et=null,s.updateQueue=null,rc.current=j1,i=l(d,m)}while(ul)}if(rc.current=ac,s=Et!==null&&Et.next!==null,Es=0,At=Et=st=null,ic=!1,s)throw Error(t(300));return i}function tf(){var i=cl!==0;return cl=0,i}function vr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?st.memoizedState=At=i:At=At.next=i,At}function jn(){if(Et===null){var i=st.alternate;i=i!==null?i.memoizedState:null}else i=Et.next;var s=At===null?st.memoizedState:At.next;if(s!==null)At=s,Et=i;else{if(i===null)throw Error(t(310));Et=i,i={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},At===null?st.memoizedState=At=i:At=At.next=i}return At}function hl(i,s){return typeof s=="function"?s(i):s}function nf(i){var s=jn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=Et,m=d.baseQueue,v=l.pending;if(v!==null){if(m!==null){var I=m.next;m.next=v.next,v.next=I}d.baseQueue=m=v,l.pending=null}if(m!==null){v=m.next,d=d.baseState;var k=I=null,M=null,K=v;do{var te=K.lane;if((Es&te)===te)M!==null&&(M=M.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:i(d,K.action);else{var re={lane:te,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};M===null?(k=M=re,I=d):M=M.next=re,st.lanes|=te,Is|=te}K=K.next}while(K!==null&&K!==v);M===null?I=d:M.next=k,Zn(d,s.memoizedState)||(ln=!0),s.memoizedState=d,s.baseState=I,s.baseQueue=M,l.lastRenderedState=d}if(i=l.interleaved,i!==null){m=i;do v=m.lane,st.lanes|=v,Is|=v,m=m.next;while(m!==i)}else m===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function rf(i){var s=jn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=l.dispatch,m=l.pending,v=s.memoizedState;if(m!==null){l.pending=null;var I=m=m.next;do v=i(v,I.action),I=I.next;while(I!==m);Zn(v,s.memoizedState)||(ln=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,d]}function gy(){}function yy(i,s){var l=st,d=jn(),m=s(),v=!Zn(d.memoizedState,m);if(v&&(d.memoizedState=m,ln=!0),d=d.queue,sf(wy.bind(null,l,d,i),[i]),d.getSnapshot!==s||v||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,dl(9,_y.bind(null,l,d,m,s),void 0,null),Ct===null)throw Error(t(349));(Es&30)!==0||vy(l,s,m)}return m}function vy(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function _y(i,s,l,d){s.value=l,s.getSnapshot=d,Ty(s)&&Ey(i)}function wy(i,s,l){return l(function(){Ty(s)&&Ey(i)})}function Ty(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!Zn(i,l)}catch{return!0}}function Ey(i){var s=$r(i,1);s!==null&&ir(s,i,1,-1)}function Iy(i){var s=vr();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:i},s.queue=i,i=i.dispatch=D1.bind(null,st,i),[s.memoizedState,i]}function dl(i,s,l,d){return i={tag:i,create:s,destroy:l,deps:d,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=i.next=i):(l=s.lastEffect,l===null?s.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,s.lastEffect=i)),i}function Sy(){return jn().memoizedState}function sc(i,s,l,d){var m=vr();st.flags|=i,m.memoizedState=dl(1|s,l,void 0,d===void 0?null:d)}function oc(i,s,l,d){var m=jn();d=d===void 0?null:d;var v=void 0;if(Et!==null){var I=Et.memoizedState;if(v=I.destroy,d!==null&&Zd(d,I.deps)){m.memoizedState=dl(s,l,v,d);return}}st.flags|=i,m.memoizedState=dl(1|s,l,v,d)}function Py(i,s){return sc(8390656,8,i,s)}function sf(i,s){return oc(2048,8,i,s)}function xy(i,s){return oc(4,2,i,s)}function Ay(i,s){return oc(4,4,i,s)}function Cy(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Ry(i,s,l){return l=l!=null?l.concat([i]):null,oc(4,4,Cy.bind(null,s,i),l)}function of(){}function ky(i,s){var l=jn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Zd(s,d[1])?d[0]:(l.memoizedState=[i,s],i)}function Ny(i,s){var l=jn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Zd(s,d[1])?d[0]:(i=i(),l.memoizedState=[i,s],i)}function by(i,s,l){return(Es&21)===0?(i.baseState&&(i.baseState=!1,ln=!0),i.memoizedState=l):(Zn(l,s)||(l=hs(),st.lanes|=l,Is|=l,i.baseState=!0),s)}function N1(i,s){var l=je;je=l!==0&&4>l?l:4,i(!0);var d=Jd.transition;Jd.transition={};try{i(!1),s()}finally{je=l,Jd.transition=d}}function Dy(){return jn().memoizedState}function b1(i,s,l){var d=Ri(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Vy(i))My(s,l);else if(l=hy(i,s,l,d),l!==null){var m=en();ir(l,i,d,m),jy(l,s,d)}}function D1(i,s,l){var d=Ri(i),m={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Vy(i))My(s,m);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var I=s.lastRenderedState,k=v(I,l);if(m.hasEagerState=!0,m.eagerState=k,Zn(k,I)){var M=s.interleaved;M===null?(m.next=m,qd(s)):(m.next=M.next,M.next=m),s.interleaved=m;return}}catch{}finally{}l=hy(i,s,m,d),l!==null&&(m=en(),ir(l,i,d,m),jy(l,s,d))}}function Vy(i){var s=i.alternate;return i===st||s!==null&&s===st}function My(i,s){ul=ic=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function jy(i,s,l){if((l&4194240)!==0){var d=s.lanes;d&=i.pendingLanes,l|=d,s.lanes=l,pi(i,l)}}var ac={readContext:Mn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},V1={readContext:Mn,useCallback:function(i,s){return vr().memoizedState=[i,s===void 0?null:s],i},useContext:Mn,useEffect:Py,useImperativeHandle:function(i,s,l){return l=l!=null?l.concat([i]):null,sc(4194308,4,Cy.bind(null,s,i),l)},useLayoutEffect:function(i,s){return sc(4194308,4,i,s)},useInsertionEffect:function(i,s){return sc(4,2,i,s)},useMemo:function(i,s){var l=vr();return s=s===void 0?null:s,i=i(),l.memoizedState=[i,s],i},useReducer:function(i,s,l){var d=vr();return s=l!==void 0?l(s):s,d.memoizedState=d.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},d.queue=i,i=i.dispatch=b1.bind(null,st,i),[d.memoizedState,i]},useRef:function(i){var s=vr();return i={current:i},s.memoizedState=i},useState:Iy,useDebugValue:of,useDeferredValue:function(i){return vr().memoizedState=i},useTransition:function(){var i=Iy(!1),s=i[0];return i=N1.bind(null,i[1]),vr().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,l){var d=st,m=vr();if(nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Ct===null)throw Error(t(349));(Es&30)!==0||vy(d,s,l)}m.memoizedState=l;var v={value:l,getSnapshot:s};return m.queue=v,Py(wy.bind(null,d,v,i),[i]),d.flags|=2048,dl(9,_y.bind(null,d,v,l,s),void 0,null),l},useId:function(){var i=vr(),s=Ct.identifierPrefix;if(nt){var l=zr,d=Br;l=(d&~(1<<32-Xt(d)-1)).toString(32)+l,s=":"+s+"R"+l,l=cl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=k1++,s=":"+s+"r"+l.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},M1={readContext:Mn,useCallback:ky,useContext:Mn,useEffect:sf,useImperativeHandle:Ry,useInsertionEffect:xy,useLayoutEffect:Ay,useMemo:Ny,useReducer:nf,useRef:Sy,useState:function(){return nf(hl)},useDebugValue:of,useDeferredValue:function(i){var s=jn();return by(s,Et.memoizedState,i)},useTransition:function(){var i=nf(hl)[0],s=jn().memoizedState;return[i,s]},useMutableSource:gy,useSyncExternalStore:yy,useId:Dy,unstable_isNewReconciler:!1},j1={readContext:Mn,useCallback:ky,useContext:Mn,useEffect:sf,useImperativeHandle:Ry,useInsertionEffect:xy,useLayoutEffect:Ay,useMemo:Ny,useReducer:rf,useRef:Sy,useState:function(){return rf(hl)},useDebugValue:of,useDeferredValue:function(i){var s=jn();return Et===null?s.memoizedState=i:by(s,Et.memoizedState,i)},useTransition:function(){var i=rf(hl)[0],s=jn().memoizedState;return[i,s]},useMutableSource:gy,useSyncExternalStore:yy,useId:Dy,unstable_isNewReconciler:!1};function tr(i,s){if(i&&i.defaultProps){s=le({},s),i=i.defaultProps;for(var l in i)s[l]===void 0&&(s[l]=i[l]);return s}return s}function af(i,s,l,d){s=i.memoizedState,l=l(d,s),l=l==null?s:le({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var lc={isMounted:function(i){return(i=i._reactInternals)?qn(i)===i:!1},enqueueSetState:function(i,s,l){i=i._reactInternals;var d=en(),m=Ri(i),v=Wr(d,m);v.payload=s,l!=null&&(v.callback=l),s=Pi(i,v,m),s!==null&&(ir(s,i,m,d),ec(s,i,m))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var d=en(),m=Ri(i),v=Wr(d,m);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=Pi(i,v,m),s!==null&&(ir(s,i,m,d),ec(s,i,m))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=en(),d=Ri(i),m=Wr(l,d);m.tag=2,s!=null&&(m.callback=s),s=Pi(i,m,d),s!==null&&(ir(s,i,d,l),ec(s,i,d))}};function Oy(i,s,l,d,m,v,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,I):s.prototype&&s.prototype.isPureReactComponent?!Ja(l,d)||!Ja(m,v):!0}function Ly(i,s,l){var d=!1,m=Ei,v=s.contextType;return typeof v=="object"&&v!==null?v=Mn(v):(m=an(s)?ys:zt.current,d=s.contextTypes,v=(d=d!=null)?Mo(i,m):Ei),s=new s(l,v),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=lc,i.stateNode=s,s._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=v),s}function Fy(i,s,l,d){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==i&&lc.enqueueReplaceState(s,s.state,null)}function lf(i,s,l,d){var m=i.stateNode;m.props=l,m.state=i.memoizedState,m.refs={},Kd(i);var v=s.contextType;typeof v=="object"&&v!==null?m.context=Mn(v):(v=an(s)?ys:zt.current,m.context=Mo(i,v)),m.state=i.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(af(i,s,v,l),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&lc.enqueueReplaceState(m,m.state,null),tc(i,l,m,d),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function $o(i,s){try{var l="",d=s;do l+=he(d),d=d.return;while(d);var m=l}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:s,stack:m,digest:null}}function uf(i,s,l){return{value:i,source:null,stack:l??null,digest:s??null}}function cf(i,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var O1=typeof WeakMap=="function"?WeakMap:Map;function Uy(i,s,l){l=Wr(-1,l),l.tag=3,l.payload={element:null};var d=s.value;return l.callback=function(){mc||(mc=!0,Pf=d),cf(i,s)},l}function By(i,s,l){l=Wr(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var m=s.value;l.payload=function(){return d(m)},l.callback=function(){cf(i,s)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){cf(i,s),typeof d!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var I=s.stack;this.componentDidCatch(s.value,{componentStack:I!==null?I:""})}),l}function zy(i,s,l){var d=i.pingCache;if(d===null){d=i.pingCache=new O1;var m=new Set;d.set(s,m)}else m=d.get(s),m===void 0&&(m=new Set,d.set(s,m));m.has(l)||(m.add(l),i=X1.bind(null,i,s,l),s.then(i,i))}function $y(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function Wy(i,s,l,d,m){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Wr(-1,1),s.tag=2,Pi(l,s,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var L1=J.ReactCurrentOwner,ln=!1;function Zt(i,s,l,d){s.child=i===null?cy(s,null,l,d):Fo(s,i.child,l,d)}function Hy(i,s,l,d,m){l=l.render;var v=s.ref;return Bo(s,m),d=ef(i,s,l,d,v,m),l=tf(),i!==null&&!ln?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~m,Hr(i,s,m)):(nt&&l&&Od(s),s.flags|=1,Zt(i,s,d,m),s.child)}function qy(i,s,l,d,m){if(i===null){var v=l.type;return typeof v=="function"&&!bf(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=v,Ky(i,s,v,d,m)):(i=Tc(l.type,null,d,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(v=i.child,(i.lanes&m)===0){var I=v.memoizedProps;if(l=l.compare,l=l!==null?l:Ja,l(I,d)&&i.ref===s.ref)return Hr(i,s,m)}return s.flags|=1,i=Ni(v,d),i.ref=s.ref,i.return=s,s.child=i}function Ky(i,s,l,d,m){if(i!==null){var v=i.memoizedProps;if(Ja(v,d)&&i.ref===s.ref)if(ln=!1,s.pendingProps=d=v,(i.lanes&m)!==0)(i.flags&131072)!==0&&(ln=!0);else return s.lanes=i.lanes,Hr(i,s,m)}return hf(i,s,l,d,m)}function Gy(i,s,l){var d=s.pendingProps,m=d.children,v=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Ho,In),In|=l;else{if((l&1073741824)===0)return i=v!==null?v.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,Ye(Ho,In),In|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:l,Ye(Ho,In),In|=d}else v!==null?(d=v.baseLanes|l,s.memoizedState=null):d=l,Ye(Ho,In),In|=d;return Zt(i,s,m,l),s.child}function Qy(i,s){var l=s.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function hf(i,s,l,d,m){var v=an(l)?ys:zt.current;return v=Mo(s,v),Bo(s,m),l=ef(i,s,l,d,v,m),d=tf(),i!==null&&!ln?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~m,Hr(i,s,m)):(nt&&d&&Od(s),s.flags|=1,Zt(i,s,l,m),s.child)}function Yy(i,s,l,d,m){if(an(l)){var v=!0;qu(s)}else v=!1;if(Bo(s,m),s.stateNode===null)cc(i,s),Ly(s,l,d),lf(s,l,d,m),d=!0;else if(i===null){var I=s.stateNode,k=s.memoizedProps;I.props=k;var M=I.context,K=l.contextType;typeof K=="object"&&K!==null?K=Mn(K):(K=an(l)?ys:zt.current,K=Mo(s,K));var te=l.getDerivedStateFromProps,re=typeof te=="function"||typeof I.getSnapshotBeforeUpdate=="function";re||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(k!==d||M!==K)&&Fy(s,I,d,K),Si=!1;var ee=s.memoizedState;I.state=ee,tc(s,d,I,m),M=s.memoizedState,k!==d||ee!==M||on.current||Si?(typeof te=="function"&&(af(s,l,te,d),M=s.memoizedState),(k=Si||Oy(s,l,k,d,ee,M,K))?(re||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(s.flags|=4194308)):(typeof I.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=M),I.props=d,I.state=M,I.context=K,d=k):(typeof I.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{I=s.stateNode,dy(i,s),k=s.memoizedProps,K=s.type===s.elementType?k:tr(s.type,k),I.props=K,re=s.pendingProps,ee=I.context,M=l.contextType,typeof M=="object"&&M!==null?M=Mn(M):(M=an(l)?ys:zt.current,M=Mo(s,M));var fe=l.getDerivedStateFromProps;(te=typeof fe=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(k!==re||ee!==M)&&Fy(s,I,d,M),Si=!1,ee=s.memoizedState,I.state=ee,tc(s,d,I,m);var me=s.memoizedState;k!==re||ee!==me||on.current||Si?(typeof fe=="function"&&(af(s,l,fe,d),me=s.memoizedState),(K=Si||Oy(s,l,K,d,ee,me,M)||!1)?(te||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(d,me,M),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(d,me,M)),typeof I.componentDidUpdate=="function"&&(s.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof I.componentDidUpdate!="function"||k===i.memoizedProps&&ee===i.memoizedState||(s.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&ee===i.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=me),I.props=d,I.state=me,I.context=M,d=K):(typeof I.componentDidUpdate!="function"||k===i.memoizedProps&&ee===i.memoizedState||(s.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||k===i.memoizedProps&&ee===i.memoizedState||(s.flags|=1024),d=!1)}return df(i,s,l,d,v,m)}function df(i,s,l,d,m,v){Qy(i,s);var I=(s.flags&128)!==0;if(!d&&!I)return m&&ty(s,l,!1),Hr(i,s,v);d=s.stateNode,L1.current=s;var k=I&&typeof l.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,i!==null&&I?(s.child=Fo(s,i.child,null,v),s.child=Fo(s,null,k,v)):Zt(i,s,k,v),s.memoizedState=d.state,m&&ty(s,l,!0),s.child}function Xy(i){var s=i.stateNode;s.pendingContext?Zg(i,s.pendingContext,s.pendingContext!==s.context):s.context&&Zg(i,s.context,!1),Gd(i,s.containerInfo)}function Jy(i,s,l,d,m){return Lo(),Bd(m),s.flags|=256,Zt(i,s,l,d),s.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function pf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Zy(i,s,l){var d=s.pendingProps,m=it.current,v=!1,I=(s.flags&128)!==0,k;if((k=I)||(k=i!==null&&i.memoizedState===null?!1:(m&2)!==0),k?(v=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),Ye(it,m&1),i===null)return Ud(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(I=d.children,i=d.fallback,v?(d=s.mode,v=s.child,I={mode:"hidden",children:I},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=I):v=Ec(I,d,0,null),i=As(i,d,l,null),v.return=s,i.return=s,v.sibling=i,s.child=v,s.child.memoizedState=pf(l),s.memoizedState=ff,i):mf(s,I));if(m=i.memoizedState,m!==null&&(k=m.dehydrated,k!==null))return F1(i,s,I,d,k,m,l);if(v){v=d.fallback,I=s.mode,m=i.child,k=m.sibling;var M={mode:"hidden",children:d.children};return(I&1)===0&&s.child!==m?(d=s.child,d.childLanes=0,d.pendingProps=M,s.deletions=null):(d=Ni(m,M),d.subtreeFlags=m.subtreeFlags&14680064),k!==null?v=Ni(k,v):(v=As(v,I,l,null),v.flags|=2),v.return=s,d.return=s,d.sibling=v,s.child=d,d=v,v=s.child,I=i.child.memoizedState,I=I===null?pf(l):{baseLanes:I.baseLanes|l,cachePool:null,transitions:I.transitions},v.memoizedState=I,v.childLanes=i.childLanes&~l,s.memoizedState=ff,d}return v=i.child,i=v.sibling,d=Ni(v,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=l),d.return=s,d.sibling=null,i!==null&&(l=s.deletions,l===null?(s.deletions=[i],s.flags|=16):l.push(i)),s.child=d,s.memoizedState=null,d}function mf(i,s){return s=Ec({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function uc(i,s,l,d){return d!==null&&Bd(d),Fo(s,i.child,null,l),i=mf(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function F1(i,s,l,d,m,v,I){if(l)return s.flags&256?(s.flags&=-257,d=uf(Error(t(422))),uc(i,s,I,d)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(v=d.fallback,m=s.mode,d=Ec({mode:"visible",children:d.children},m,0,null),v=As(v,m,I,null),v.flags|=2,d.return=s,v.return=s,d.sibling=v,s.child=d,(s.mode&1)!==0&&Fo(s,i.child,null,I),s.child.memoizedState=pf(I),s.memoizedState=ff,v);if((s.mode&1)===0)return uc(i,s,I,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var k=d.dgst;return d=k,v=Error(t(419)),d=uf(v,d,void 0),uc(i,s,I,d)}if(k=(I&i.childLanes)!==0,ln||k){if(d=Ct,d!==null){switch(I&-I){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|I))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,$r(i,m),ir(d,i,m,-1))}return Nf(),d=uf(Error(t(421))),uc(i,s,I,d)}return m.data==="$?"?(s.flags|=128,s.child=i.child,s=J1.bind(null,i),m._reactRetry=s,null):(i=v.treeContext,En=wi(m.nextSibling),Tn=s,nt=!0,er=null,i!==null&&(Dn[Vn++]=Br,Dn[Vn++]=zr,Dn[Vn++]=vs,Br=i.id,zr=i.overflow,vs=s),s=mf(s,d.children),s.flags|=4096,s)}function ev(i,s,l){i.lanes|=s;var d=i.alternate;d!==null&&(d.lanes|=s),Hd(i.return,s,l)}function gf(i,s,l,d,m){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=l,v.tailMode=m)}function tv(i,s,l){var d=s.pendingProps,m=d.revealOrder,v=d.tail;if(Zt(i,s,d.children,l),d=it.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ev(i,l,s);else if(i.tag===19)ev(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(Ye(it,d),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(l=s.child,m=null;l!==null;)i=l.alternate,i!==null&&nc(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),gf(s,!1,m,l,v);break;case"backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&nc(i)===null){s.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}gf(s,!0,l,null,v);break;case"together":gf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function cc(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Hr(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),Is|=s.lanes,(l&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,l=Ni(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Ni(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function U1(i,s,l){switch(s.tag){case 3:Xy(s),Lo();break;case 5:my(s);break;case 1:an(s.type)&&qu(s);break;case 4:Gd(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,m=s.memoizedProps.value;Ye(Ju,d._currentValue),d._currentValue=m;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Ye(it,it.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Zy(i,s,l):(Ye(it,it.current&1),i=Hr(i,s,l),i!==null?i.sibling:null);Ye(it,it.current&1);break;case 19:if(d=(l&s.childLanes)!==0,(i.flags&128)!==0){if(d)return tv(i,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Ye(it,it.current),d)break;return null;case 22:case 23:return s.lanes=0,Gy(i,s,l)}return Hr(i,s,l)}var nv,yf,rv,iv;nv=function(i,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},yf=function(){},rv=function(i,s,l,d){var m=i.memoizedProps;if(m!==d){i=s.stateNode,Ts(yr.current);var v=null;switch(l){case"input":m=es(i,m),d=es(i,d),v=[];break;case"select":m=le({},m,{value:void 0}),d=le({},d,{value:void 0}),v=[];break;case"textarea":m=Aa(i,m),d=Aa(i,d),v=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=$u)}Da(l,d);var I;l=null;for(K in m)if(!d.hasOwnProperty(K)&&m.hasOwnProperty(K)&&m[K]!=null)if(K==="style"){var k=m[K];for(I in k)k.hasOwnProperty(I)&&(l||(l={}),l[I]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?v||(v=[]):(v=v||[]).push(K,null));for(K in d){var M=d[K];if(k=m?.[K],d.hasOwnProperty(K)&&M!==k&&(M!=null||k!=null))if(K==="style")if(k){for(I in k)!k.hasOwnProperty(I)||M&&M.hasOwnProperty(I)||(l||(l={}),l[I]="");for(I in M)M.hasOwnProperty(I)&&k[I]!==M[I]&&(l||(l={}),l[I]=M[I])}else l||(v||(v=[]),v.push(K,l)),l=M;else K==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,k=k?k.__html:void 0,M!=null&&k!==M&&(v=v||[]).push(K,M)):K==="children"?typeof M!="string"&&typeof M!="number"||(v=v||[]).push(K,""+M):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(M!=null&&K==="onScroll"&&Ze("scroll",i),v||k===M||(v=[])):(v=v||[]).push(K,M))}l&&(v=v||[]).push("style",l);var K=v;(s.updateQueue=K)&&(s.flags|=4)}},iv=function(i,s,l,d){l!==d&&(s.flags|=4)};function fl(i,s){if(!nt)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Wt(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(s)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=l,s}function B1(i,s,l){var d=s.pendingProps;switch(Ld(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(s),null;case 1:return an(s.type)&&Hu(),Wt(s),null;case 3:return d=s.stateNode,zo(),et(on),et(zt),Xd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Yu(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,er!==null&&(Cf(er),er=null))),yf(i,s),Wt(s),null;case 5:Qd(s);var m=Ts(ll.current);if(l=s.type,i!==null&&s.stateNode!=null)rv(i,s,l,d,m),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Wt(s),null}if(i=Ts(yr.current),Yu(s)){d=s.stateNode,l=s.type;var v=s.memoizedProps;switch(d[gr]=s,d[rl]=v,i=(s.mode&1)!==0,l){case"dialog":Ze("cancel",d),Ze("close",d);break;case"iframe":case"object":case"embed":Ze("load",d);break;case"video":case"audio":for(m=0;m<el.length;m++)Ze(el[m],d);break;case"source":Ze("error",d);break;case"img":case"image":case"link":Ze("error",d),Ze("load",d);break;case"details":Ze("toggle",d);break;case"input":no(d,v),Ze("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},Ze("invalid",d);break;case"textarea":io(d,v),Ze("invalid",d)}Da(l,v),m=null;for(var I in v)if(v.hasOwnProperty(I)){var k=v[I];I==="children"?typeof k=="string"?d.textContent!==k&&(v.suppressHydrationWarning!==!0&&zu(d.textContent,k,i),m=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(v.suppressHydrationWarning!==!0&&zu(d.textContent,k,i),m=["children",""+k]):o.hasOwnProperty(I)&&k!=null&&I==="onScroll"&&Ze("scroll",d)}switch(l){case"input":Dt(d),pu(d,v,!0);break;case"textarea":Dt(d),Ca(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=$u)}d=m,s.updateQueue=d,d!==null&&(s.flags|=4)}else{I=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=_t(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=I.createElement(l,{is:d.is}):(i=I.createElement(l),l==="select"&&(I=i,d.multiple?I.multiple=!0:d.size&&(I.size=d.size))):i=I.createElementNS(i,l),i[gr]=s,i[rl]=d,nv(i,s,!1,!1),s.stateNode=i;e:{switch(I=Va(l,d),l){case"dialog":Ze("cancel",i),Ze("close",i),m=d;break;case"iframe":case"object":case"embed":Ze("load",i),m=d;break;case"video":case"audio":for(m=0;m<el.length;m++)Ze(el[m],i);m=d;break;case"source":Ze("error",i),m=d;break;case"img":case"image":case"link":Ze("error",i),Ze("load",i),m=d;break;case"details":Ze("toggle",i),m=d;break;case"input":no(i,d),m=es(i,d),Ze("invalid",i);break;case"option":m=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},m=le({},d,{value:void 0}),Ze("invalid",i);break;case"textarea":io(i,d),m=Aa(i,d),Ze("invalid",i);break;default:m=d}Da(l,m),k=m;for(v in k)if(k.hasOwnProperty(v)){var M=k[v];v==="style"?Na(i,M):v==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&Ra(i,M)):v==="children"?typeof M=="string"?(l!=="textarea"||M!=="")&&ui(i,M):typeof M=="number"&&ui(i,""+M):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?M!=null&&v==="onScroll"&&Ze("scroll",i):M!=null&&z(i,v,M,I))}switch(l){case"input":Dt(i),pu(i,d,!1);break;case"textarea":Dt(i),Ca(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Be(d.value));break;case"select":i.multiple=!!d.multiple,v=d.value,v!=null?Nr(i,!!d.multiple,v,!1):d.defaultValue!=null&&Nr(i,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=$u)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Wt(s),null;case 6:if(i&&s.stateNode!=null)iv(i,s,i.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(l=Ts(ll.current),Ts(yr.current),Yu(s)){if(d=s.stateNode,l=s.memoizedProps,d[gr]=s,(v=d.nodeValue!==l)&&(i=Tn,i!==null))switch(i.tag){case 3:zu(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&zu(d.nodeValue,l,(i.mode&1)!==0)}v&&(s.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[gr]=s,s.stateNode=d}return Wt(s),null;case 13:if(et(it),d=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(nt&&En!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ay(),Lo(),s.flags|=98560,v=!1;else if(v=Yu(s),d!==null&&d.dehydrated!==null){if(i===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[gr]=s}else Lo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Wt(s),v=!1}else er!==null&&(Cf(er),er=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(it.current&1)!==0?It===0&&(It=3):Nf())),s.updateQueue!==null&&(s.flags|=4),Wt(s),null);case 4:return zo(),yf(i,s),i===null&&tl(s.stateNode.containerInfo),Wt(s),null;case 10:return Wd(s.type._context),Wt(s),null;case 17:return an(s.type)&&Hu(),Wt(s),null;case 19:if(et(it),v=s.memoizedState,v===null)return Wt(s),null;if(d=(s.flags&128)!==0,I=v.rendering,I===null)if(d)fl(v,!1);else{if(It!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(I=nc(i),I!==null){for(s.flags|=128,fl(v,!1),d=I.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=l,l=s.child;l!==null;)v=l,i=d,v.flags&=14680066,I=v.alternate,I===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=I.childLanes,v.lanes=I.lanes,v.child=I.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=I.memoizedProps,v.memoizedState=I.memoizedState,v.updateQueue=I.updateQueue,v.type=I.type,i=I.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Ye(it,it.current&1|2),s.child}i=i.sibling}v.tail!==null&&Qe()>qo&&(s.flags|=128,d=!0,fl(v,!1),s.lanes=4194304)}else{if(!d)if(i=nc(I),i!==null){if(s.flags|=128,d=!0,l=i.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),fl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!I.alternate&&!nt)return Wt(s),null}else 2*Qe()-v.renderingStartTime>qo&&l!==1073741824&&(s.flags|=128,d=!0,fl(v,!1),s.lanes=4194304);v.isBackwards?(I.sibling=s.child,s.child=I):(l=v.last,l!==null?l.sibling=I:s.child=I,v.last=I)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Qe(),s.sibling=null,l=it.current,Ye(it,d?l&1|2:l&1),s):(Wt(s),null);case 22:case 23:return kf(),d=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(In&1073741824)!==0&&(Wt(s),s.subtreeFlags&6&&(s.flags|=8192)):Wt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function z1(i,s){switch(Ld(s),s.tag){case 1:return an(s.type)&&Hu(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return zo(),et(on),et(zt),Xd(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return Qd(s),null;case 13:if(et(it),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Lo()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return et(it),null;case 4:return zo(),null;case 10:return Wd(s.type._context),null;case 22:case 23:return kf(),null;case 24:return null;default:return null}}var hc=!1,Ht=!1,$1=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Wo(i,s){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){lt(i,s,d)}else l.current=null}function vf(i,s,l){try{l()}catch(d){lt(i,s,d)}}var sv=!1;function W1(i,s){if(Rd=yi,i=Og(),Td(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var m=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var I=0,k=-1,M=-1,K=0,te=0,re=i,ee=null;t:for(;;){for(var fe;re!==l||m!==0&&re.nodeType!==3||(k=I+m),re!==v||d!==0&&re.nodeType!==3||(M=I+d),re.nodeType===3&&(I+=re.nodeValue.length),(fe=re.firstChild)!==null;)ee=re,re=fe;for(;;){if(re===i)break t;if(ee===l&&++K===m&&(k=I),ee===v&&++te===d&&(M=I),(fe=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=fe}l=k===-1||M===-1?null:{start:k,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(kd={focusedElem:i,selectionRange:l},yi=!1,pe=s;pe!==null;)if(s=pe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,pe=i;else for(;pe!==null;){s=pe;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,ht=me.memoizedState,W=s.stateNode,L=W.getSnapshotBeforeUpdate(s.elementType===s.type?ge:tr(s.type,ge),ht);W.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var H=s.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){lt(s,s.return,ae)}if(i=s.sibling,i!==null){i.return=s.return,pe=i;break}pe=s.return}return me=sv,sv=!1,me}function pl(i,s,l){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&i)===i){var v=m.destroy;m.destroy=void 0,v!==void 0&&vf(s,l,v)}m=m.next}while(m!==d)}}function dc(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==s)}}function _f(i){var s=i.ref;if(s!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof s=="function"?s(i):s.current=i}}function ov(i){var s=i.alternate;s!==null&&(i.alternate=null,ov(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[gr],delete s[rl],delete s[Vd],delete s[x1],delete s[A1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function av(i){return i.tag===5||i.tag===3||i.tag===4}function lv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||av(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function wf(i,s,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(i,s):l.insertBefore(i,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(i,l)):(s=l,s.appendChild(i)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=$u));else if(d!==4&&(i=i.child,i!==null))for(wf(i,s,l),i=i.sibling;i!==null;)wf(i,s,l),i=i.sibling}function Tf(i,s,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Tf(i,s,l),i=i.sibling;i!==null;)Tf(i,s,l),i=i.sibling}var jt=null,nr=!1;function xi(i,s,l){for(l=l.child;l!==null;)uv(i,s,l),l=l.sibling}function uv(i,s,l){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(us,l)}catch{}switch(l.tag){case 5:Ht||Wo(l,s);case 6:var d=jt,m=nr;jt=null,xi(i,s,l),jt=d,nr=m,jt!==null&&(nr?(i=jt,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):jt.removeChild(l.stateNode));break;case 18:jt!==null&&(nr?(i=jt,l=l.stateNode,i.nodeType===8?Dd(i.parentNode,l):i.nodeType===1&&Dd(i,l),Xn(i)):Dd(jt,l.stateNode));break;case 4:d=jt,m=nr,jt=l.stateNode.containerInfo,nr=!0,xi(i,s,l),jt=d,nr=m;break;case 0:case 11:case 14:case 15:if(!Ht&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var v=m,I=v.destroy;v=v.tag,I!==void 0&&((v&2)!==0||(v&4)!==0)&&vf(l,s,I),m=m.next}while(m!==d)}xi(i,s,l);break;case 1:if(!Ht&&(Wo(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(k){lt(l,s,k)}xi(i,s,l);break;case 21:xi(i,s,l);break;case 22:l.mode&1?(Ht=(d=Ht)||l.memoizedState!==null,xi(i,s,l),Ht=d):xi(i,s,l);break;default:xi(i,s,l)}}function cv(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new $1),s.forEach(function(d){var m=Z1.bind(null,i,d);l.has(d)||(l.add(d),d.then(m,m))})}}function rr(i,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];try{var v=i,I=s,k=I;e:for(;k!==null;){switch(k.tag){case 5:jt=k.stateNode,nr=!1;break e;case 3:jt=k.stateNode.containerInfo,nr=!0;break e;case 4:jt=k.stateNode.containerInfo,nr=!0;break e}k=k.return}if(jt===null)throw Error(t(160));uv(v,I,m),jt=null,nr=!1;var M=m.alternate;M!==null&&(M.return=null),m.return=null}catch(K){lt(m,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)hv(s,i),s=s.sibling}function hv(i,s){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(rr(s,i),_r(i),d&4){try{pl(3,i,i.return),dc(3,i)}catch(ge){lt(i,i.return,ge)}try{pl(5,i,i.return)}catch(ge){lt(i,i.return,ge)}}break;case 1:rr(s,i),_r(i),d&512&&l!==null&&Wo(l,l.return);break;case 5:if(rr(s,i),_r(i),d&512&&l!==null&&Wo(l,l.return),i.flags&32){var m=i.stateNode;try{ui(m,"")}catch(ge){lt(i,i.return,ge)}}if(d&4&&(m=i.stateNode,m!=null)){var v=i.memoizedProps,I=l!==null?l.memoizedProps:v,k=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{k==="input"&&v.type==="radio"&&v.name!=null&&Pa(m,v),Va(k,I);var K=Va(k,v);for(I=0;I<M.length;I+=2){var te=M[I],re=M[I+1];te==="style"?Na(m,re):te==="dangerouslySetInnerHTML"?Ra(m,re):te==="children"?ui(m,re):z(m,te,re,K)}switch(k){case"input":xa(m,v);break;case"textarea":so(m,v);break;case"select":var ee=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var fe=v.value;fe!=null?Nr(m,!!v.multiple,fe,!1):ee!==!!v.multiple&&(v.defaultValue!=null?Nr(m,!!v.multiple,v.defaultValue,!0):Nr(m,!!v.multiple,v.multiple?[]:"",!1))}m[rl]=v}catch(ge){lt(i,i.return,ge)}}break;case 6:if(rr(s,i),_r(i),d&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,v=i.memoizedProps;try{m.nodeValue=v}catch(ge){lt(i,i.return,ge)}}break;case 3:if(rr(s,i),_r(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Xn(s.containerInfo)}catch(ge){lt(i,i.return,ge)}break;case 4:rr(s,i),_r(i);break;case 13:rr(s,i),_r(i),m=i.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(Sf=Qe())),d&4&&cv(i);break;case 22:if(te=l!==null&&l.memoizedState!==null,i.mode&1?(Ht=(K=Ht)||te,rr(s,i),Ht=K):rr(s,i),_r(i),d&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!te&&(i.mode&1)!==0)for(pe=i,te=i.child;te!==null;){for(re=pe=te;pe!==null;){switch(ee=pe,fe=ee.child,ee.tag){case 0:case 11:case 14:case 15:pl(4,ee,ee.return);break;case 1:Wo(ee,ee.return);var me=ee.stateNode;if(typeof me.componentWillUnmount=="function"){d=ee,l=ee.return;try{s=d,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ge){lt(d,l,ge)}}break;case 5:Wo(ee,ee.return);break;case 22:if(ee.memoizedState!==null){pv(re);continue}}fe!==null?(fe.return=ee,pe=fe):pv(re)}te=te.sibling}e:for(te=null,re=i;;){if(re.tag===5){if(te===null){te=re;try{m=re.stateNode,K?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(k=re.stateNode,M=re.memoizedProps.style,I=M!=null&&M.hasOwnProperty("display")?M.display:null,k.style.display=ka("display",I))}catch(ge){lt(i,i.return,ge)}}}else if(re.tag===6){if(te===null)try{re.stateNode.nodeValue=K?"":re.memoizedProps}catch(ge){lt(i,i.return,ge)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;te===re&&(te=null),re=re.return}te===re&&(te=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:rr(s,i),_r(i),d&4&&cv(i);break;case 21:break;default:rr(s,i),_r(i)}}function _r(i){var s=i.flags;if(s&2){try{e:{for(var l=i.return;l!==null;){if(av(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(ui(m,""),d.flags&=-33);var v=lv(i);Tf(i,v,m);break;case 3:case 4:var I=d.stateNode.containerInfo,k=lv(i);wf(i,k,I);break;default:throw Error(t(161))}}catch(M){lt(i,i.return,M)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function H1(i,s,l){pe=i,dv(i)}function dv(i,s,l){for(var d=(i.mode&1)!==0;pe!==null;){var m=pe,v=m.child;if(m.tag===22&&d){var I=m.memoizedState!==null||hc;if(!I){var k=m.alternate,M=k!==null&&k.memoizedState!==null||Ht;k=hc;var K=Ht;if(hc=I,(Ht=M)&&!K)for(pe=m;pe!==null;)I=pe,M=I.child,I.tag===22&&I.memoizedState!==null?mv(m):M!==null?(M.return=I,pe=M):mv(m);for(;v!==null;)pe=v,dv(v),v=v.sibling;pe=m,hc=k,Ht=K}fv(i)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,pe=v):fv(i)}}function fv(i){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ht||dc(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Ht)if(l===null)d.componentDidMount();else{var m=s.elementType===s.type?l.memoizedProps:tr(s.type,l.memoizedProps);d.componentDidUpdate(m,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&py(s,v,d);break;case 3:var I=s.updateQueue;if(I!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}py(s,I,l)}break;case 5:var k=s.stateNode;if(l===null&&s.flags&4){l=k;var M=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&l.focus();break;case"img":M.src&&(l.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var te=K.memoizedState;if(te!==null){var re=te.dehydrated;re!==null&&Xn(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||s.flags&512&&_f(s)}catch(ee){lt(s,s.return,ee)}}if(s===i){pe=null;break}if(l=s.sibling,l!==null){l.return=s.return,pe=l;break}pe=s.return}}function pv(i){for(;pe!==null;){var s=pe;if(s===i){pe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,pe=l;break}pe=s.return}}function mv(i){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{dc(4,s)}catch(M){lt(s,l,M)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var m=s.return;try{d.componentDidMount()}catch(M){lt(s,m,M)}}var v=s.return;try{_f(s)}catch(M){lt(s,v,M)}break;case 5:var I=s.return;try{_f(s)}catch(M){lt(s,I,M)}}}catch(M){lt(s,s.return,M)}if(s===i){pe=null;break}var k=s.sibling;if(k!==null){k.return=s.return,pe=k;break}pe=s.return}}var q1=Math.ceil,fc=J.ReactCurrentDispatcher,Ef=J.ReactCurrentOwner,On=J.ReactCurrentBatchConfig,ze=0,Ct=null,mt=null,Ot=0,In=0,Ho=Ti(0),It=0,ml=null,Is=0,pc=0,If=0,gl=null,un=null,Sf=0,qo=1/0,qr=null,mc=!1,Pf=null,Ai=null,gc=!1,Ci=null,yc=0,yl=0,xf=null,vc=-1,_c=0;function en(){return(ze&6)!==0?Qe():vc!==-1?vc:vc=Qe()}function Ri(i){return(i.mode&1)===0?1:(ze&2)!==0&&Ot!==0?Ot&-Ot:R1.transition!==null?(_c===0&&(_c=hs()),_c):(i=je,i!==0||(i=window.event,i=i===void 0?16:Ha(i.type)),i)}function ir(i,s,l,d){if(50<yl)throw yl=0,xf=null,Error(t(185));fi(i,l,d),((ze&2)===0||i!==Ct)&&(i===Ct&&((ze&2)===0&&(pc|=l),It===4&&ki(i,Ot)),cn(i,d),l===1&&ze===0&&(s.mode&1)===0&&(qo=Qe()+500,Ku&&Ii()))}function cn(i,s){var l=i.callbackNode;Vr(i,s);var d=cs(i,i===Ct?Ot:0);if(d===0)l!==null&&Ua(l),i.callbackNode=null,i.callbackPriority=0;else if(s=d&-d,i.callbackPriority!==s){if(l!=null&&Ua(l),s===1)i.tag===0?C1(yv.bind(null,i)):ny(yv.bind(null,i)),S1(function(){(ze&6)===0&&Ii()}),l=null;else{switch(mi(d)){case 1:l=ls;break;case 4:l=ci;break;case 16:l=kn;break;case 536870912:l=_u;break;default:l=kn}l=Pv(l,gv.bind(null,i))}i.callbackPriority=s,i.callbackNode=l}}function gv(i,s){if(vc=-1,_c=0,(ze&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Ko()&&i.callbackNode!==l)return null;var d=cs(i,i===Ct?Ot:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||s)s=wc(i,d);else{s=d;var m=ze;ze|=2;var v=_v();(Ct!==i||Ot!==s)&&(qr=null,qo=Qe()+500,Ps(i,s));do try{Q1();break}catch(k){vv(i,k)}while(!0);$d(),fc.current=v,ze=m,mt!==null?s=0:(Ct=null,Ot=0,s=It)}if(s!==0){if(s===2&&(m=vn(i),m!==0&&(d=m,s=Af(i,m))),s===1)throw l=ml,Ps(i,0),ki(i,d),cn(i,Qe()),l;if(s===6)ki(i,d);else{if(m=i.current.alternate,(d&30)===0&&!K1(m)&&(s=wc(i,d),s===2&&(v=vn(i),v!==0&&(d=v,s=Af(i,v))),s===1))throw l=ml,Ps(i,0),ki(i,d),cn(i,Qe()),l;switch(i.finishedWork=m,i.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:xs(i,un,qr);break;case 3:if(ki(i,d),(d&130023424)===d&&(s=Sf+500-Qe(),10<s)){if(cs(i,0)!==0)break;if(m=i.suspendedLanes,(m&d)!==d){en(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=bd(xs.bind(null,i,un,qr),s);break}xs(i,un,qr);break;case 4:if(ki(i,d),(d&4194240)===d)break;for(s=i.eventTimes,m=-1;0<d;){var I=31-Xt(d);v=1<<I,I=s[I],I>m&&(m=I),d&=~v}if(d=m,d=Qe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*q1(d/1960))-d,10<d){i.timeoutHandle=bd(xs.bind(null,i,un,qr),d);break}xs(i,un,qr);break;case 5:xs(i,un,qr);break;default:throw Error(t(329))}}}return cn(i,Qe()),i.callbackNode===l?gv.bind(null,i):null}function Af(i,s){var l=gl;return i.current.memoizedState.isDehydrated&&(Ps(i,s).flags|=256),i=wc(i,s),i!==2&&(s=un,un=l,s!==null&&Cf(s)),i}function Cf(i){un===null?un=i:un.push.apply(un,i)}function K1(i){for(var s=i;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var m=l[d],v=m.getSnapshot;m=m.value;try{if(!Zn(v(),m))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ki(i,s){for(s&=~If,s&=~pc,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var l=31-Xt(s),d=1<<l;i[l]=-1,s&=~d}}function yv(i){if((ze&6)!==0)throw Error(t(327));Ko();var s=cs(i,0);if((s&1)===0)return cn(i,Qe()),null;var l=wc(i,s);if(i.tag!==0&&l===2){var d=vn(i);d!==0&&(s=d,l=Af(i,d))}if(l===1)throw l=ml,Ps(i,0),ki(i,s),cn(i,Qe()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,xs(i,un,qr),cn(i,Qe()),null}function Rf(i,s){var l=ze;ze|=1;try{return i(s)}finally{ze=l,ze===0&&(qo=Qe()+500,Ku&&Ii())}}function Ss(i){Ci!==null&&Ci.tag===0&&(ze&6)===0&&Ko();var s=ze;ze|=1;var l=On.transition,d=je;try{if(On.transition=null,je=1,i)return i()}finally{je=d,On.transition=l,ze=s,(ze&6)===0&&Ii()}}function kf(){In=Ho.current,et(Ho)}function Ps(i,s){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,I1(l)),mt!==null)for(l=mt.return;l!==null;){var d=l;switch(Ld(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Hu();break;case 3:zo(),et(on),et(zt),Xd();break;case 5:Qd(d);break;case 4:zo();break;case 13:et(it);break;case 19:et(it);break;case 10:Wd(d.type._context);break;case 22:case 23:kf()}l=l.return}if(Ct=i,mt=i=Ni(i.current,null),Ot=In=s,It=0,ml=null,If=pc=Is=0,un=gl=null,ws!==null){for(s=0;s<ws.length;s++)if(l=ws[s],d=l.interleaved,d!==null){l.interleaved=null;var m=d.next,v=l.pending;if(v!==null){var I=v.next;v.next=m,d.next=I}l.pending=d}ws=null}return i}function vv(i,s){do{var l=mt;try{if($d(),rc.current=ac,ic){for(var d=st.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}ic=!1}if(Es=0,At=Et=st=null,ul=!1,cl=0,Ef.current=null,l===null||l.return===null){It=1,ml=s,mt=null;break}e:{var v=i,I=l.return,k=l,M=s;if(s=Ot,k.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var K=M,te=k,re=te.tag;if((te.mode&1)===0&&(re===0||re===11||re===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var fe=$y(I);if(fe!==null){fe.flags&=-257,Wy(fe,I,k,v,s),fe.mode&1&&zy(v,K,s),s=fe,M=K;var me=s.updateQueue;if(me===null){var ge=new Set;ge.add(M),s.updateQueue=ge}else me.add(M);break e}else{if((s&1)===0){zy(v,K,s),Nf();break e}M=Error(t(426))}}else if(nt&&k.mode&1){var ht=$y(I);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Wy(ht,I,k,v,s),Bd($o(M,k));break e}}v=M=$o(M,k),It!==4&&(It=2),gl===null?gl=[v]:gl.push(v),v=I;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var W=Uy(v,M,s);fy(v,W);break e;case 1:k=M;var L=v.type,H=v.stateNode;if((v.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ai===null||!Ai.has(H)))){v.flags|=65536,s&=-s,v.lanes|=s;var ae=By(v,k,s);fy(v,ae);break e}}v=v.return}while(v!==null)}Tv(l)}catch(ve){s=ve,mt===l&&l!==null&&(mt=l=l.return);continue}break}while(!0)}function _v(){var i=fc.current;return fc.current=ac,i===null?ac:i}function Nf(){(It===0||It===3||It===2)&&(It=4),Ct===null||(Is&268435455)===0&&(pc&268435455)===0||ki(Ct,Ot)}function wc(i,s){var l=ze;ze|=2;var d=_v();(Ct!==i||Ot!==s)&&(qr=null,Ps(i,s));do try{G1();break}catch(m){vv(i,m)}while(!0);if($d(),ze=l,fc.current=d,mt!==null)throw Error(t(261));return Ct=null,Ot=0,It}function G1(){for(;mt!==null;)wv(mt)}function Q1(){for(;mt!==null&&!yu();)wv(mt)}function wv(i){var s=Sv(i.alternate,i,In);i.memoizedProps=i.pendingProps,s===null?Tv(i):mt=s,Ef.current=null}function Tv(i){var s=i;do{var l=s.alternate;if(i=s.return,(s.flags&32768)===0){if(l=B1(l,s,In),l!==null){mt=l;return}}else{if(l=z1(l,s),l!==null){l.flags&=32767,mt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{It=6,mt=null;return}}if(s=s.sibling,s!==null){mt=s;return}mt=s=i}while(s!==null);It===0&&(It=5)}function xs(i,s,l){var d=je,m=On.transition;try{On.transition=null,je=1,Y1(i,s,l,d)}finally{On.transition=m,je=d}return null}function Y1(i,s,l,d){do Ko();while(Ci!==null);if((ze&6)!==0)throw Error(t(327));l=i.finishedWork;var m=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var v=l.lanes|l.childLanes;if(Ge(i,v),i===Ct&&(mt=Ct=null,Ot=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||gc||(gc=!0,Pv(kn,function(){return Ko(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=On.transition,On.transition=null;var I=je;je=1;var k=ze;ze|=4,Ef.current=null,W1(i,l),hv(l,i),g1(kd),yi=!!Rd,kd=Rd=null,i.current=l,H1(l),fd(),ze=k,je=I,On.transition=v}else i.current=l;if(gc&&(gc=!1,Ci=i,yc=m),v=i.pendingLanes,v===0&&(Ai=null),wu(l.stateNode),cn(i,Qe()),s!==null)for(d=i.onRecoverableError,l=0;l<s.length;l++)m=s[l],d(m.value,{componentStack:m.stack,digest:m.digest});if(mc)throw mc=!1,i=Pf,Pf=null,i;return(yc&1)!==0&&i.tag!==0&&Ko(),v=i.pendingLanes,(v&1)!==0?i===xf?yl++:(yl=0,xf=i):yl=0,Ii(),null}function Ko(){if(Ci!==null){var i=mi(yc),s=On.transition,l=je;try{if(On.transition=null,je=16>i?16:i,Ci===null)var d=!1;else{if(i=Ci,Ci=null,yc=0,(ze&6)!==0)throw Error(t(331));var m=ze;for(ze|=4,pe=i.current;pe!==null;){var v=pe,I=v.child;if((pe.flags&16)!==0){var k=v.deletions;if(k!==null){for(var M=0;M<k.length;M++){var K=k[M];for(pe=K;pe!==null;){var te=pe;switch(te.tag){case 0:case 11:case 15:pl(8,te,v)}var re=te.child;if(re!==null)re.return=te,pe=re;else for(;pe!==null;){te=pe;var ee=te.sibling,fe=te.return;if(ov(te),te===K){pe=null;break}if(ee!==null){ee.return=fe,pe=ee;break}pe=fe}}}var me=v.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var ht=ge.sibling;ge.sibling=null,ge=ht}while(ge!==null)}}pe=v}}if((v.subtreeFlags&2064)!==0&&I!==null)I.return=v,pe=I;else e:for(;pe!==null;){if(v=pe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:pl(9,v,v.return)}var W=v.sibling;if(W!==null){W.return=v.return,pe=W;break e}pe=v.return}}var L=i.current;for(pe=L;pe!==null;){I=pe;var H=I.child;if((I.subtreeFlags&2064)!==0&&H!==null)H.return=I,pe=H;else e:for(I=L;pe!==null;){if(k=pe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:dc(9,k)}}catch(ve){lt(k,k.return,ve)}if(k===I){pe=null;break e}var ae=k.sibling;if(ae!==null){ae.return=k.return,pe=ae;break e}pe=k.return}}if(ze=m,Ii(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(us,i)}catch{}d=!0}return d}finally{je=l,On.transition=s}}return!1}function Ev(i,s,l){s=$o(l,s),s=Uy(i,s,1),i=Pi(i,s,1),s=en(),i!==null&&(fi(i,1,s),cn(i,s))}function lt(i,s,l){if(i.tag===3)Ev(i,i,l);else for(;s!==null;){if(s.tag===3){Ev(s,i,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ai===null||!Ai.has(d))){i=$o(l,i),i=By(s,i,1),s=Pi(s,i,1),i=en(),s!==null&&(fi(s,1,i),cn(s,i));break}}s=s.return}}function X1(i,s,l){var d=i.pingCache;d!==null&&d.delete(s),s=en(),i.pingedLanes|=i.suspendedLanes&l,Ct===i&&(Ot&l)===l&&(It===4||It===3&&(Ot&130023424)===Ot&&500>Qe()-Sf?Ps(i,0):If|=l),cn(i,s)}function Iv(i,s){s===0&&((i.mode&1)===0?s=1:(s=go,go<<=1,(go&130023424)===0&&(go=4194304)));var l=en();i=$r(i,s),i!==null&&(fi(i,s,l),cn(i,l))}function J1(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),Iv(i,l)}function Z1(i,s){var l=0;switch(i.tag){case 13:var d=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),Iv(i,l)}var Sv;Sv=function(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps||on.current)ln=!0;else{if((i.lanes&l)===0&&(s.flags&128)===0)return ln=!1,U1(i,s,l);ln=(i.flags&131072)!==0}else ln=!1,nt&&(s.flags&1048576)!==0&&ry(s,Qu,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;cc(i,s),i=s.pendingProps;var m=Mo(s,zt.current);Bo(s,l),m=ef(null,s,d,i,m,l);var v=tf();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,an(d)?(v=!0,qu(s)):v=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Kd(s),m.updater=lc,s.stateNode=m,m._reactInternals=s,lf(s,d,i,l),s=df(null,s,d,!0,v,l)):(s.tag=0,nt&&v&&Od(s),Zt(null,s,m,l),s=s.child),s;case 16:d=s.elementType;e:{switch(cc(i,s),i=s.pendingProps,m=d._init,d=m(d._payload),s.type=d,m=s.tag=tP(d),i=tr(d,i),m){case 0:s=hf(null,s,d,i,l);break e;case 1:s=Yy(null,s,d,i,l);break e;case 11:s=Hy(null,s,d,i,l);break e;case 14:s=qy(null,s,d,tr(d.type,i),l);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:tr(d,m),hf(i,s,d,m,l);case 1:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:tr(d,m),Yy(i,s,d,m,l);case 3:e:{if(Xy(s),i===null)throw Error(t(387));d=s.pendingProps,v=s.memoizedState,m=v.element,dy(i,s),tc(s,d,null,l);var I=s.memoizedState;if(d=I.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){m=$o(Error(t(423)),s),s=Jy(i,s,d,l,m);break e}else if(d!==m){m=$o(Error(t(424)),s),s=Jy(i,s,d,l,m);break e}else for(En=wi(s.stateNode.containerInfo.firstChild),Tn=s,nt=!0,er=null,l=cy(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Lo(),d===m){s=Hr(i,s,l);break e}Zt(i,s,d,l)}s=s.child}return s;case 5:return my(s),i===null&&Ud(s),d=s.type,m=s.pendingProps,v=i!==null?i.memoizedProps:null,I=m.children,Nd(d,m)?I=null:v!==null&&Nd(d,v)&&(s.flags|=32),Qy(i,s),Zt(i,s,I,l),s.child;case 6:return i===null&&Ud(s),null;case 13:return Zy(i,s,l);case 4:return Gd(s,s.stateNode.containerInfo),d=s.pendingProps,i===null?s.child=Fo(s,null,d,l):Zt(i,s,d,l),s.child;case 11:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:tr(d,m),Hy(i,s,d,m,l);case 7:return Zt(i,s,s.pendingProps,l),s.child;case 8:return Zt(i,s,s.pendingProps.children,l),s.child;case 12:return Zt(i,s,s.pendingProps.children,l),s.child;case 10:e:{if(d=s.type._context,m=s.pendingProps,v=s.memoizedProps,I=m.value,Ye(Ju,d._currentValue),d._currentValue=I,v!==null)if(Zn(v.value,I)){if(v.children===m.children&&!on.current){s=Hr(i,s,l);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var k=v.dependencies;if(k!==null){I=v.child;for(var M=k.firstContext;M!==null;){if(M.context===d){if(v.tag===1){M=Wr(-1,l&-l),M.tag=2;var K=v.updateQueue;if(K!==null){K=K.shared;var te=K.pending;te===null?M.next=M:(M.next=te.next,te.next=M),K.pending=M}}v.lanes|=l,M=v.alternate,M!==null&&(M.lanes|=l),Hd(v.return,l,s),k.lanes|=l;break}M=M.next}}else if(v.tag===10)I=v.type===s.type?null:v.child;else if(v.tag===18){if(I=v.return,I===null)throw Error(t(341));I.lanes|=l,k=I.alternate,k!==null&&(k.lanes|=l),Hd(I,l,s),I=v.sibling}else I=v.child;if(I!==null)I.return=v;else for(I=v;I!==null;){if(I===s){I=null;break}if(v=I.sibling,v!==null){v.return=I.return,I=v;break}I=I.return}v=I}Zt(i,s,m.children,l),s=s.child}return s;case 9:return m=s.type,d=s.pendingProps.children,Bo(s,l),m=Mn(m),d=d(m),s.flags|=1,Zt(i,s,d,l),s.child;case 14:return d=s.type,m=tr(d,s.pendingProps),m=tr(d.type,m),qy(i,s,d,m,l);case 15:return Ky(i,s,s.type,s.pendingProps,l);case 17:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:tr(d,m),cc(i,s),s.tag=1,an(d)?(i=!0,qu(s)):i=!1,Bo(s,l),Ly(s,d,m),lf(s,d,m,l),df(null,s,d,!0,i,l);case 19:return tv(i,s,l);case 22:return Gy(i,s,l)}throw Error(t(156,s.tag))};function Pv(i,s){return po(i,s)}function eP(i,s,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(i,s,l,d){return new eP(i,s,l,d)}function bf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function tP(i){if(typeof i=="function")return bf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===be)return 14}return 2}function Ni(i,s){var l=i.alternate;return l===null?(l=Ln(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Tc(i,s,l,d,m,v){var I=2;if(d=i,typeof i=="function")bf(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case b:return As(l.children,m,v,s);case x:I=8,m|=8;break;case A:return i=Ln(12,l,s,m|2),i.elementType=A,i.lanes=v,i;case R:return i=Ln(13,l,s,m),i.elementType=R,i.lanes=v,i;case se:return i=Ln(19,l,s,m),i.elementType=se,i.lanes=v,i;case Ae:return Ec(l,m,v,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:I=10;break e;case O:I=9;break e;case F:I=11;break e;case be:I=14;break e;case xe:I=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=Ln(I,l,s,m),s.elementType=i,s.type=d,s.lanes=v,s}function As(i,s,l,d){return i=Ln(7,i,d,s),i.lanes=l,i}function Ec(i,s,l,d){return i=Ln(22,i,d,s),i.elementType=Ae,i.lanes=l,i.stateNode={isHidden:!1},i}function Df(i,s,l){return i=Ln(6,i,null,s),i.lanes=l,i}function Vf(i,s,l){return s=Ln(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function nP(i,s,l,d,m){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=di(0),this.expirationTimes=di(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Mf(i,s,l,d,m,v,I,k,M){return i=new nP(i,s,l,k,M),s===1?(s=1,v===!0&&(s|=8)):s=0,v=Ln(3,null,null,s),i.current=v,v.stateNode=i,v.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kd(v),i}function rP(i,s,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:d==null?null:""+d,children:i,containerInfo:s,implementation:l}}function xv(i){if(!i)return Ei;i=i._reactInternals;e:{if(qn(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(an(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(an(l))return ey(i,l,s)}return s}function Av(i,s,l,d,m,v,I,k,M){return i=Mf(l,d,!0,i,m,v,I,k,M),i.context=xv(null),l=i.current,d=en(),m=Ri(l),v=Wr(d,m),v.callback=s??null,Pi(l,v,m),i.current.lanes=m,fi(i,m,d),cn(i,d),i}function Ic(i,s,l,d){var m=s.current,v=en(),I=Ri(m);return l=xv(l),s.context===null?s.context=l:s.pendingContext=l,s=Wr(v,I),s.payload={element:i},d=d===void 0?null:d,d!==null&&(s.callback=d),i=Pi(m,s,I),i!==null&&(ir(i,m,I,v),ec(i,m,I)),I}function Sc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Cv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function jf(i,s){Cv(i,s),(i=i.alternate)&&Cv(i,s)}function iP(){return null}var Rv=typeof reportError=="function"?reportError:function(i){console.error(i)};function Of(i){this._internalRoot=i}Pc.prototype.render=Of.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));Ic(i,s,null,null)},Pc.prototype.unmount=Of.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Ss(function(){Ic(null,i,null,null)}),s[Fr]=null}};function Pc(i){this._internalRoot=i}Pc.prototype.unstable_scheduleHydration=function(i){if(i){var s=Pu();i={blockedOn:null,target:i,priority:s};for(var l=0;l<dr.length&&s!==0&&s<dr[l].priority;l++);dr.splice(l,0,i),l===0&&Cu(i)}};function Lf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function xc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function kv(){}function sP(i,s,l,d,m){if(m){if(typeof d=="function"){var v=d;d=function(){var K=Sc(I);v.call(K)}}var I=Av(s,d,i,0,null,!1,!1,"",kv);return i._reactRootContainer=I,i[Fr]=I.current,tl(i.nodeType===8?i.parentNode:i),Ss(),I}for(;m=i.lastChild;)i.removeChild(m);if(typeof d=="function"){var k=d;d=function(){var K=Sc(M);k.call(K)}}var M=Mf(i,0,!1,null,null,!1,!1,"",kv);return i._reactRootContainer=M,i[Fr]=M.current,tl(i.nodeType===8?i.parentNode:i),Ss(function(){Ic(s,M,l,d)}),M}function Ac(i,s,l,d,m){var v=l._reactRootContainer;if(v){var I=v;if(typeof m=="function"){var k=m;m=function(){var M=Sc(I);k.call(M)}}Ic(s,I,i,m)}else I=sP(l,s,i,m,d);return Sc(I)}Iu=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var l=hi(s.pendingLanes);l!==0&&(pi(s,l|1),cn(s,Qe()),(ze&6)===0&&(qo=Qe()+500,Ii()))}break;case 13:Ss(function(){var d=$r(i,1);if(d!==null){var m=en();ir(d,i,1,m)}}),jf(i,1)}},yo=function(i){if(i.tag===13){var s=$r(i,134217728);if(s!==null){var l=en();ir(s,i,134217728,l)}jf(i,134217728)}},Su=function(i){if(i.tag===13){var s=Ri(i),l=$r(i,s);if(l!==null){var d=en();ir(l,i,s,d)}jf(i,s)}},Pu=function(){return je},xu=function(i,s){var l=je;try{return je=i,s()}finally{je=l}},ao=function(i,s,l){switch(s){case"input":if(xa(i,l),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==i&&d.form===i.form){var m=Wu(d);if(!m)throw Error(t(90));Zi(d),xa(d,m)}}}break;case"textarea":so(i,l);break;case"select":s=l.value,s!=null&&Nr(i,!!l.multiple,s,!1)}},is=Rf,ja=Ss;var oP={usingClientEntryPoint:!1,Events:[il,Do,Wu,cr,Ma,Rf]},vl={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aP={bundleType:vl.bundleType,version:vl.version,rendererPackageName:vl.rendererPackageName,rendererConfig:vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Fa(i),i===null?null:i.stateNode},findFiberByHostInstance:vl.findFiberByHostInstance||iP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{us=Cc.inject(aP),yn=Cc}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oP,hn.createPortal=function(i,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lf(s))throw Error(t(200));return rP(i,s,null,l)},hn.createRoot=function(i,s){if(!Lf(i))throw Error(t(299));var l=!1,d="",m=Rv;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=Mf(i,1,!1,null,null,l,!1,d,m),i[Fr]=s.current,tl(i.nodeType===8?i.parentNode:i),new Of(s)},hn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Fa(s),i=i===null?null:i.stateNode,i},hn.flushSync=function(i){return Ss(i)},hn.hydrate=function(i,s,l){if(!xc(s))throw Error(t(200));return Ac(null,i,s,!0,l)},hn.hydrateRoot=function(i,s,l){if(!Lf(i))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,m=!1,v="",I=Rv;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),s=Av(s,null,i,1,l??null,m,!1,v,I),i[Fr]=s.current,tl(i),d)for(i=0;i<d.length;i++)l=d[i],m=l._getVersion,m=m(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,m]:s.mutableSourceEagerHydrationData.push(l,m);return new Pc(s)},hn.render=function(i,s,l){if(!xc(s))throw Error(t(200));return Ac(null,i,s,!1,l)},hn.unmountComponentAtNode=function(i){if(!xc(i))throw Error(t(40));return i._reactRootContainer?(Ss(function(){Ac(null,null,i,!1,function(){i._reactRootContainer=null,i[Fr]=null})}),!0):!1},hn.unstable_batchedUpdates=Rf,hn.unstable_renderSubtreeIntoContainer=function(i,s,l,d){if(!xc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Ac(i,s,l,!1,d)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var Lv;function Nw(){if(Lv)return Bf.exports;Lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bf.exports=yP(),Bf.exports}var Fv;function vP(){if(Fv)return Rc;Fv=1;var n=Nw();return Rc.createRoot=n.createRoot,Rc.hydrateRoot=n.hydrateRoot,Rc}var _P=vP();Nw();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zc(){return Zc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zc.apply(this,arguments)}var Fi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Fi||(Fi={}));const Uv="popstate";function wP(n){n===void 0&&(n={});function e(r,o){let{pathname:a,search:u,hash:h}=r.location;return _p("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:Dw(o)}return EP(e,t,null,n)}function mn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bw(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TP(){return Math.random().toString(36).substr(2,8)}function Bv(n,e){return{usr:n.state,key:n.key,idx:e}}function _p(n,e,t,r){return t===void 0&&(t=null),Zc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?bh(e):e,{state:t,key:e&&e.key||r||TP()})}function Dw(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function EP(n,e,t,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,u=o.history,h=Fi.Pop,f=null,p=_();p==null&&(p=0,u.replaceState(Zc({},u.state,{idx:p}),""));function _(){return(u.state||{idx:null}).idx}function w(){h=Fi.Pop;let C=_(),G=C==null?null:C-p;p=C,f&&f({action:h,location:D.location,delta:G})}function E(C,G){h=Fi.Push;let Q=_p(D.location,C,G);p=_()+1;let z=Bv(Q,p),J=D.createHref(Q);try{u.pushState(z,"",J)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(J)}a&&f&&f({action:h,location:D.location,delta:1})}function S(C,G){h=Fi.Replace;let Q=_p(D.location,C,G);p=_();let z=Bv(Q,p),J=D.createHref(Q);u.replaceState(z,"",J),a&&f&&f({action:h,location:D.location,delta:0})}function N(C){let G=o.location.origin!=="null"?o.location.origin:o.location.href,Q=typeof C=="string"?C:Dw(C);return Q=Q.replace(/ $/,"%20"),mn(G,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,G)}let D={get action(){return h},get location(){return n(o,u)},listen(C){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Uv,w),f=C,()=>{o.removeEventListener(Uv,w),f=null}},createHref(C){return e(o,C)},createURL:N,encodeLocation(C){let G=N(C);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:E,replace:S,go(C){return u.go(C)}};return D}var zv;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(zv||(zv={}));function IP(n,e,t){return t===void 0&&(t="/"),SP(n,e,t)}function SP(n,e,t,r){let o=typeof e=="string"?bh(e):e,a=jw(o.pathname||"/",t);if(a==null)return null;let u=Vw(n);PP(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=OP(a);h=VP(u[f],p)}return h}function Vw(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let o=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(mn(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let p=na([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(mn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Vw(a.children,e,_,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:bP(p,a.index),routesMeta:_})};return n.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))o(a,u);else for(let f of Mw(a.path))o(a,u,f)}),e}function Mw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let u=Mw(r.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function PP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:DP(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const xP=/^:[\w-]+$/,AP=3,CP=2,RP=1,kP=10,NP=-2,$v=n=>n==="*";function bP(n,e){let t=n.split("/"),r=t.length;return t.some($v)&&(r+=NP),e&&(r+=CP),t.filter(o=>!$v(o)).reduce((o,a)=>o+(xP.test(a)?AP:a===""?RP:kP),r)}function DP(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function VP(n,e,t){let{routesMeta:r}=n,o={},a="/",u=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",w=MP({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},_),E=f.route;if(!w)return null;Object.assign(o,w.params),u.push({params:o,pathname:na([a,w.pathname]),pathnameBase:LP(na([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=na([a,w.pathnameBase]))}return u}function MP(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=jP(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:r.reduce((p,_,w)=>{let{paramName:E,isOptional:S}=_;if(E==="*"){let D=h[w]||"";u=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const N=h[w];return S&&!N?p[E]=void 0:p[E]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:n}}function jP(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),bw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function OP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function jw(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const na=n=>n.join("/").replace(/\/\/+/g,"/"),LP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/");function FP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Ow=["post","put","patch","delete"];new Set(Ow);const UP=["get",...Ow];new Set(UP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eh(){return eh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eh.apply(this,arguments)}const BP=B.createContext(null),zP=B.createContext(null),Lw=B.createContext(null),Dh=B.createContext(null),Vh=B.createContext({outlet:null,matches:[],isDataRoute:!1}),Fw=B.createContext(null);function am(){return B.useContext(Dh)!=null}function $P(){return am()||mn(!1),B.useContext(Dh).location}function WP(n,e){return HP(n,e)}function HP(n,e,t,r){am()||mn(!1);let{navigator:o}=B.useContext(Lw),{matches:a}=B.useContext(Vh),u=a[a.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let p=$P(),_;if(e){var w;let C=typeof e=="string"?bh(e):e;f==="/"||(w=C.pathname)!=null&&w.startsWith(f)||mn(!1),_=C}else _=p;let E=_.pathname||"/",S=E;if(f!=="/"){let C=f.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(C.length).join("/")}let N=IP(n,{pathname:S}),D=YP(N&&N.map(C=>Object.assign({},C,{params:Object.assign({},h,C.params),pathname:na([f,o.encodeLocation?o.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:na([f,o.encodeLocation?o.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,t,r);return e&&D?B.createElement(Dh.Provider,{value:{location:eh({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Fi.Pop}},D):D}function qP(){let n=ex(),e=FP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:o},t):null,null)}const KP=B.createElement(qP,null);class GP extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?B.createElement(Vh.Provider,{value:this.props.routeContext},B.createElement(Fw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QP(n){let{routeContext:e,match:t,children:r}=n,o=B.useContext(BP);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(Vh.Provider,{value:e},r)}function YP(n,e,t,r){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,h=(o=t)==null?void 0:o.errors;if(h!=null){let _=u.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);_>=0||mn(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,p=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let w=u[_];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=_),w.route.id){let{loaderData:E,errors:S}=t,N=w.route.loader&&E[w.route.id]===void 0&&(!S||S[w.route.id]===void 0);if(w.route.lazy||N){f=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((_,w,E)=>{let S,N=!1,D=null,C=null;t&&(S=h&&w.route.id?h[w.route.id]:void 0,D=w.route.errorElement||KP,f&&(p<0&&E===0?(tx("route-fallback"),N=!0,C=null):p===E&&(N=!0,C=w.route.hydrateFallbackElement||null)));let G=e.concat(u.slice(0,E+1)),Q=()=>{let z;return S?z=D:N?z=C:w.route.Component?z=B.createElement(w.route.Component,null):w.route.element?z=w.route.element:z=_,B.createElement(QP,{match:w,routeContext:{outlet:_,matches:G,isDataRoute:t!=null},children:z})};return t&&(w.route.ErrorBoundary||w.route.errorElement||E===0)?B.createElement(GP,{location:t.location,revalidation:t.revalidation,component:D,error:S,children:Q(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):Q()},null)}var Uw=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Uw||{});function XP(n){let e=B.useContext(zP);return e||mn(!1),e}function JP(n){let e=B.useContext(Vh);return e||mn(!1),e}function ZP(n){let e=JP(),t=e.matches[e.matches.length-1];return t.route.id||mn(!1),t.route.id}function ex(){var n;let e=B.useContext(Fw),t=XP(Uw.UseRouteError),r=ZP();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}const Wv={};function tx(n,e,t){Wv[n]||(Wv[n]=!0)}function nx(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function zc(n){mn(!1)}function rx(n){let{basename:e="/",children:t=null,location:r,navigationType:o=Fi.Pop,navigator:a,static:u=!1,future:h}=n;am()&&mn(!1);let f=e.replace(/^\/*/,"/"),p=B.useMemo(()=>({basename:f,navigator:a,static:u,future:eh({v7_relativeSplatPath:!1},h)}),[f,h,a,u]);typeof r=="string"&&(r=bh(r));let{pathname:_="/",search:w="",hash:E="",state:S=null,key:N="default"}=r,D=B.useMemo(()=>{let C=jw(_,f);return C==null?null:{location:{pathname:C,search:w,hash:E,state:S,key:N},navigationType:o}},[f,_,w,E,S,N,o]);return D==null?null:B.createElement(Lw.Provider,{value:p},B.createElement(Dh.Provider,{children:t,value:D}))}function ix(n){let{children:e,location:t}=n;return WP(wp(e),t)}new Promise(()=>{});function wp(n,e){e===void 0&&(e=[]);let t=[];return B.Children.forEach(n,(r,o)=>{if(!B.isValidElement(r))return;let a=[...e,o];if(r.type===B.Fragment){t.push.apply(t,wp(r.props.children,a));return}r.type!==zc&&mn(!1),!r.props.index||!r.props.children||mn(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=wp(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const sx="6";try{window.__reactRouterVersion=sx}catch{}const ox="startTransition",Hv=pP[ox];function ax(n){let{basename:e,children:t,future:r,window:o}=n,a=B.useRef();a.current==null&&(a.current=wP({window:o,v5Compat:!0}));let u=a.current,[h,f]=B.useState({action:u.action,location:u.location}),{v7_startTransition:p}=r||{},_=B.useCallback(w=>{p&&Hv?Hv(()=>f(w)):f(w)},[f,p]);return B.useLayoutEffect(()=>u.listen(_),[u,_]),B.useEffect(()=>nx(r),[r]),B.createElement(rx,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:u,future:r})}var qv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(qv||(qv={}));var Kv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Kv||(Kv={}));var Gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},lx=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],h=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,h=u?n[o+1]:0,f=o+2<n.length,p=f?n[o+2]:0,_=a>>2,w=(a&3)<<4|h>>4;let E=(h&15)<<2|p>>6,S=p&63;f||(S=64,u||(E=64)),r.push(t[_],t[w],t[E],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Bw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):lx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const p=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||h==null||p==null||w==null)throw new ux;const E=a<<2|h>>4;if(r.push(E),p!==64){const S=h<<4&240|p>>2;if(r.push(S),w!==64){const N=p<<6&192|w;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ux extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cx=function(n){const e=Bw(n);return zw.encodeByteArray(e,!0)},th=function(n){return cx(n).replace(/\./g,"")},$w=function(n){try{return zw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=()=>hx().__FIREBASE_DEFAULTS__,fx=()=>{if(typeof process>"u"||typeof Gv>"u")return;const n=Gv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},px=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$w(n[1]);return e&&JSON.parse(e)},Mh=()=>{try{return dx()||fx()||px()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ww=n=>{var e,t;return(t=(e=Mh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Hw=n=>{const e=Ww(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},qw=()=>{var n;return(n=Mh())===null||n===void 0?void 0:n.config},Kw=n=>{var e;return(e=Mh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[th(JSON.stringify(t)),th(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function yx(){var n;const e=(n=Mh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _x(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wx(){const n=Yt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Tx(){return!yx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yw(){try{return typeof indexedDB=="object"}catch{return!1}}function Xw(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function Ex(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="FirebaseError";class $n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Ix,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}}class Qs{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?Sx(a,r):"Error",h=`${this.serviceName}: ${u} (${o}).`;return new $n(o,h,r)}}function Sx(n,e){return n.replace(Px,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Px=/\{\$([^}]+)}/g;function xx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Us(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],u=e[o];if(Qv(a)&&Qv(u)){if(!Us(a,u))return!1}else if(a!==u)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Qv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Al(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Ax(n,e){const t=new Cx(n,e);return t.subscribe.bind(t)}class Cx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Rx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Wf),o.error===void 0&&(o.error=Wf),o.complete===void 0&&(o.complete=Wf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=1e3,Nx=2,bx=14400*1e3,Dx=.5;function Yv(n,e=kx,t=Nx){const r=e*Math.pow(t,n),o=Math.round(Dx*r*(Math.random()-.5)*2);return Math.min(bx,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n){return n&&n._delegate?n._delegate:n}class Bn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new mx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jx(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&u.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Mx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mx(n){return n===ks?void 0:n}function jx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const Lx={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Fx=Oe.INFO,Ux={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},Bx=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=Ux[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jh{constructor(e){this.name=e,this._logLevel=Fx,this._logHandler=Bx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Lx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const zx=(n,e)=>e.some(t=>n instanceof t);let Xv,Jv;function $x(){return Xv||(Xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wx(){return Jv||(Jv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jw=new WeakMap,Tp=new WeakMap,Zw=new WeakMap,Hf=new WeakMap,lm=new WeakMap;function Hx(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Bi(n.result)),o()},u=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Jw.set(t,n)}).catch(()=>{}),lm.set(e,n),e}function qx(n){if(Tp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Tp.set(n,e)}let Ep={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Tp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Zw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Kx(n){Ep=n(Ep)}function Gx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(qf(this),e,...t);return Zw.set(r,e.sort?e.sort():[e]),Bi(r)}:Wx().includes(n)?function(...e){return n.apply(qf(this),e),Bi(Jw.get(this))}:function(...e){return Bi(n.apply(qf(this),e))}}function Qx(n){return typeof n=="function"?Gx(n):(n instanceof IDBTransaction&&qx(n),zx(n,$x())?new Proxy(n,Ep):n)}function Bi(n){if(n instanceof IDBRequest)return Hx(n);if(Hf.has(n))return Hf.get(n);const e=Qx(n);return e!==n&&(Hf.set(n,e),lm.set(e,n)),e}const qf=n=>lm.get(n);function eT(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),h=Bi(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Bi(u.result),f.oldVersion,f.newVersion,Bi(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const Yx=["get","getKey","getAll","getAllKeys","count"],Xx=["put","add","delete","clear"],Kf=new Map;function Zv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Kf.get(e))return Kf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=Xx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Yx.includes(t)))return;const a=async function(u,...h){const f=this.transaction(u,o?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),o&&f.done]))[0]};return Kf.set(e,a),a}Kx(n=>({...n,get:(e,t,r)=>Zv(e,t)||n.get(e,t,r),has:(e,t)=>!!Zv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Zx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Zx(n){const e=n.getComponent();return e?.type==="VERSION"}const Ip="@firebase/app",e_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new jh("@firebase/app"),eA="@firebase/app-compat",tA="@firebase/analytics-compat",nA="@firebase/analytics",rA="@firebase/app-check-compat",iA="@firebase/app-check",sA="@firebase/auth",oA="@firebase/auth-compat",aA="@firebase/database",lA="@firebase/data-connect",uA="@firebase/database-compat",cA="@firebase/functions",hA="@firebase/functions-compat",dA="@firebase/installations",fA="@firebase/installations-compat",pA="@firebase/messaging",mA="@firebase/messaging-compat",gA="@firebase/performance",yA="@firebase/performance-compat",vA="@firebase/remote-config",_A="@firebase/remote-config-compat",wA="@firebase/storage",TA="@firebase/storage-compat",EA="@firebase/firestore",IA="@firebase/vertexai-preview",SA="@firebase/firestore-compat",PA="firebase",xA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",AA={[Ip]:"fire-core",[eA]:"fire-core-compat",[nA]:"fire-analytics",[tA]:"fire-analytics-compat",[iA]:"fire-app-check",[rA]:"fire-app-check-compat",[sA]:"fire-auth",[oA]:"fire-auth-compat",[aA]:"fire-rtdb",[lA]:"fire-data-connect",[uA]:"fire-rtdb-compat",[cA]:"fire-fn",[hA]:"fire-fn-compat",[dA]:"fire-iid",[fA]:"fire-iid-compat",[pA]:"fire-fcm",[mA]:"fire-fcm-compat",[gA]:"fire-perf",[yA]:"fire-perf-compat",[vA]:"fire-rc",[_A]:"fire-rc-compat",[wA]:"fire-gcs",[TA]:"fire-gcs-compat",[EA]:"fire-fst",[SA]:"fire-fst-compat",[IA]:"fire-vertex","fire-js":"fire-js",[PA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Map,CA=new Map,Pp=new Map;function t_(n,e){try{n.container.addComponent(e)}catch(t){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function lr(n){const e=n.name;if(Pp.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;Pp.set(e,n);for(const t of nh.values())t_(t,n);for(const t of CA.values())t_(t,n);return!0}function Yi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zi=new Qs("app","Firebase",RA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=xA;function tT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sp,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw zi.create("bad-app-name",{appName:String(o)});if(t||(t=qw()),!t)throw zi.create("no-options");const a=nh.get(o);if(a){if(Us(t,a.options)&&Us(r,a.config))return a;throw zi.create("duplicate-app",{appName:o})}const u=new Ox(o);for(const f of Pp.values())u.addComponent(f);const h=new kA(t,r,u);return nh.set(o,h),h}function Oh(n=Sp){const e=nh.get(n);if(!e&&n===Sp&&qw())return tT();if(!e)throw zi.create("no-app",{appName:n});return e}function fn(n,e,t){var r;let o=(r=AA[n])!==null&&r!==void 0?r:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${o}" with version "${e}":`];a&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(h.join(" "));return}lr(new Bn(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="firebase-heartbeat-database",bA=1,zl="firebase-heartbeat-store";let Gf=null;function nT(){return Gf||(Gf=eT(NA,bA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zl)}catch(t){console.warn(t)}}}}).catch(n=>{throw zi.create("idb-open",{originalErrorMessage:n.message})})),Gf}async function DA(n){try{const t=(await nT()).transaction(zl),r=await t.objectStore(zl).get(rT(n));return await t.done,r}catch(e){if(e instanceof $n)ti.warn(e.message);else{const t=zi.create("idb-get",{originalErrorMessage:e?.message});ti.warn(t.message)}}}async function n_(n,e){try{const r=(await nT()).transaction(zl,"readwrite");await r.objectStore(zl).put(e,rT(n)),await r.done}catch(t){if(t instanceof $n)ti.warn(t.message);else{const r=zi.create("idb-set",{originalErrorMessage:t?.message});ti.warn(r.message)}}}function rT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=1024,MA=720*60*60*1e3;class jA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=r_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=MA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ti.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=r_(),{heartbeatsToSend:r,unsentEntries:o}=OA(this._heartbeatsCache.heartbeats),a=th(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ti.warn(t),""}}}function r_(){return new Date().toISOString().substring(0,10)}function OA(n,e=VA){const t=[];let r=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),i_(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),i_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class LA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yw()?Xw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await DA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return n_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return n_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function i_(n){return th(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(n){lr(new Bn("platform-logger",e=>new Jx(e),"PRIVATE")),lr(new Bn("heartbeat",e=>new jA(e),"PRIVATE")),fn(Ip,e_,n),fn(Ip,e_,"esm2017"),fn("fire-js","")}FA("");function um(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function iT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UA=iT,sT=new Qs("auth","Firebase",iT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new jh("@firebase/auth");function BA(n,...e){rh.logLevel<=Oe.WARN&&rh.warn(`Auth (${Ys}): ${n}`,...e)}function $c(n,...e){rh.logLevel<=Oe.ERROR&&rh.error(`Auth (${Ys}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(n,...e){throw hm(n,...e)}function ar(n,...e){return hm(n,...e)}function cm(n,e,t){const r=Object.assign(Object.assign({},UA()),{[e]:t});return new Qs("auth","Firebase",r).create(e,{appName:n.name})}function Jr(n){return cm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zA(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(n,"argument-error"),cm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return sT.create(n,...e)}function Pe(n,e,...t){if(!n)throw hm(e,...t)}function Gr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $c(e),new Error(e)}function ni(n,e){n||Gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $A(){return s_()==="http:"||s_()==="https:"}function s_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($A()||Qw()||"connection"in navigator)?navigator.onLine:!0}function HA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ni(t>e,"Short delay should be less than long delay!"),this.isMobile=gx()||_x()}get(){return WA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n,e){ni(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new Zl(3e4,6e4);function oi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Cr(n,e,t,r,o={}){return aT(n,o,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const h=Jl(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},a);return vx()||(p.referrerPolicy="no-referrer"),oT.fetch()(lT(n,n.config.apiHost,t,h),p)})}async function aT(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},qA),e);try{const o=new QA(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw kc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const h=a.ok?u.errorMessage:u.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw kc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw kc(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw cm(n,_,p);zn(n,_)}}catch(o){if(o instanceof $n)throw o;zn(n,"network-request-failed",{message:String(o)})}}async function eu(n,e,t,r,o={}){const a=await Cr(n,e,t,r,o);return"mfaPendingCredential"in a&&zn(n,"multi-factor-auth-required",{_serverResponse:a}),a}function lT(n,e,t,r){const o=`${e}${t}?${r}`;return n.config.emulator?dm(n.config,o):`${n.config.apiScheme}://${o}`}function GA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ar(this.auth,"network-request-failed")),KA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=ar(n,e,r);return o.customData._tokenResponse=t,o}function o_(n){return n!==void 0&&n.enterprise!==void 0}class YA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function XA(n,e){return Cr(n,"GET","/v2/recaptchaConfig",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(n,e){return Cr(n,"POST","/v1/accounts:delete",e)}async function uT(n,e){return Cr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZA(n,e=!1){const t=vt(n),r=await t.getIdToken(e),o=fm(r);Pe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a?.sign_in_provider;return{claims:o,token:r,authTime:bl(Qf(o.auth_time)),issuedAtTime:bl(Qf(o.iat)),expirationTime:bl(Qf(o.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Qf(n){return Number(n)*1e3}function fm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const o=$w(t);return o?JSON.parse(o):($c("Failed to decode base64 JWT payload"),null)}catch(o){return $c("Caught error parsing JWT payload as JSON",o?.toString()),null}}function a_(n){const e=fm(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof $n&&eC(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function eC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bl(this.lastLoginAt),this.creationTime=bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(n){var e;const t=n.auth,r=await n.getIdToken(),o=await aa(n,uT(t,{idToken:r}));Pe(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?cT(a.providerUserInfo):[],h=rC(n.providerData,u),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!h?.length,_=f?p:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Ap(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,w)}async function nC(n){const e=vt(n);await ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rC(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function cT(n){return n.map(e=>{var{providerId:t}=e,r=um(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(n,e){const t=await aT(n,{},async()=>{const r=Jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=lT(n,o,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",oT.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sC(n,e){return Cr(n,"POST","/v2/accounts:revokeToken",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=a_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await iC(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,u=new ra;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),o&&(Pe(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Pe(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Qr{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ap(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await aa(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZA(this,e)}reload(){return nC(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ih(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(Jr(this.auth));const e=await this.getIdToken();return await aa(this,JA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,u,h,f,p,_;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(o=t.email)!==null&&o!==void 0?o:void 0,S=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,N=(u=t.photoURL)!==null&&u!==void 0?u:void 0,D=(h=t.tenantId)!==null&&h!==void 0?h:void 0,C=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,G=(p=t.createdAt)!==null&&p!==void 0?p:void 0,Q=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:z,emailVerified:J,isAnonymous:ce,providerData:Z,stsTokenManager:b}=t;Pe(z&&b,e,"internal-error");const x=ra.fromJSON(this.name,b);Pe(typeof z=="string",e,"internal-error"),Di(w,e.name),Di(E,e.name),Pe(typeof J=="boolean",e,"internal-error"),Pe(typeof ce=="boolean",e,"internal-error"),Di(S,e.name),Di(N,e.name),Di(D,e.name),Di(C,e.name),Di(G,e.name),Di(Q,e.name);const A=new Qr({uid:z,auth:e,email:E,emailVerified:J,displayName:w,isAnonymous:ce,photoURL:N,phoneNumber:S,tenantId:D,stsTokenManager:x,createdAt:G,lastLoginAt:Q});return Z&&Array.isArray(Z)&&(A.providerData=Z.map(V=>Object.assign({},V))),C&&(A._redirectEventId=C),A}static async _fromIdTokenResponse(e,t,r=!1){const o=new ra;o.updateFromServerResponse(t);const a=new Qr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await ih(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Pe(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?cT(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!a?.length,h=new ra;h.updateFromIdToken(r);const f=new Qr({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;function Yr(n){ni(n instanceof Function,"Expected a class definition");let e=l_.get(n);return e?(ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,l_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}hT.type="NONE";const u_=hT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(n,e,t){return`firebase:${n}:${e}:${t}`}class ia{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=Wc(this.userKey,o.apiKey,a),this.fullPersistenceKey=Wc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ia(Yr(u_),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=o[0]||Yr(u_);const u=Wc(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const _=await p._get(u);if(_){const w=Qr._fromJSON(e,_);p!==a&&(h=w),a=p;break}}catch{}const f=o.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new ia(a,e,r):(a=f[0],h&&await a._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(u)}catch{}})),new ia(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yT(e))return"Blackberry";if(vT(e))return"Webos";if(fT(e))return"Safari";if((e.includes("chrome/")||pT(e))&&!e.includes("edge/"))return"Chrome";if(gT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function dT(n=Yt()){return/firefox\//i.test(n)}function fT(n=Yt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pT(n=Yt()){return/crios\//i.test(n)}function mT(n=Yt()){return/iemobile/i.test(n)}function gT(n=Yt()){return/android/i.test(n)}function yT(n=Yt()){return/blackberry/i.test(n)}function vT(n=Yt()){return/webos/i.test(n)}function pm(n=Yt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oC(n=Yt()){var e;return pm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aC(){return wx()&&document.documentMode===10}function _T(n=Yt()){return pm(n)||gT(n)||vT(n)||yT(n)||/windows phone/i.test(n)||mT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n,e=[]){let t;switch(n){case"Browser":t=c_(Yt());break;case"Worker":t=`${c_(Yt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,h)=>{try{const f=e(a);u(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(n,e={}){return Cr(n,"GET","/v2/passwordPolicy",oi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=6;class hC{constructor(e){var t,r,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:cC,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new h_(this),this.idTokenSubscription=new h_(this),this.beforeStateQueue=new lC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Yr(t)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await ia.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uT(this,{idToken:e}),r=await Qr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(sr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&f?.user&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ih(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(Jr(this));const t=e?vt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(Jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(Jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uC(this),t=new hC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await sC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Yr(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await ia.create(this,[Yr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&BA(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ai(n){return vt(n)}let h_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ax(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fC(n){Lh=n}function TT(n){return Lh.loadJS(n)}function pC(){return Lh.recaptchaEnterpriseScript}function mC(){return Lh.gapiScript}function gC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const yC="recaptcha-enterprise",vC="NO_RECAPTCHA";class _C{constructor(e){this.type=yC,this.auth=ai(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,h)=>{XA(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new YA(f);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,u(p.siteKey)}}).catch(f=>{h(f)})})}function o(a,u,h){const f=window.grecaptcha;o_(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(p=>{u(p)}).catch(()=>{u(vC)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{r(this.auth).then(h=>{if(!t&&o_(window.grecaptcha))o(h,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=pC();f.length!==0&&(f+=h),TT(f).then(()=>{o(h,a,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function d_(n,e,t,r=!1){const o=new _C(n);let a;try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const u=Object.assign({},e);return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function sh(n,e,t,r){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await d_(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await d_(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(n,e){const t=Yi(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Us(a,e??{}))return o;zn(o,"already-initialized")}return t.initialize({options:e})}function TC(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Yr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function EC(n,e,t){const r=ai(n);Pe(r._canInitEmulator,r,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=ET(e),{host:u,port:h}=IC(e),f=h===null?"":`:${h}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),SC()}function ET(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function IC(n){const e=ET(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:f_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:f_(u)}}}function f_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function SC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,t){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}async function PC(n,e){return Cr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(n,e){return eu(n,"POST","/v1/accounts:signInWithPassword",oi(n,e))}async function AC(n,e){return Cr(n,"POST","/v1/accounts:sendOobCode",oi(n,e))}async function CC(n,e){return AC(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(n,e){return eu(n,"POST","/v1/accounts:signInWithEmailLink",oi(n,e))}async function kC(n,e){return eu(n,"POST","/v1/accounts:signInWithEmailLink",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends mm{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new $l(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new $l(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sh(e,t,"signInWithPassword",xC);case"emailLink":return RC(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sh(e,r,"signUpPassword",PC);case"emailLink":return kC(e,{idToken:t,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(n,e){return eu(n,"POST","/v1/accounts:signInWithIdp",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="http://localhost";class Bs extends mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=um(t,["providerId","signInMethod"]);if(!r||!o)return null;const u=new Bs(r,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return sa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,sa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sa(e,t)}buildRequest(){const e={requestUri:NC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DC(n){const e=xl(Al(n)).link,t=e?xl(Al(e)).deep_link_id:null,r=xl(Al(n)).deep_link_id;return(r?xl(Al(r)).link:null)||r||t||e||n}class gm{constructor(e){var t,r,o,a,u,h;const f=xl(Al(e)),p=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(r=f.oobCode)!==null&&r!==void 0?r:null,w=bC((o=f.mode)!==null&&o!==void 0?o:null);Pe(p&&_&&w,"argument-error"),this.apiKey=p,this.operation=w,this.code=_,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=DC(e);try{return new gm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.providerId=wa.PROVIDER_ID}static credential(e,t){return $l._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=gm.parseLink(t);return Pe(r,"argument-error"),$l._fromEmailAndCode(e,r.code,r.tenantId)}}wa.PROVIDER_ID="password";wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends ym{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends tu{constructor(){super("facebook.com")}static credential(e){return Bs._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bs._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Kr.credential(t,r)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends tu{constructor(){super("github.com")}static credential(e){return Bs._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.GITHUB_SIGN_IN_METHOD="github.com";Oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends tu{constructor(){super("twitter.com")}static credential(e,t){return Bs._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Li.credential(t,r)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(n,e){return eu(n,"POST","/v1/accounts:signUp",oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await Qr._fromIdTokenResponse(e,r,o),u=p_(r);return new zs({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=p_(r);return new zs({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function p_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends $n{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,oh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new oh(e,t,r,o)}}function IT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?oh._fromErrorAndOperation(n,a,e,r):a})}async function MC(n,e,t=!1){const r=await aa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zs._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(n,e,t=!1){const{auth:r}=n;if(sr(r.app))return Promise.reject(Jr(r));const o="reauthenticate";try{const a=await aa(n,IT(r,o,e,n),t);Pe(a.idToken,r,"internal-error");const u=fm(a.idToken);Pe(u,r,"internal-error");const{sub:h}=u;return Pe(n.uid===h,r,"user-mismatch"),zs._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&zn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(n,e,t=!1){if(sr(n.app))return Promise.reject(Jr(n));const r="signIn",o=await IT(n,r,e),a=await zs._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function OC(n,e){return ST(ai(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PT(n){const e=ai(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LC(n,e,t){const r=ai(n);await sh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",CC)}async function FC(n,e,t){if(sr(n.app))return Promise.reject(Jr(n));const r=ai(n),u=await sh(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VC).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&PT(n),f}),h=await zs._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function UC(n,e,t){return sr(n.app)?Promise.reject(Jr(n)):OC(vt(n),wa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&PT(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(n,e){return Cr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=vt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await aa(r,BC(r.auth,a));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function $C(n,e,t,r){return vt(n).onIdTokenChanged(e,t,r)}function WC(n,e,t){return vt(n).beforeAuthStateChanged(e,t)}function HC(n,e,t,r){return vt(n).onAuthStateChanged(e,t,r)}function qC(n){return vt(n).signOut()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=1e3,GC=10;class AT extends xT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_T(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);aC()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GC):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},KC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}AT.type="LOCAL";const QC=AT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT extends xT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}CT.type="SESSION";const RT=CT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Fh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const h=Array.from(u).map(async p=>p(t.origin,a)),f=await YC(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((h,f)=>{const p=vm("",20);o.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:o,onMessage(w){const E=w;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function JC(n){wr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function ZC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eR(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function tR(){return kT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="firebaseLocalStorageDb",nR=1,lh="firebaseLocalStorage",bT="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uh(n,e){return n.transaction([lh],e?"readwrite":"readonly").objectStore(lh)}function rR(){const n=indexedDB.deleteDatabase(NT);return new nu(n).toPromise()}function Cp(){const n=indexedDB.open(NT,nR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(lh,{keyPath:bT})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(lh)?e(r):(r.close(),await rR(),e(await Cp()))})})}async function m_(n,e,t){const r=Uh(n,!0).put({[bT]:e,value:t});return new nu(r).toPromise()}async function iR(n,e){const t=Uh(n,!1).get(e),r=await new nu(t).toPromise();return r===void 0?null:r.value}function g_(n,e){const t=Uh(n,!0).delete(e);return new nu(t).toPromise()}const sR=800,oR=3;class DT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>oR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fh._getInstance(tR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ZC(),!this.activeServiceWorker)return;this.sender=new XC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await m_(e,ah,"1"),await g_(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>m_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>iR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>g_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Uh(o,!1).getAll();return new nu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DT.type="LOCAL";const aR=DT;new Zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(n,e){return e?Yr(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lR(n){return ST(n.auth,new _m(n),n.bypassAuthState)}function uR(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),jC(t,new _m(n),n.bypassAuthState)}async function cR(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),MC(t,new _m(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lR;case"linkViaPopup":case"linkViaRedirect":return cR;case"reauthViaPopup":case"reauthViaRedirect":return uR;default:zn(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Zl(2e3,1e4);async function dR(n,e,t){if(sr(n.app))return Promise.reject(ar(n,"operation-not-supported-in-this-environment"));const r=ai(n);zA(n,e,ym);const o=VT(r,t);return new Vs(r,"signInViaPopup",e,o).executeNotNull()}class Vs extends MT{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,Vs.currentPopupAction&&Vs.currentPopupAction.cancel(),Vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hR.get())};e()}}Vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="pendingRedirect",Hc=new Map;class pR extends MT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Hc.get(this.auth._key());if(!e){try{const r=await mR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Hc.set(this.auth._key(),e)}return this.bypassAuthState||Hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mR(n,e){const t=vR(e),r=yR(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function gR(n,e){Hc.set(n._key(),e)}function yR(n){return Yr(n._redirectPersistence)}function vR(n){return Wc(fR,n.config.apiKey,n.name)}async function _R(n,e,t=!1){if(sr(n.app))return Promise.reject(Jr(n));const r=ai(n),o=VT(r,e),u=await new pR(r,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=600*1e3;class TR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ER(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!jT(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wR&&this.cachedEventUids.clear(),this.cachedEventUids.has(y_(e))}saveEventToCache(e){this.cachedEventUids.add(y_(e)),this.lastProcessedEventTime=Date.now()}}function y_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ER(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(n,e={}){return Cr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PR=/^https?/;async function xR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await IR(n);for(const t of e)try{if(AR(t))return}catch{}zn(n,"unauthorized-domain")}function AR(n){const e=xp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!PR.test(t))return!1;if(SR.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new Zl(3e4,6e4);function v_(){const n=wr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function RR(n){return new Promise((e,t)=>{var r,o,a;function u(){v_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v_(),t(ar(n,"network-request-failed"))},timeout:CR.get()})}if(!((o=(r=wr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=wr().gapi)===null||a===void 0)&&a.load)u();else{const h=gC("iframefcb");return wr()[h]=()=>{gapi.load?u():t(ar(n,"network-request-failed"))},TT(`${mC()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw qc=null,e})}let qc=null;function kR(n){return qc=qc||RR(n),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Zl(5e3,15e3),bR="__/auth/iframe",DR="emulator/auth/iframe",VR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jR(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dm(e,DR):`https://${n.config.authDomain}/${bR}`,r={apiKey:e.apiKey,appName:n.name,v:Ys},o=MR.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Jl(r).slice(1)}`}async function OR(n){const e=await kR(n),t=wr().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:jR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VR,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const u=ar(n,"network-request-failed"),h=wr().setTimeout(()=>{a(u)},NR.get());function f(){wr().clearTimeout(h),o(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FR=500,UR=600,BR="_blank",zR="http://localhost";class __{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $R(n,e,t,r=FR,o=UR){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},LR),{width:r.toString(),height:o.toString(),top:a,left:u}),p=Yt().toLowerCase();t&&(h=pT(p)?BR:t),dT(p)&&(e=e||zR,f.scrollbars="yes");const _=Object.entries(f).reduce((E,[S,N])=>`${E}${S}=${N},`,"");if(oC(p)&&h!=="_self")return WR(e||"",h),new __(null);const w=window.open(e||"",h,_);Pe(w,n,"popup-blocked");try{w.focus()}catch{}return new __(w)}function WR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="__/auth/handler",qR="emulator/auth/handler",KR=encodeURIComponent("fac");async function w_(n,e,t,r,o,a){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ys,eventId:o};if(e instanceof ym){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",xx(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))u[_]=w}if(e instanceof tu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),p=f?`#${KR}=${encodeURIComponent(f)}`:"";return`${GR(n)}?${Jl(h).slice(1)}${p}`}function GR({config:n}){return n.emulator?dm(n,qR):`https://${n.authDomain}/${HR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="webStorageSupport";class QR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RT,this._completeRedirectFn=_R,this._overrideRedirectResult=gR}async _openPopup(e,t,r,o){var a;ni((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await w_(e,t,r,xp(),o);return $R(e,u,vm())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await w_(e,t,r,xp(),o);return JC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(ni(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await OR(e),r=new TR(e);return t.register("authEvent",o=>(Pe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yf,{type:Yf},o=>{var a;const u=(a=o?.[0])===null||a===void 0?void 0:a[Yf];u!==void 0&&t(!!u),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _T()||fT()||pm()}}const YR=QR;var T_="@firebase/auth",E_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZR(n){lr(new Bn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;Pe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wT(n)},p=new dC(r,o,a,f);return TC(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),lr(new Bn("auth-internal",e=>{const t=ai(e.getProvider("auth").getImmediate());return(r=>new XR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fn(T_,E_,JR(n)),fn(T_,E_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=300,tk=Kw("authIdTokenMaxAge")||ek;let I_=null;const nk=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>tk)return;const o=t?.token;I_!==o&&(I_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function rk(n=Oh()){const e=Yi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=wC(n,{popupRedirectResolver:YR,persistence:[aR,QC,RT]}),r=Kw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=nk(a.toString());WC(t,u,()=>u(t.currentUser)),$C(t,h=>u(h))}}const o=Ww("auth");return o&&EC(t,`http://${o}`),t}function ik(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}fC({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=ar("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",ik().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZR("Browser");var S_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ls,OT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,x){function A(){}A.prototype=x.prototype,b.D=x.prototype,b.prototype=new A,b.prototype.constructor=b,b.C=function(V,O,F){for(var R=Array(arguments.length-2),se=2;se<arguments.length;se++)R[se-2]=arguments[se];return x.prototype[O].apply(V,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,x,A){A||(A=0);var V=Array(16);if(typeof x=="string")for(var O=0;16>O;++O)V[O]=x.charCodeAt(A++)|x.charCodeAt(A++)<<8|x.charCodeAt(A++)<<16|x.charCodeAt(A++)<<24;else for(O=0;16>O;++O)V[O]=x[A++]|x[A++]<<8|x[A++]<<16|x[A++]<<24;x=b.g[0],A=b.g[1],O=b.g[2];var F=b.g[3],R=x+(F^A&(O^F))+V[0]+3614090360&4294967295;x=A+(R<<7&4294967295|R>>>25),R=F+(O^x&(A^O))+V[1]+3905402710&4294967295,F=x+(R<<12&4294967295|R>>>20),R=O+(A^F&(x^A))+V[2]+606105819&4294967295,O=F+(R<<17&4294967295|R>>>15),R=A+(x^O&(F^x))+V[3]+3250441966&4294967295,A=O+(R<<22&4294967295|R>>>10),R=x+(F^A&(O^F))+V[4]+4118548399&4294967295,x=A+(R<<7&4294967295|R>>>25),R=F+(O^x&(A^O))+V[5]+1200080426&4294967295,F=x+(R<<12&4294967295|R>>>20),R=O+(A^F&(x^A))+V[6]+2821735955&4294967295,O=F+(R<<17&4294967295|R>>>15),R=A+(x^O&(F^x))+V[7]+4249261313&4294967295,A=O+(R<<22&4294967295|R>>>10),R=x+(F^A&(O^F))+V[8]+1770035416&4294967295,x=A+(R<<7&4294967295|R>>>25),R=F+(O^x&(A^O))+V[9]+2336552879&4294967295,F=x+(R<<12&4294967295|R>>>20),R=O+(A^F&(x^A))+V[10]+4294925233&4294967295,O=F+(R<<17&4294967295|R>>>15),R=A+(x^O&(F^x))+V[11]+2304563134&4294967295,A=O+(R<<22&4294967295|R>>>10),R=x+(F^A&(O^F))+V[12]+1804603682&4294967295,x=A+(R<<7&4294967295|R>>>25),R=F+(O^x&(A^O))+V[13]+4254626195&4294967295,F=x+(R<<12&4294967295|R>>>20),R=O+(A^F&(x^A))+V[14]+2792965006&4294967295,O=F+(R<<17&4294967295|R>>>15),R=A+(x^O&(F^x))+V[15]+1236535329&4294967295,A=O+(R<<22&4294967295|R>>>10),R=x+(O^F&(A^O))+V[1]+4129170786&4294967295,x=A+(R<<5&4294967295|R>>>27),R=F+(A^O&(x^A))+V[6]+3225465664&4294967295,F=x+(R<<9&4294967295|R>>>23),R=O+(x^A&(F^x))+V[11]+643717713&4294967295,O=F+(R<<14&4294967295|R>>>18),R=A+(F^x&(O^F))+V[0]+3921069994&4294967295,A=O+(R<<20&4294967295|R>>>12),R=x+(O^F&(A^O))+V[5]+3593408605&4294967295,x=A+(R<<5&4294967295|R>>>27),R=F+(A^O&(x^A))+V[10]+38016083&4294967295,F=x+(R<<9&4294967295|R>>>23),R=O+(x^A&(F^x))+V[15]+3634488961&4294967295,O=F+(R<<14&4294967295|R>>>18),R=A+(F^x&(O^F))+V[4]+3889429448&4294967295,A=O+(R<<20&4294967295|R>>>12),R=x+(O^F&(A^O))+V[9]+568446438&4294967295,x=A+(R<<5&4294967295|R>>>27),R=F+(A^O&(x^A))+V[14]+3275163606&4294967295,F=x+(R<<9&4294967295|R>>>23),R=O+(x^A&(F^x))+V[3]+4107603335&4294967295,O=F+(R<<14&4294967295|R>>>18),R=A+(F^x&(O^F))+V[8]+1163531501&4294967295,A=O+(R<<20&4294967295|R>>>12),R=x+(O^F&(A^O))+V[13]+2850285829&4294967295,x=A+(R<<5&4294967295|R>>>27),R=F+(A^O&(x^A))+V[2]+4243563512&4294967295,F=x+(R<<9&4294967295|R>>>23),R=O+(x^A&(F^x))+V[7]+1735328473&4294967295,O=F+(R<<14&4294967295|R>>>18),R=A+(F^x&(O^F))+V[12]+2368359562&4294967295,A=O+(R<<20&4294967295|R>>>12),R=x+(A^O^F)+V[5]+4294588738&4294967295,x=A+(R<<4&4294967295|R>>>28),R=F+(x^A^O)+V[8]+2272392833&4294967295,F=x+(R<<11&4294967295|R>>>21),R=O+(F^x^A)+V[11]+1839030562&4294967295,O=F+(R<<16&4294967295|R>>>16),R=A+(O^F^x)+V[14]+4259657740&4294967295,A=O+(R<<23&4294967295|R>>>9),R=x+(A^O^F)+V[1]+2763975236&4294967295,x=A+(R<<4&4294967295|R>>>28),R=F+(x^A^O)+V[4]+1272893353&4294967295,F=x+(R<<11&4294967295|R>>>21),R=O+(F^x^A)+V[7]+4139469664&4294967295,O=F+(R<<16&4294967295|R>>>16),R=A+(O^F^x)+V[10]+3200236656&4294967295,A=O+(R<<23&4294967295|R>>>9),R=x+(A^O^F)+V[13]+681279174&4294967295,x=A+(R<<4&4294967295|R>>>28),R=F+(x^A^O)+V[0]+3936430074&4294967295,F=x+(R<<11&4294967295|R>>>21),R=O+(F^x^A)+V[3]+3572445317&4294967295,O=F+(R<<16&4294967295|R>>>16),R=A+(O^F^x)+V[6]+76029189&4294967295,A=O+(R<<23&4294967295|R>>>9),R=x+(A^O^F)+V[9]+3654602809&4294967295,x=A+(R<<4&4294967295|R>>>28),R=F+(x^A^O)+V[12]+3873151461&4294967295,F=x+(R<<11&4294967295|R>>>21),R=O+(F^x^A)+V[15]+530742520&4294967295,O=F+(R<<16&4294967295|R>>>16),R=A+(O^F^x)+V[2]+3299628645&4294967295,A=O+(R<<23&4294967295|R>>>9),R=x+(O^(A|~F))+V[0]+4096336452&4294967295,x=A+(R<<6&4294967295|R>>>26),R=F+(A^(x|~O))+V[7]+1126891415&4294967295,F=x+(R<<10&4294967295|R>>>22),R=O+(x^(F|~A))+V[14]+2878612391&4294967295,O=F+(R<<15&4294967295|R>>>17),R=A+(F^(O|~x))+V[5]+4237533241&4294967295,A=O+(R<<21&4294967295|R>>>11),R=x+(O^(A|~F))+V[12]+1700485571&4294967295,x=A+(R<<6&4294967295|R>>>26),R=F+(A^(x|~O))+V[3]+2399980690&4294967295,F=x+(R<<10&4294967295|R>>>22),R=O+(x^(F|~A))+V[10]+4293915773&4294967295,O=F+(R<<15&4294967295|R>>>17),R=A+(F^(O|~x))+V[1]+2240044497&4294967295,A=O+(R<<21&4294967295|R>>>11),R=x+(O^(A|~F))+V[8]+1873313359&4294967295,x=A+(R<<6&4294967295|R>>>26),R=F+(A^(x|~O))+V[15]+4264355552&4294967295,F=x+(R<<10&4294967295|R>>>22),R=O+(x^(F|~A))+V[6]+2734768916&4294967295,O=F+(R<<15&4294967295|R>>>17),R=A+(F^(O|~x))+V[13]+1309151649&4294967295,A=O+(R<<21&4294967295|R>>>11),R=x+(O^(A|~F))+V[4]+4149444226&4294967295,x=A+(R<<6&4294967295|R>>>26),R=F+(A^(x|~O))+V[11]+3174756917&4294967295,F=x+(R<<10&4294967295|R>>>22),R=O+(x^(F|~A))+V[2]+718787259&4294967295,O=F+(R<<15&4294967295|R>>>17),R=A+(F^(O|~x))+V[9]+3951481745&4294967295,b.g[0]=b.g[0]+x&4294967295,b.g[1]=b.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+O&4294967295,b.g[3]=b.g[3]+F&4294967295}r.prototype.u=function(b,x){x===void 0&&(x=b.length);for(var A=x-this.blockSize,V=this.B,O=this.h,F=0;F<x;){if(O==0)for(;F<=A;)o(this,b,F),F+=this.blockSize;if(typeof b=="string"){for(;F<x;)if(V[O++]=b.charCodeAt(F++),O==this.blockSize){o(this,V),O=0;break}}else for(;F<x;)if(V[O++]=b[F++],O==this.blockSize){o(this,V),O=0;break}}this.h=O,this.o+=x},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var x=1;x<b.length-8;++x)b[x]=0;var A=8*this.o;for(x=b.length-8;x<b.length;++x)b[x]=A&255,A/=256;for(this.u(b),b=Array(16),x=A=0;4>x;++x)for(var V=0;32>V;V+=8)b[A++]=this.g[x]>>>V&255;return b};function a(b,x){var A=h;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=x(b)}function u(b,x){this.h=x;for(var A=[],V=!0,O=b.length-1;0<=O;O--){var F=b[O]|0;V&&F==x||(A[O]=F,V=!1)}this.g=A}var h={};function f(b){return-128<=b&&128>b?a(b,function(x){return new u([x|0],0>x?-1:0)}):new u([b|0],0>b?-1:0)}function p(b){if(isNaN(b)||!isFinite(b))return w;if(0>b)return C(p(-b));for(var x=[],A=1,V=0;b>=A;V++)x[V]=b/A|0,A*=4294967296;return new u(x,0)}function _(b,x){if(b.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b.charAt(0)=="-")return C(_(b.substring(1),x));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(x,8)),V=w,O=0;O<b.length;O+=8){var F=Math.min(8,b.length-O),R=parseInt(b.substring(O,O+F),x);8>F?(F=p(Math.pow(x,F)),V=V.j(F).add(p(R))):(V=V.j(A),V=V.add(p(R)))}return V}var w=f(0),E=f(1),S=f(16777216);n=u.prototype,n.m=function(){if(D(this))return-C(this).m();for(var b=0,x=1,A=0;A<this.g.length;A++){var V=this.i(A);b+=(0<=V?V:4294967296+V)*x,x*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N(this))return"0";if(D(this))return"-"+C(this).toString(b);for(var x=p(Math.pow(b,6)),A=this,V="";;){var O=J(A,x).g;A=G(A,O.j(x));var F=((0<A.g.length?A.g[0]:A.h)>>>0).toString(b);if(A=O,N(A))return F+V;for(;6>F.length;)F="0"+F;V=F+V}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function N(b){if(b.h!=0)return!1;for(var x=0;x<b.g.length;x++)if(b.g[x]!=0)return!1;return!0}function D(b){return b.h==-1}n.l=function(b){return b=G(this,b),D(b)?-1:N(b)?0:1};function C(b){for(var x=b.g.length,A=[],V=0;V<x;V++)A[V]=~b.g[V];return new u(A,~b.h).add(E)}n.abs=function(){return D(this)?C(this):this},n.add=function(b){for(var x=Math.max(this.g.length,b.g.length),A=[],V=0,O=0;O<=x;O++){var F=V+(this.i(O)&65535)+(b.i(O)&65535),R=(F>>>16)+(this.i(O)>>>16)+(b.i(O)>>>16);V=R>>>16,F&=65535,R&=65535,A[O]=R<<16|F}return new u(A,A[A.length-1]&-2147483648?-1:0)};function G(b,x){return b.add(C(x))}n.j=function(b){if(N(this)||N(b))return w;if(D(this))return D(b)?C(this).j(C(b)):C(C(this).j(b));if(D(b))return C(this.j(C(b)));if(0>this.l(S)&&0>b.l(S))return p(this.m()*b.m());for(var x=this.g.length+b.g.length,A=[],V=0;V<2*x;V++)A[V]=0;for(V=0;V<this.g.length;V++)for(var O=0;O<b.g.length;O++){var F=this.i(V)>>>16,R=this.i(V)&65535,se=b.i(O)>>>16,be=b.i(O)&65535;A[2*V+2*O]+=R*be,Q(A,2*V+2*O),A[2*V+2*O+1]+=F*be,Q(A,2*V+2*O+1),A[2*V+2*O+1]+=R*se,Q(A,2*V+2*O+1),A[2*V+2*O+2]+=F*se,Q(A,2*V+2*O+2)}for(V=0;V<x;V++)A[V]=A[2*V+1]<<16|A[2*V];for(V=x;V<2*x;V++)A[V]=0;return new u(A,0)};function Q(b,x){for(;(b[x]&65535)!=b[x];)b[x+1]+=b[x]>>>16,b[x]&=65535,x++}function z(b,x){this.g=b,this.h=x}function J(b,x){if(N(x))throw Error("division by zero");if(N(b))return new z(w,w);if(D(b))return x=J(C(b),x),new z(C(x.g),C(x.h));if(D(x))return x=J(b,C(x)),new z(C(x.g),x.h);if(30<b.g.length){if(D(b)||D(x))throw Error("slowDivide_ only works with positive integers.");for(var A=E,V=x;0>=V.l(b);)A=ce(A),V=ce(V);var O=Z(A,1),F=Z(V,1);for(V=Z(V,2),A=Z(A,2);!N(V);){var R=F.add(V);0>=R.l(b)&&(O=O.add(A),F=R),V=Z(V,1),A=Z(A,1)}return x=G(b,O.j(x)),new z(O,x)}for(O=w;0<=b.l(x);){for(A=Math.max(1,Math.floor(b.m()/x.m())),V=Math.ceil(Math.log(A)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),F=p(A),R=F.j(x);D(R)||0<R.l(b);)A-=V,F=p(A),R=F.j(x);N(F)&&(F=E),O=O.add(F),b=G(b,R)}return new z(O,b)}n.A=function(b){return J(this,b).h},n.and=function(b){for(var x=Math.max(this.g.length,b.g.length),A=[],V=0;V<x;V++)A[V]=this.i(V)&b.i(V);return new u(A,this.h&b.h)},n.or=function(b){for(var x=Math.max(this.g.length,b.g.length),A=[],V=0;V<x;V++)A[V]=this.i(V)|b.i(V);return new u(A,this.h|b.h)},n.xor=function(b){for(var x=Math.max(this.g.length,b.g.length),A=[],V=0;V<x;V++)A[V]=this.i(V)^b.i(V);return new u(A,this.h^b.h)};function ce(b){for(var x=b.g.length+1,A=[],V=0;V<x;V++)A[V]=b.i(V)<<1|b.i(V-1)>>>31;return new u(A,b.h)}function Z(b,x){var A=x>>5;x%=32;for(var V=b.g.length-A,O=[],F=0;F<V;F++)O[F]=0<x?b.i(F+A)>>>x|b.i(F+A+1)<<32-x:b.i(F+A);return new u(O,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OT=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,Ls=u}).apply(typeof S_<"u"?S_:typeof self<"u"?self:typeof window<"u"?window:{});var Nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LT,Cl,FT,Kc,Rp,UT,BT,zT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,T){return c==Array.prototype||c==Object.prototype||(c[y]=T.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nc=="object"&&Nc];for(var y=0;y<c.length;++y){var T=c[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function o(c,y){if(y)e:{var T=r;c=c.split(".");for(var P=0;P<c.length-1;P++){var $=c[P];if(!($ in T))break e;T=T[$]}c=c[c.length-1],P=T[c],y=y(P),y!=P&&y!=null&&e(T,c,{configurable:!0,writable:!0,value:y})}}function a(c,y){c instanceof String&&(c+="");var T=0,P=!1,$={next:function(){if(!P&&T<c.length){var Y=T++;return{value:y(Y,c[Y]),done:!1}}return P=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(c){return c||function(){return a(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function _(c,y,T){return c.call.apply(c.bind,arguments)}function w(c,y,T){if(!c)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,P),c.apply(y,$)}}return function(){return c.apply(y,arguments)}}function E(c,y,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,E.apply(null,arguments)}function S(c,y){var T=Array.prototype.slice.call(arguments,1);return function(){var P=T.slice();return P.push.apply(P,arguments),c.apply(this,P)}}function N(c,y){function T(){}T.prototype=y.prototype,c.aa=y.prototype,c.prototype=new T,c.prototype.constructor=c,c.Qb=function(P,$,Y){for(var ue=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ue[qe-2]=arguments[qe];return y.prototype[$].apply(P,ue)}}function D(c){const y=c.length;if(0<y){const T=Array(y);for(let P=0;P<y;P++)T[P]=c[P];return T}return[]}function C(c,y){for(let T=1;T<arguments.length;T++){const P=arguments[T];if(f(P)){const $=c.length||0,Y=P.length||0;c.length=$+Y;for(let ue=0;ue<Y;ue++)c[$+ue]=P[ue]}else c.push(P)}}class G{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Q(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var ce=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function Z(c,y,T){for(const P in c)y.call(T,c[P],P,c)}function b(c,y){for(const T in c)y.call(void 0,c[T],T,c)}function x(c){const y={};for(const T in c)y[T]=c[T];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,y){let T,P;for(let $=1;$<arguments.length;$++){P=arguments[$];for(T in P)c[T]=P[T];for(let Y=0;Y<A.length;Y++)T=A[Y],Object.prototype.hasOwnProperty.call(P,T)&&(c[T]=P[T])}}function O(c){var y=1;c=c.split(":");const T=[];for(;0<y&&c.length;)T.push(c.shift()),y--;return c.length&&T.push(c.join(":")),T}function F(c){h.setTimeout(()=>{throw c},0)}function R(){var c=de;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class se{constructor(){this.h=this.g=null}add(y,T){const P=be.get();P.set(y,T),this.h?this.h.next=P:this.g=P,this.h=P}}var be=new G(()=>new xe,c=>c.reset());class xe{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,q=!1,de=new se,le=()=>{const c=h.Promise.resolve(void 0);Ae=()=>{c.then(j)}};var j=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(T){F(T)}var y=be;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}q=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var oe=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const T=()=>{};h.addEventListener("test",T,y),h.removeEventListener("test",T,y)}catch{}return c})();function he(c,y){if(X.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var T=this.type=c.type,P=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(ce){e:{try{J(y.nodeName);var $=!0;break e}catch{}$=!1}$||(y=null)}}else T=="mouseover"?y=c.fromElement:T=="mouseout"&&(y=c.toElement);this.relatedTarget=y,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:_e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&he.aa.h.call(this)}}N(he,X);var _e={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Be=0;function He(c,y,T,P,$){this.listener=c,this.proxy=null,this.src=y,this.type=T,this.capture=!!P,this.ha=$,this.key=++Be,this.da=this.fa=!1}function rt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Dt(c){this.src=c,this.g={},this.h=0}Dt.prototype.add=function(c,y,T,P,$){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var ue=li(c,y,P,$);return-1<ue?(y=c[ue],T||(y.fa=!1)):(y=new He(y,this.src,Y,!!P,$),y.fa=T,c.push(y)),y};function Zi(c,y){var T=y.type;if(T in c.g){var P=c.g[T],$=Array.prototype.indexOf.call(P,y,void 0),Y;(Y=0<=$)&&Array.prototype.splice.call(P,$,1),Y&&(rt(y),c.g[T].length==0&&(delete c.g[T],c.h--))}}function li(c,y,T,P){for(var $=0;$<c.length;++$){var Y=c[$];if(!Y.da&&Y.listener==y&&Y.capture==!!T&&Y.ha==P)return $}return-1}var es="closure_lm_"+(1e6*Math.random()|0),no={};function Pa(c,y,T,P,$){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Pa(c,y[Y],T,P,$);return null}return T=Ca(T),c&&c[De]?c.K(y,T,p(P)?!!P.capture:!1,$):xa(c,y,T,!1,P,$)}function xa(c,y,T,P,$,Y){if(!y)throw Error("Invalid event type");var ue=p($)?!!$.capture:!!$,qe=io(c);if(qe||(c[es]=qe=new Dt(c)),T=qe.add(y,T,P,ue,Y),T.proxy)return T;if(P=pu(),T.proxy=P,P.src=c,P.listener=T,c.addEventListener)oe||($=ue),$===void 0&&($=!1),c.addEventListener(y.toString(),P,$);else if(c.attachEvent)c.attachEvent(Nr(y.toString()),P);else if(c.addListener&&c.removeListener)c.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return T}function pu(){function c(T){return y.call(c.src,c.listener,T)}const y=Aa;return c}function ro(c,y,T,P,$){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)ro(c,y[Y],T,P,$);else P=p(P)?!!P.capture:!!P,T=Ca(T),c&&c[De]?(c=c.i,y=String(y).toString(),y in c.g&&(Y=c.g[y],T=li(Y,T,P,$),-1<T&&(rt(Y[T]),Array.prototype.splice.call(Y,T,1),Y.length==0&&(delete c.g[y],c.h--)))):c&&(c=io(c))&&(y=c.g[y.toString()],c=-1,y&&(c=li(y,T,P,$)),(T=-1<c?y[c]:null)&&kr(T))}function kr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[De])Zi(y.i,c);else{var T=c.type,P=c.proxy;y.removeEventListener?y.removeEventListener(T,P,c.capture):y.detachEvent?y.detachEvent(Nr(T),P):y.addListener&&y.removeListener&&y.removeListener(P),(T=io(y))?(Zi(T,c),T.h==0&&(T.src=null,y[es]=null)):rt(c)}}}function Nr(c){return c in no?no[c]:no[c]="on"+c}function Aa(c,y){if(c.da)c=!0;else{y=new he(y,this);var T=c.listener,P=c.ha||c.src;c.fa&&kr(c),c=T.call(P,y)}return c}function io(c){return c=c[es],c instanceof Dt?c:null}var so="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ca(c){return typeof c=="function"?c:(c[so]||(c[so]=function(y){return c.handleEvent(y)}),c[so])}function _t(){U.call(this),this.i=new Dt(this),this.M=this,this.F=null}N(_t,U),_t.prototype[De]=!0,_t.prototype.removeEventListener=function(c,y,T,P){ro(this,c,y,T,P)};function wt(c,y){var T,P=c.F;if(P)for(T=[];P;P=P.F)T.push(P);if(c=c.M,P=y.type||y,typeof y=="string")y=new X(y,c);else if(y instanceof X)y.target=y.target||c;else{var $=y;y=new X(P,c),V(y,$)}if($=!0,T)for(var Y=T.length-1;0<=Y;Y--){var ue=y.g=T[Y];$=br(ue,P,!0,y)&&$}if(ue=y.g=c,$=br(ue,P,!0,y)&&$,$=br(ue,P,!1,y)&&$,T)for(Y=0;Y<T.length;Y++)ue=y.g=T[Y],$=br(ue,P,!1,y)&&$}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var T=c.g[y],P=0;P<T.length;P++)rt(T[P]);delete c.g[y],c.h--}}this.F=null},_t.prototype.K=function(c,y,T,P){return this.i.add(String(c),y,!1,T,P)},_t.prototype.L=function(c,y,T,P){return this.i.add(String(c),y,!0,T,P)};function br(c,y,T,P){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var $=!0,Y=0;Y<y.length;++Y){var ue=y[Y];if(ue&&!ue.da&&ue.capture==T){var qe=ue.listener,Tt=ue.ha||ue.src;ue.fa&&Zi(c.i,ue),$=qe.call(Tt,P)!==!1&&$}}return $&&!P.defaultPrevented}function Ra(c,y,T){if(typeof c=="function")T&&(c=E(c,T));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(c,y||0)}function ui(c){c.g=Ra(()=>{c.g=null,c.i&&(c.i=!1,ui(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class ts extends U{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ui(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(c){U.call(this),this.h=c,this.g={}}N(ns,U);var ka=[];function Na(c){Z(c.g,function(y,T){this.g.hasOwnProperty(T)&&kr(y)},c),c.g={}}ns.prototype.N=function(){ns.aa.N.call(this),Na(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ba=h.JSON.stringify,Da=h.JSON.parse,Va=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function rs(){}rs.prototype.h=null;function oo(c){return c.h||(c.h=c.i())}function ao(){}var Rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){X.call(this,"d")}N(ur,X);function lo(){X.call(this,"c")}N(lo,X);var cr={},Ma=null;function is(){return Ma=Ma||new _t}cr.La="serverreachability";function ja(c){X.call(this,cr.La,c)}N(ja,X);function Dr(c){const y=is();wt(y,new ja(y))}cr.STAT_EVENT="statevent";function Oa(c,y){X.call(this,cr.STAT_EVENT,c),this.stat=y}N(Oa,X);function ct(c){const y=is();wt(y,new Oa(y,c))}cr.Ma="timingevent";function uo(c,y){X.call(this,cr.Ma,c),this.size=y}N(uo,X);function Wn(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function ss(){this.g=!0}ss.prototype.xa=function(){this.g=!1};function os(c,y,T,P,$,Y){c.info(function(){if(c.g)if(Y)for(var ue="",qe=Y.split("&"),Tt=0;Tt<qe.length;Tt++){var Fe=qe[Tt].split("=");if(1<Fe.length){var xt=Fe[0];Fe=Fe[1];var pt=xt.split("_");ue=2<=pt.length&&pt[1]=="type"?ue+(xt+"="+Fe+"&"):ue+(xt+"=redacted&")}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+P+") [attempt "+$+"]: "+y+`
`+T+`
`+ue})}function co(c,y,T,P,$,Y,ue){c.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+$+"]: "+y+`
`+T+`
`+Y+" "+ue})}function Hn(c,y,T,P){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+dd(c,T)+(P?" "+P:"")})}function La(c,y){c.info(function(){return"TIMEOUT: "+y})}ss.prototype.info=function(){};function dd(c,y){if(!c.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(c=0;c<T.length;c++)if(Array.isArray(T[c])){var P=T[c];if(!(2>P.length)){var $=P[1];if(Array.isArray($)&&!(1>$.length)){var Y=$[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ue=1;ue<$.length;ue++)$[ue]=""}}}}return ba(T)}catch{return y}}var ho={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qn;function as(){}N(as,rs),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},qn=new as;function Kn(c,y,T,P){this.j=c,this.i=y,this.l=T,this.R=P||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gu}function gu(){this.i=null,this.g="",this.h=!1}var Fa={},fo={};function po(c,y,T){c.L=1,c.v=pi(vn(y)),c.m=T,c.P=!0,Ua(c,null)}function Ua(c,y){c.F=Date.now(),Qe(c),c.A=vn(c.v);var T=c.A,P=c.R;Array.isArray(P)||(P=[String(P)]),gi(T.i,"t",P),c.C=0,T=c.j.J,c.h=new gu,c.g=Vu(c.j,T?y:null,!c.m),0<c.O&&(c.M=new ts(E(c.Y,c,c.g),c.O)),y=c.U,T=c.g,P=c.ca;var $="readystatechange";Array.isArray($)||($&&(ka[0]=$.toString()),$=ka);for(var Y=0;Y<$.length;Y++){var ue=Pa(T,$[Y],P||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Dr(),os(c.i,c.u,c.A,c.l,c.R,c.m)}Kn.prototype.ca=function(c){c=c.target;const y=this.M;y&&sn(c)==3?y.j():this.Y(c)},Kn.prototype.Y=function(c){try{if(c==this.g)e:{const pt=sn(this.g);var y=this.g.Ba();const bn=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||qa(this.g)))){this.J||pt!=4||y==7||(y==8||0>=bn?Dr(3):Dr(2)),ls(this);var T=this.g.Z();this.X=T;t:if(yu(this)){var P=qa(this.g);c="";var $=P.length,Y=sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),ci(this);var ue="";break t}this.h.i=new h.TextDecoder}for(y=0;y<$;y++)this.h.h=!0,c+=this.h.i.decode(P[y],{stream:!(Y&&y==$-1)});P.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=T==200,co(this.i,this.u,this.A,this.l,this.R,pt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Tt=this.g;if((qe=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(qe)){var Fe=qe;break t}}Fe=null}if(T=Fe)Hn(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ba(this,T);else{this.o=!1,this.s=3,ct(12),kn(this),ci(this);break e}}if(this.P){T=!0;let wn;for(;!this.J&&this.C<ue.length;)if(wn=fd(this,ue),wn==fo){pt==4&&(this.s=4,ct(14),T=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==Fa){this.s=4,ct(15),Hn(this.i,this.l,ue,"[Invalid Chunk]"),T=!1;break}else Hn(this.i,this.l,wn,null),Ba(this,wn);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||ue.length!=0||this.h.h||(this.s=1,ct(16),T=!1),this.o=this.o&&T,!T)Hn(this.i,this.l,ue,"[Invalid Chunked Response]"),kn(this),ci(this);else if(0<ue.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ga(xt),xt.M=!0,ct(11))}}else Hn(this.i,this.l,ue,null),Ba(this,ue);pt==4&&kn(this),this.o&&!this.J&&(pt==4?Po(this.j,this):(this.o=!1,Qe(this)))}else wo(this.g),T==400&&0<ue.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),kn(this),ci(this)}}}catch{}finally{}};function yu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fd(c,y){var T=c.C,P=y.indexOf(`
`,T);return P==-1?fo:(T=Number(y.substring(T,P)),isNaN(T)?Fa:(P+=1,P+T>y.length?fo:(y=y.slice(P,P+T),c.C=P+T,y)))}Kn.prototype.cancel=function(){this.J=!0,kn(this)};function Qe(c){c.S=Date.now()+c.I,vu(c,c.I)}function vu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Wn(E(c.ba,c),y)}function ls(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Kn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(La(this.i,this.A),this.L!=2&&(Dr(),ct(17)),kn(this),this.s=2,ci(this)):vu(this,this.S-c)};function ci(c){c.j.G==0||c.J||Po(c.j,c)}function kn(c){ls(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Na(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Ba(c,y){try{var T=c.j;if(T.G!=0&&(T.g==c||Xt(T.h,c))){if(!c.K&&Xt(T.h,c)&&T.G==3){try{var P=T.Da.g.parse(y)}catch{P=null}if(Array.isArray(P)&&P.length==3){var $=P;if($[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<c.F)So(T),Jn(T);else break e;Io(T),ct(18)}}else T.za=$[1],0<T.za-T.T&&37500>$[2]&&T.F&&T.v==0&&!T.C&&(T.C=Wn(E(T.Za,T),6e3));if(1>=wu(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Lr(T,11)}else if((c.K||T.g==c)&&So(T),!Q(y))for($=T.Da.g.parse(y),y=0;y<$.length;y++){let Fe=$[y];if(T.T=Fe[0],Fe=Fe[1],T.G==2)if(Fe[0]=="c"){T.K=Fe[1],T.ia=Fe[2];const xt=Fe[3];xt!=null&&(T.la=xt,T.j.info("VER="+T.la));const pt=Fe[4];pt!=null&&(T.Aa=pt,T.j.info("SVER="+T.Aa));const bn=Fe[5];bn!=null&&typeof bn=="number"&&0<bn&&(P=1.5*bn,T.L=P,T.j.info("backChannelRequestTimeoutMs_="+P)),P=T;const wn=c.g;if(wn){const ms=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ms){var Y=P.h;Y.g||ms.indexOf("spdy")==-1&&ms.indexOf("quic")==-1&&ms.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(za(Y,Y.h),Y.h=null))}if(P.D){const Ao=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ao&&(P.ya=Ao,Ge(P.I,P.D,Ao))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-c.F,T.j.info("Handshake RTT: "+T.R+"ms")),P=T;var ue=c;if(P.qa=Du(P,P.J?P.ia:null,P.W),ue.K){Tu(P.h,ue);var qe=ue,Tt=P.L;Tt&&(qe.I=Tt),qe.B&&(ls(qe),Qe(qe)),P.g=ue}else ps(P);0<T.i.length&&pr(T)}else Fe[0]!="stop"&&Fe[0]!="close"||Lr(T,7);else T.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Lr(T,7):Mt(T):Fe[0]!="noop"&&T.l&&T.l.ta(Fe),T.v=0)}}Dr(4)}catch{}}var _u=class{constructor(c,y){this.g=c,this.map=y}};function us(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wu(c){return c.h?1:c.g?c.g.size:0}function Xt(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function za(c,y){c.g?c.g.add(y):c.h=y}function Tu(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}us.prototype.cancel=function(){if(this.i=Eu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Eu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const T of c.g.values())y=y.concat(T.D);return y}return D(c.i)}function mo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var y=[],T=c.length,P=0;P<T;P++)y.push(c[P]);return y}y=[],T=0;for(P in c)y[T++]=c[P];return y}function go(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var y=[];c=c.length;for(var T=0;T<c;T++)y.push(T);return y}y=[],T=0;for(const P in c)y[T++]=P;return y}}}function hi(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var T=go(c),P=mo(c),$=P.length,Y=0;Y<$;Y++)y.call(void 0,P[Y],T&&T[Y],c)}var cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pd(c,y){if(c){c=c.split("&");for(var T=0;T<c.length;T++){var P=c[T].indexOf("="),$=null;if(0<=P){var Y=c[T].substring(0,P);$=c[T].substring(P+1)}else Y=c[T];y(Y,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Vr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vr){this.h=c.h,hs(this,c.j),this.o=c.o,this.g=c.g,di(this,c.s),this.l=c.l;var y=c.i,T=new hr;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),fi(this,T),this.m=c.m}else c&&(y=String(c).match(cs))?(this.h=!1,hs(this,y[1]||"",!0),this.o=je(y[2]||""),this.g=je(y[3]||"",!0),di(this,y[4]),this.l=je(y[5]||"",!0),fi(this,y[6]||"",!0),this.m=je(y[7]||"")):(this.h=!1,this.i=new hr(null,this.h))}Vr.prototype.toString=function(){var c=[],y=this.j;y&&c.push(mi(y,yo,!0),":");var T=this.g;return(T||y=="file")&&(c.push("//"),(y=this.o)&&c.push(mi(y,yo,!0),"@"),c.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&c.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&c.push("/"),c.push(mi(T,T.charAt(0)=="/"?Pu:Su,!0))),(T=this.i.toString())&&c.push("?",T),(T=this.m)&&c.push("#",mi(T,$a)),c.join("")};function vn(c){return new Vr(c)}function hs(c,y,T){c.j=T?je(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function di(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function fi(c,y,T){y instanceof hr?(c.i=y,dr(c.i,c.h)):(T||(y=mi(y,xu)),c.i=new hr(y,c.h))}function Ge(c,y,T){c.i.set(y,T)}function pi(c){return Ge(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function je(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function mi(c,y,T){return typeof c=="string"?(c=encodeURI(c).replace(y,Iu),T&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Iu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yo=/[#\/\?@]/g,Su=/[#\?:]/g,Pu=/[#\?]/g,xu=/[#\?@]/g,$a=/#/g;function hr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Vt(c){c.g||(c.g=new Map,c.h=0,c.i&&pd(c.i,function(y,T){c.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=hr.prototype,n.add=function(c,y){Vt(this),this.i=null,c=Nn(this,c);var T=this.g.get(c);return T||this.g.set(c,T=[]),T.push(y),this.h+=1,this};function Gn(c,y){Vt(c),y=Nn(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Qn(c,y){return Vt(c),y=Nn(c,y),c.g.has(y)}n.forEach=function(c,y){Vt(this),this.g.forEach(function(T,P){T.forEach(function($){c.call(y,$,P,this)},this)},this)},n.na=function(){Vt(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let P=0;P<y.length;P++){const $=c[P];for(let Y=0;Y<$.length;Y++)T.push(y[P])}return T},n.V=function(c){Vt(this);let y=[];if(typeof c=="string")Qn(this,c)&&(y=y.concat(this.g.get(Nn(this,c))));else{c=Array.from(this.g.values());for(let T=0;T<c.length;T++)y=y.concat(c[T])}return y},n.set=function(c,y){return Vt(this),this.i=null,c=Nn(this,c),Qn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},n.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function gi(c,y,T){Gn(c,y),0<T.length&&(c.i=null,c.g.set(Nn(c,y),D(T)),c.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var P=y[T];const Y=encodeURIComponent(String(P)),ue=this.V(P);for(P=0;P<ue.length;P++){var $=Y;ue[P]!==""&&($+="="+encodeURIComponent(String(ue[P]))),c.push($)}}return this.i=c.join("&")};function Nn(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function dr(c,y){y&&!c.j&&(Vt(c),c.i=null,c.g.forEach(function(T,P){var $=P.toLowerCase();P!=$&&(Gn(this,P),gi(this,$,T))},c)),c.j=y}function md(c,y){const T=new ss;if(h.Image){const P=new Image;P.onload=S(rn,T,"TestLoadImage: loaded",!0,y,P),P.onerror=S(rn,T,"TestLoadImage: error",!1,y,P),P.onabort=S(rn,T,"TestLoadImage: abort",!1,y,P),P.ontimeout=S(rn,T,"TestLoadImage: timeout",!1,y,P),h.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=c}else y(!1)}function Au(c,y){const T=new ss,P=new AbortController,$=setTimeout(()=>{P.abort(),rn(T,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:P.signal}).then(Y=>{clearTimeout($),Y.ok?rn(T,"TestPingServer: ok",!0,y):rn(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),rn(T,"TestPingServer: error",!1,y)})}function rn(c,y,T,P,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),P(T)}catch{}}function gd(){this.g=new Va}function Cu(c,y,T){const P=T||"";try{hi(c,function($,Y){let ue=$;p($)&&(ue=ba($)),y.push(P+Y+"="+encodeURIComponent(ue))})}catch($){throw y.push(P+"type="+encodeURIComponent("_badmap")),$}}function Mr(c){this.l=c.Ub||null,this.j=c.eb||!1}N(Mr,rs),Mr.prototype.g=function(){return new ds(this.l,this.j)},Mr.prototype.i=(function(c){return function(){return c}})({});function ds(c,y){_t.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ds,_t),n=ds.prototype,n.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Xn(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ru(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ru(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Yn(this):Xn(this),this.readyState==3&&Ru(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Yn(this))},n.Qa=function(c){this.g&&(this.response=c,Yn(this))},n.ga=function(){this.g&&Yn(this)};function Yn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Xn(c)}n.setRequestHeader=function(c,y){this.u.append(c,y)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,c.push(T[0]+": "+T[1]),T=y.next();return c.join(`\r
`)};function Xn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jr(c){let y="";return Z(c,function(T,P){y+=P,y+=":",y+=T,y+=`\r
`}),y}function yi(c,y,T){e:{for(P in T){var P=!1;break e}P=!0}P||(T=jr(T),typeof c=="string"?T!=null&&encodeURIComponent(String(T)):Ge(c,y,T))}function tt(c){_t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(tt,_t);var yd=/^https?$/i,Wa=["POST","PUT"];n=tt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,y,T,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qn.g(),this.v=this.o?oo(this.o):oo(qn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Y){fs(this,Y);return}if(c=T||"",T=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var $ in P)T.set($,P[$]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const Y of P.keys())T.set(Y,P.get(Y));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(T.keys()).find(Y=>Y.toLowerCase()=="content-type"),$=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Wa,y,void 0))||P||$||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of T)this.g.setRequestHeader(Y,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_o(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){fs(this,Y)}};function fs(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,vo(c),_n(c)}function vo(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),_n(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_n(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ha(this):this.bb())},n.bb=function(){Ha(this)};function Ha(c){if(c.h&&typeof u<"u"&&(!c.v[1]||sn(c)!=4||c.Z()!=2)){if(c.u&&sn(c)==4)Ra(c.Ea,0,c);else if(wt(c,"readystatechange"),sn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var P;if(P=ue===0){var $=String(c.D).match(cs)[1]||null;!$&&h.self&&h.self.location&&($=h.self.location.protocol.slice(0,-1)),P=!yd.test($?$.toLowerCase():"")}T=P}if(T)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var Y=2<sn(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",vo(c)}}finally{_n(c)}}}}function _n(c,y){if(c.g){_o(c);const T=c.g,P=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||wt(c,"ready");try{T.onreadystatechange=P}catch{}}}function _o(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function sn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<sn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Da(y)}};function qa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wo(c){const y={};c=(c.g&&2<=sn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<c.length;P++){if(Q(c[P]))continue;var T=O(c[P]);const $=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Y=y[$]||[];y[$]=Y,Y.push(T)}b(y,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(c,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[c]||y}function Ka(c){this.Aa=0,this.i=[],this.j=new ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fr("baseRetryDelayMs",5e3,c),this.cb=fr("retryDelaySeedMs",1e4,c),this.Wa=fr("forwardChannelMaxRetries",2,c),this.wa=fr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new us(c&&c.concurrentRequestLimit),this.Da=new gd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ka.prototype,n.la=8,n.G=1,n.connect=function(c,y,T,P){ct(0),this.W=c,this.H=y||{},T&&P!==void 0&&(this.H.OSID=T,this.H.OAID=P),this.F=this.X,this.I=Du(this,null,this.W),pr(this)};function Mt(c){if(To(c),c.G==3){var y=c.U++,T=vn(c.I);if(Ge(T,"SID",c.K),Ge(T,"RID",y),Ge(T,"TYPE","terminate"),Or(c,T),y=new Kn(c,c.j,y),y.L=2,y.v=pi(vn(T)),T=!1,h.navigator&&h.navigator.sendBeacon)try{T=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&h.Image&&(new Image().src=y.v,T=!0),T||(y.g=Vu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Qe(y)}bu(c)}function Jn(c){c.g&&(Ga(c),c.g.cancel(),c.g=null)}function To(c){Jn(c),c.u&&(h.clearTimeout(c.u),c.u=null),So(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function pr(c){if(!yn(c.h)&&!c.s){c.s=!0;var y=c.Ga;Ae||le(),q||(Ae(),q=!0),de.add(y,c),c.B=0}}function vd(c,y){return wu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Wn(E(c.Ga,c,y),Nu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new Kn(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=x(Y),V(Y,this.S)):Y=this.S),this.m!==null||this.O||($.H=Y,Y=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var P=this.i[T];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(y+=P,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=vi(this,$,y),T=vn(this.I),Ge(T,"RID",c),Ge(T,"CVER",22),this.D&&Ge(T,"X-HTTP-Session-Id",this.D),Or(this,T),Y&&(this.O?y="headers="+encodeURIComponent(String(jr(Y)))+"&"+y:this.m&&yi(T,this.m,Y)),za(this.h,$),this.Ua&&Ge(T,"TYPE","init"),this.P?(Ge(T,"$req",y),Ge(T,"SID","null"),$.T=!0,po($,T,null)):po($,T,y),this.G=2}}else this.G==3&&(c?Eo(this,c):this.i.length==0||yn(this.h)||Eo(this))};function Eo(c,y){var T;y?T=y.l:T=c.U++;const P=vn(c.I);Ge(P,"SID",c.K),Ge(P,"RID",T),Ge(P,"AID",c.T),Or(c,P),c.m&&c.o&&yi(P,c.m,c.o),T=new Kn(c,c.j,T,c.B+1),c.m===null&&(T.H=c.o),y&&(c.i=y.D.concat(c.i)),y=vi(c,T,1e3),T.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),za(c.h,T),po(T,P,y)}function Or(c,y){c.H&&Z(c.H,function(T,P){Ge(y,P,T)}),c.l&&hi({},function(T,P){Ge(y,P,T)})}function vi(c,y,T){T=Math.min(c.i.length,T);var P=c.l?E(c.l.Na,c.l,c):null;e:{var $=c.i;let Y=-1;for(;;){const ue=["count="+T];Y==-1?0<T?(Y=$[0].g,ue.push("ofs="+Y)):Y=0:ue.push("ofs="+Y);let qe=!0;for(let Tt=0;Tt<T;Tt++){let Fe=$[Tt].g;const xt=$[Tt].map;if(Fe-=Y,0>Fe)Y=Math.max(0,$[Tt].g-100),qe=!1;else try{Cu(xt,ue,"req"+Fe+"_")}catch{P&&P(xt)}}if(qe){P=ue.join("&");break e}}}return c=c.i.splice(0,T),y.D=c,P}function ps(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;Ae||le(),q||(Ae(),q=!0),de.add(y,c),c.v=0}}function Io(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Wn(E(c.Fa,c),Nu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,ku(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Wn(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),Jn(this),ku(this))};function Ga(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function ku(c){c.g=new Kn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=vn(c.qa);Ge(y,"RID","rpc"),Ge(y,"SID",c.K),Ge(y,"AID",c.T),Ge(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ge(y,"TO",c.ja),Ge(y,"TYPE","xmlhttp"),Or(c,y),c.m&&c.o&&yi(y,c.m,c.o),c.L&&(c.g.I=c.L);var T=c.g;c=c.ia,T.L=1,T.v=pi(vn(y)),T.m=null,T.P=!0,Ua(T,c)}n.Za=function(){this.C!=null&&(this.C=null,Jn(this),Io(this),ct(19))};function So(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Po(c,y){var T=null;if(c.g==y){So(c),Ga(c),c.g=null;var P=2}else if(Xt(c.h,y))T=y.D,Tu(c.h,y),P=1;else return;if(c.G!=0){if(y.o)if(P==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var $=c.B;P=is(),wt(P,new uo(P,T)),pr(c)}else ps(c);else if($=y.s,$==3||$==0&&0<y.X||!(P==1&&vd(c,y)||P==2&&Io(c)))switch(T&&0<T.length&&(y=c.h,y.i=y.i.concat(T)),$){case 1:Lr(c,5);break;case 4:Lr(c,10);break;case 3:Lr(c,6);break;default:Lr(c,2)}}}function Nu(c,y){let T=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(T*=2),T*y}function Lr(c,y){if(c.j.info("Error code "+y),y==2){var T=E(c.fb,c),P=c.Xa;const $=!P;P=new Vr(P||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||hs(P,"https"),pi(P),$?md(P.toString(),T):Au(P.toString(),T)}else ct(2);c.G=0,c.l&&c.l.sa(y),bu(c),To(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function bu(c){if(c.G=0,c.ka=[],c.l){const y=Eu(c.h);(y.length!=0||c.i.length!=0)&&(C(c.ka,y),C(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function Du(c,y,T){var P=T instanceof Vr?vn(T):new Vr(T);if(P.g!="")y&&(P.g=y+"."+P.g),di(P,P.s);else{var $=h.location;P=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;var Y=new Vr(null);P&&hs(Y,P),y&&(Y.g=y),$&&di(Y,$),T&&(Y.l=T),P=Y}return T=c.D,y=c.ya,T&&y&&Ge(P,T,y),Ge(P,"VER",c.la),Or(c,P),P}function Vu(c,y,T){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new tt(new Mr({eb:T})):new tt(c.pa),y.Ha(c.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qa(){}n=Qa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xo(){}xo.prototype.g=function(c,y){return new Jt(c,y)};function Jt(c,y){_t.call(this),this.g=new Ka(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!Q(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Q(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new mr(this)}N(Jt,_t),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Mt(this.g)},Jt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var T={};T.__data__=c,c=T}else this.u&&(T={},T.__data__=ba(c),c=T);y.i.push(new _u(y.Ya++,c)),y.G==3&&pr(y)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Mt(this.g),delete this.g,Jt.aa.N.call(this)};function Mu(c){ur.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const T in y){c=T;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}N(Mu,ur);function ju(){lo.call(this),this.status=1}N(ju,lo);function mr(c){this.g=c}N(mr,Qa),mr.prototype.ua=function(){wt(this.g,"a")},mr.prototype.ta=function(c){wt(this.g,new Mu(c))},mr.prototype.sa=function(c){wt(this.g,new ju)},mr.prototype.ra=function(){wt(this.g,"b")},xo.prototype.createWebChannel=xo.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,zT=function(){return new xo},BT=function(){return is()},UT=cr,Rp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ho.NO_ERROR=0,ho.TIMEOUT=8,ho.HTTP_ERROR=6,Kc=ho,mu.COMPLETE="complete",FT=mu,ao.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Cl=ao,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,LT=tt}).apply(typeof Nc<"u"?Nc:typeof self<"u"?self:typeof window<"u"?window:{});const P_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new jh("@firebase/firestore");function wl(){return $s.logLevel}function ye(n,...e){if($s.logLevel<=Oe.DEBUG){const t=e.map(wm);$s.debug(`Firestore (${Ta}): ${n}`,...t)}}function ri(n,...e){if($s.logLevel<=Oe.ERROR){const t=e.map(wm);$s.error(`Firestore (${Ta}): ${n}`,...t)}}function la(n,...e){if($s.logLevel<=Oe.WARN){const t=e.map(wm);$s.warn(`Firestore (${Ta}): ${n}`,...t)}}function wm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n="Unexpected state"){const e=`FIRESTORE (${Ta}) INTERNAL ASSERTION FAILED: `+n;throw ri(e),new Error(e)}function Ke(n,e){n||Re()}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends $n{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gt.UNAUTHENTICATED)))}shutdown(){}}class ok{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ak{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let r=this.i;const o=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new $i,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},h=f=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $i)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string"),new $T(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new Gt(e)}}class lk{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uk{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new lk(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ck{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ke(this.o===void 0);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const o=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new ck(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=dk(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%e.length))}return r}}function We(n,e){return n<e?-1:n>e?1:0}function ua(n,e,t){return n.length===e.length&&n.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Pt(0,0))}static max(){return new ke(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Re(),r===void 0?r=e.length-t:r>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Wl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=e.get(o),u=t.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ut extends Wl{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const fk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Wl{construct(e,t,r){return new Ft(e,t,r)}static isValidIdentifier(e){return fk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new Ee(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ee(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,o+=2}else h==="`"?(u=!u,o++):h!=="."||u?(r+=h,o++):(a(),o++)}if(a(),u)throw new Ee(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(ut.fromString(e))}static fromName(e){return new Ie(ut.fromString(e).popFirst(5))}static empty(){return new Ie(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new ut(e.slice()))}}function pk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(r===1e9?new Pt(t+1,0):new Pt(t,r));return new Hi(o,Ie.empty(),e)}function mk(n){return new Hi(n.readTime,n.key,-1)}class Hi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hi(ke.min(),Ie.empty(),-1)}static max(){return new Hi(ke.max(),Ie.empty(),-1)}}function gk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==yk)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,r)=>{t(e)}))}static reject(e){return new ne(((t,r)=>{r(e)}))}static waitFor(e){return new ne(((t,r)=>{let o=0,a=0,u=!1;e.forEach((h=>{++o,h.next((()=>{++a,u&&a===o&&t()}),(f=>r(f)))})),u=!0,a===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next((o=>o?ne.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,a)=>{r.push(t.call(this,o,a))})),this.waitFor(r)}static mapArray(e,t){return new ne(((r,o)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next((_=>{u[p]=_,++h,h===a&&r(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new ne(((r,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):r()};a()}))}}function _k(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function iu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Tm.oe=-1;function Bh(n){return n==null}function uh(n){return n===0&&1/n==-1/0}function wk(n){return typeof n=="number"&&Number.isInteger(n)&&!uh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bc(this.root,e,this.comparator,!0)}}class bc{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Lt.RED,this.left=o??Lt.EMPTY,this.right=a??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Lt(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Lt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,r,o,a){return this}insert(e,t,r){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new A_(this.data.getIterator())}getIteratorFrom(e){return new A_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class A_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Pn([])}unionWith(e){let t=new Ut(Ft.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new qT("Invalid base64 string: "+a):a}})(e);return new Bt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new Bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const Tk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(n){if(Ke(!!n),typeof n=="string"){let e=0;const t=Tk.exec(n);if(Ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ws(n){return typeof n=="string"?Bt.fromBase64String(n):Bt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Im(n){const e=n.mapValue.fields.__previous_value__;return Em(e)?Im(e):e}function Hl(n){const e=qi(n.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t,r,o,a,u,h,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p}}class ql{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ql("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc={mapValue:{}};function Hs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Em(n)?4:Sk(n)?9007199254740991:Ik(n)?10:11:Re()}function Pr(n,e){if(n===e)return!0;const t=Hs(n);if(t!==Hs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hl(n).isEqual(Hl(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=qi(o.timestampValue),h=qi(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Ws(o.bytesValue).isEqual(Ws(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return dt(o.geoPointValue.latitude)===dt(a.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return dt(o.integerValue)===dt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=dt(o.doubleValue),h=dt(a.doubleValue);return u===h?uh(u)===uh(h):isNaN(u)&&isNaN(h)}return!1})(n,e);case 9:return ua(n.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},h=a.mapValue.fields||{};if(x_(u)!==x_(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Pr(u[f],h[f])))return!1;return!0})(n,e);default:return Re()}}function Kl(n,e){return(n.values||[]).find((t=>Pr(t,e)))!==void 0}function ca(n,e){if(n===e)return 0;const t=Hs(n),r=Hs(e);if(t!==r)return We(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const h=dt(a.integerValue||a.doubleValue),f=dt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return C_(n.timestampValue,e.timestampValue);case 4:return C_(Hl(n),Hl(e));case 5:return We(n.stringValue,e.stringValue);case 6:return(function(a,u){const h=Ws(a),f=Ws(u);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const h=a.split("/"),f=u.split("/");for(let p=0;p<h.length&&p<f.length;p++){const _=We(h[p],f[p]);if(_!==0)return _}return We(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const h=We(dt(a.latitude),dt(u.latitude));return h!==0?h:We(dt(a.longitude),dt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return R_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var h,f,p,_;const w=a.fields||{},E=u.fields||{},S=(h=w.value)===null||h===void 0?void 0:h.arrayValue,N=(f=E.value)===null||f===void 0?void 0:f.arrayValue,D=We(((p=S?.values)===null||p===void 0?void 0:p.length)||0,((_=N?.values)===null||_===void 0?void 0:_.length)||0);return D!==0?D:R_(S,N)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Dc.mapValue&&u===Dc.mapValue)return 0;if(a===Dc.mapValue)return 1;if(u===Dc.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=u.fields||{},_=Object.keys(p);f.sort(),_.sort();for(let w=0;w<f.length&&w<_.length;++w){const E=We(f[w],_[w]);if(E!==0)return E;const S=ca(h[f[w]],p[_[w]]);if(S!==0)return S}return We(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Re()}}function C_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=qi(n),r=qi(e),o=We(t.seconds,r.seconds);return o!==0?o:We(t.nanos,r.nanos)}function R_(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=ca(t[o],r[o]);if(a)return a}return We(t.length,r.length)}function ha(n){return kp(n)}function kp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=qi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ws(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=kp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of r)a?a=!1:o+=",",o+=`${u}:${kp(t.fields[u])}`;return o+"}"})(n.mapValue):Re()}function Np(n){return!!n&&"integerValue"in n}function Sm(n){return!!n&&"arrayValue"in n}function k_(n){return!!n&&"nullValue"in n}function N_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gc(n){return!!n&&"mapValue"in n}function Ik(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Dl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Dl(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dl(t)}setAll(e){let t=Ft.emptyPath(),r={},o=[];e.forEach(((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,o),r={},o=[],t=h.popLast()}u?r[h.lastSegment()]=Dl(u):o.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());Gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Gc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Xs(t,((o,a)=>e[o]=a));for(const o of r)delete e[o]}clone(){return new dn(Dl(this.value))}}function KT(n){const e=[];return Xs(n.fields,((t,r)=>{const o=new Ft([t]);if(Gc(r)){const a=KT(r.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t,r,o,a,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Qt(e,0,ke.min(),ke.min(),ke.min(),dn.empty(),0)}static newFoundDocument(e,t,r,o){return new Qt(e,1,t,ke.min(),r,o,0)}static newNoDocument(e,t){return new Qt(e,2,t,ke.min(),ke.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new Qt(e,3,t,ke.min(),ke.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t){this.position=e,this.inclusive=t}}function b_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?r=Ie.comparator(Ie.fromName(u.referenceValue),t.key):r=ca(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function D_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{}class St extends GT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ak(e,t,r):t==="array-contains"?new kk(e,r):t==="in"?new Nk(e,r):t==="not-in"?new bk(e,r):t==="array-contains-any"?new Dk(e,r):new St(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ck(e,r):new Rk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ca(t,this.value)):t!==null&&Hs(this.value)===Hs(t)&&this.matchesComparison(ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends GT{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new xr(e,t)}matches(e){return QT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function QT(n){return n.op==="and"}function YT(n){return xk(n)&&QT(n)}function xk(n){for(const e of n.filters)if(e instanceof xr)return!1;return!0}function bp(n){if(n instanceof St)return n.field.canonicalString()+n.op.toString()+ha(n.value);if(YT(n))return n.filters.map((e=>bp(e))).join(",");{const e=n.filters.map((t=>bp(t))).join(",");return`${n.op}(${e})`}}function XT(n,e){return n instanceof St?(function(r,o){return o instanceof St&&r.op===o.op&&r.field.isEqual(o.field)&&Pr(r.value,o.value)})(n,e):n instanceof xr?(function(r,o){return o instanceof xr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((a,u,h)=>a&&XT(u,o.filters[h])),!0):!1})(n,e):void Re()}function JT(n){return n instanceof St?(function(t){return`${t.field.canonicalString()} ${t.op} ${ha(t.value)}`})(n):n instanceof xr?(function(t){return t.op.toString()+" {"+t.getFilters().map(JT).join(" ,")+"}"})(n):"Filter"}class Ak extends St{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ck extends St{constructor(e,t){super(e,"in",t),this.keys=ZT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Rk extends St{constructor(e,t){super(e,"not-in",t),this.keys=ZT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ZT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Ie.fromName(r.referenceValue)))}class kk extends St{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sm(t)&&Kl(t.arrayValue,this.value)}}class Nk extends St{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Kl(this.value.arrayValue,t)}}class bk extends St{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Kl(this.value.arrayValue,t)}}class Dk extends St{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Kl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t=null,r=[],o=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=u,this.endAt=h,this.ue=null}}function V_(n,e=null,t=[],r=[],o=null,a=null,u=null){return new Vk(n,e,t,r,o,a,u)}function Pm(n){const e=Ne(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>bp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ha(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ha(r))).join(",")),e.ue=t}return e.ue}function xm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Pk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!D_(n.startAt,e.startAt)&&D_(n.endAt,e.endAt)}function Dp(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t=null,r=[],o=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Mk(n,e,t,r,o,a,u,h){return new zh(n,e,t,r,o,a,u,h)}function Am(n){return new zh(n)}function M_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jk(n){return n.collectionGroup!==null}function Vl(n){const e=Ne(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Ut(Ft.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new hh(a,r))})),t.has(Ft.keyField().canonicalString())||e.ce.push(new hh(Ft.keyField(),r))}return e.ce}function Tr(n){const e=Ne(n);return e.le||(e.le=Ok(e,Vl(n))),e.le}function Ok(n,e){if(n.limitType==="F")return V_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new hh(o.field,a)}));const t=n.endAt?new ch(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ch(n.startAt.position,n.startAt.inclusive):null;return V_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Vp(n,e,t){return new zh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $h(n,e){return xm(Tr(n),Tr(e))&&n.limitType===e.limitType}function eE(n){return`${Pm(Tr(n))}|lt:${n.limitType}`}function Qo(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>JT(o))).join(", ")}]`),Bh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>ha(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>ha(o))).join(",")),`Target(${r})`})(Tr(n))}; limitType=${n.limitType})`}function Wh(n,e){return e.isFoundDocument()&&(function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ie.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,o){for(const a of Vl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(r,o){return!(r.startAt&&!(function(u,h,f){const p=b_(u,h,f);return u.inclusive?p<=0:p<0})(r.startAt,Vl(r),o)||r.endAt&&!(function(u,h,f){const p=b_(u,h,f);return u.inclusive?p>=0:p>0})(r.endAt,Vl(r),o))})(n,e)}function Lk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tE(n){return(e,t)=>{let r=!1;for(const o of Vl(n)){const a=Fk(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function Fk(n,e,t){const r=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(a,u,h){const f=u.data.field(a),p=h.data.field(a);return f!==null&&p!==null?ca(f,p):Re()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,((t,r)=>{for(const[o,a]of r)e(o,a)}))}isEmpty(){return HT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=new at(Ie.comparator);function ii(){return Uk}const nE=new at(Ie.comparator);function Rl(...n){let e=nE;for(const t of n)e=e.insert(t.key,t);return e}function rE(n){let e=nE;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ms(){return Ml()}function iE(){return Ml()}function Ml(){return new Ea((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Bk=new at(Ie.comparator),zk=new Ut(Ie.comparator);function Me(...n){let e=zk;for(const t of n)e=e.add(t);return e}const $k=new Ut(We);function Wk(){return $k}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uh(e)?"-0":e}}function sE(n){return{integerValue:""+n}}function Hk(n,e){return wk(e)?sE(e):Cm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this._=void 0}}function qk(n,e,t){return n instanceof dh?(function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Em(a)&&(a=Im(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(t,e):n instanceof da?aE(n,e):n instanceof fa?lE(n,e):(function(o,a){const u=oE(o,a),h=j_(u)+j_(o.Pe);return Np(u)&&Np(o.Pe)?sE(h):Cm(o.serializer,h)})(n,e)}function Kk(n,e,t){return n instanceof da?aE(n,e):n instanceof fa?lE(n,e):t}function oE(n,e){return n instanceof fh?(function(r){return Np(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class dh extends Hh{}class da extends Hh{constructor(e){super(),this.elements=e}}function aE(n,e){const t=uE(e);for(const r of n.elements)t.some((o=>Pr(o,r)))||t.push(r);return{arrayValue:{values:t}}}class fa extends Hh{constructor(e){super(),this.elements=e}}function lE(n,e){let t=uE(e);for(const r of n.elements)t=t.filter((o=>!Pr(o,r)));return{arrayValue:{values:t}}}class fh extends Hh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function j_(n){return dt(n.integerValue||n.doubleValue)}function uE(n){return Sm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t){this.field=e,this.transform=t}}function Gk(n,e){return n.field.isEqual(e.field)&&(function(r,o){return r instanceof da&&o instanceof da||r instanceof fa&&o instanceof fa?ua(r.elements,o.elements,Pr):r instanceof fh&&o instanceof fh?Pr(r.Pe,o.Pe):r instanceof dh&&o instanceof dh})(n.transform,e.transform)}class Qk{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qh{}function hE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fE(n.key,Er.none()):new su(n.key,n.data,Er.none());{const t=n.data,r=dn.empty();let o=new Ut(Ft.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),o=o.add(a)}return new Xi(n.key,r,new Pn(o.toArray()),Er.none())}}function Yk(n,e,t){n instanceof su?(function(o,a,u){const h=o.value.clone(),f=L_(o.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Xi?(function(o,a,u){if(!Qc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const h=L_(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(dE(o)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function jl(n,e,t,r){return n instanceof su?(function(a,u,h,f){if(!Qc(a.precondition,u))return h;const p=a.value.clone(),_=F_(a.fieldTransforms,f,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Xi?(function(a,u,h,f){if(!Qc(a.precondition,u))return h;const p=F_(a.fieldTransforms,f,u),_=u.data;return _.setAll(dE(a)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,u,h){return Qc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h})(n,e,t)}function Xk(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=oE(r.transform,o||null);a!=null&&(t===null&&(t=dn.empty()),t.set(r.field,a))}return t||null}function O_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ua(r,o,((a,u)=>Gk(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class su extends qh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Xi extends qh{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function dE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function L_(n,e,t){const r=new Map;Ke(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,h=e.data.field(a.field);r.set(a.field,Kk(u,h,t[o]))}return r}function F_(n,e,t){const r=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);r.set(o.field,qk(a,u,e))}return r}class fE extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jk extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&Yk(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=jl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=jl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=iE();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=t.has(o.key)?null:h;const f=hE(u,h);f!==null&&r.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(ke.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Me())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,((t,r)=>O_(t,r)))&&ua(this.baseMutations,e.baseMutations,((t,r)=>O_(t,r)))}}class Rm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ke(e.mutations.length===r.length);let o=(function(){return Bk})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,r[u].version);return new Rm(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Ue;function nN(n){switch(n){default:return Re();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function pE(n){if(n===void 0)return ri("GRPC error has no .code"),ie.UNKNOWN;switch(n){case gt.OK:return ie.OK;case gt.CANCELLED:return ie.CANCELLED;case gt.UNKNOWN:return ie.UNKNOWN;case gt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case gt.INTERNAL:return ie.INTERNAL;case gt.UNAVAILABLE:return ie.UNAVAILABLE;case gt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case gt.NOT_FOUND:return ie.NOT_FOUND;case gt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case gt.ABORTED:return ie.ABORTED;case gt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case gt.DATA_LOSS:return ie.DATA_LOSS;default:return Re()}}(Ue=gt||(gt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new Ls([4294967295,4294967295],0);function U_(n){const e=rN().encode(n),t=new OT;return t.update(e),new Uint8Array(t.digest())}function B_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ls([t,r],0),new Ls([o,a],0)]}class km{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new kl(`Invalid padding: ${t}`);if(r<0)throw new kl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new kl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ls.fromNumber(this.Ie)}Ee(e,t,r){let o=e.add(t.multiply(Ls.fromNumber(r)));return o.compare(iN)===1&&(o=new Ls([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=U_(e),[r,o]=B_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,o,a);if(!this.de(u))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new km(a,o,t);return r.forEach((h=>u.insert(h))),u}insert(e){if(this.Ie===0)return;const t=U_(e),[r,o]=B_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Kh(ke.min(),o,new at(We),ii(),Me())}}class ou{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ou(r,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t,r,o){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=o}}class mE{constructor(e,t){this.targetId=e,this.me=t}}class gE{constructor(e,t,r=Bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class z_{constructor(){this.fe=0,this.ge=W_(),this.pe=Bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),t=Me(),r=Me();return this.ge.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Re()}})),new ou(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=W_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class sN{constructor(e){this.Le=e,this.Be=new Map,this.ke=ii(),this.qe=$_(),this.Qe=new at(We)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Re()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,r=e.me.count,o=this.Je(t);if(o){const a=o.target;if(Dp(a))if(r===0){const u=new Ie(a.path);this.Ue(t,u,Qt.newNoDocument(u,ke.min()))}else Ke(r===1);else{const u=this.Ye(t);if(u!==r){const h=this.Ze(e),f=h?this.Xe(h,e,u):1;if(f!==0){this.je(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,p)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let u,h;try{u=Ws(r).toUint8Array()}catch(f){if(f instanceof qT)return la("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new km(u,o,a)}catch(f){return la(f instanceof kl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let o=0;return r.forEach((a=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,a,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((a,u)=>{const h=this.Je(u);if(h){if(a.current&&Dp(h.target)){const f=new Ie(h.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,Qt.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}}));let r=Me();this.qe.forEach(((a,u)=>{let h=!0;u.forEachWhile((f=>{const p=this.Je(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const o=new Kh(e,t,this.Qe,this.ke,r);return this.ke=ii(),this.qe=$_(),this.Qe=new at(We),o}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new z_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ut(We),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new z_),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function $_(){return new at(Ie.comparator)}function W_(){return new at(Ie.comparator)}const oN={asc:"ASCENDING",desc:"DESCENDING"},aN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lN={and:"AND",or:"OR"};class uN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mp(n,e){return n.useProto3Json||Bh(e)?e:{value:e}}function ph(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cN(n,e){return ph(n,e.toTimestamp())}function Ir(n){return Ke(!!n),ke.fromTimestamp((function(t){const r=qi(t);return new Pt(r.seconds,r.nanos)})(n))}function Nm(n,e){return jp(n,e).canonicalString()}function jp(n,e){const t=(function(o){return new ut(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function vE(n){const e=ut.fromString(n);return Ke(IE(e)),e}function Op(n,e){return Nm(n.databaseId,e.path)}function Xf(n,e){const t=vE(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(wE(t))}function _E(n,e){return Nm(n.databaseId,e)}function hN(n){const e=vE(n);return e.length===4?ut.emptyPath():wE(e)}function Lp(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wE(n){return Ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function H_(n,e,t){return{name:Op(n,e),fields:t.value.mapValue.fields}}function dN(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Re()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(p,_){return p.useProto3Json?(Ke(_===void 0||typeof _=="string"),Bt.fromBase64String(_||"")):(Ke(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Bt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&(function(p){const _=p.code===void 0?ie.UNKNOWN:pE(p.code);return new Ee(_,p.message||"")})(u);t=new gE(r,o,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Xf(n,r.document.name),a=Ir(r.document.updateTime),u=r.document.createTime?Ir(r.document.createTime):ke.min(),h=new dn({mapValue:{fields:r.document.fields}}),f=Qt.newFoundDocument(o,a,u,h),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Yc(p,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Xf(n,r.document),a=r.readTime?Ir(r.readTime):ke.min(),u=Qt.newNoDocument(o,a),h=r.removedTargetIds||[];t=new Yc([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Xf(n,r.document),a=r.removedTargetIds||[];t=new Yc([],a,o,null)}else{if(!("filter"in e))return Re();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,u=new tN(o,a),h=r.targetId;t=new mE(h,u)}}return t}function fN(n,e){let t;if(e instanceof su)t={update:H_(n,e.key,e.value)};else if(e instanceof fE)t={delete:Op(n,e.key)};else if(e instanceof Xi)t={update:H_(n,e.key,e.data),updateMask:EN(e.fieldMask)};else{if(!(e instanceof Jk))return Re();t={verify:Op(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const h=u.transform;if(h instanceof dh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof da)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof fa)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof fh)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw Re()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:cN(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re()})(n,e.precondition)),t}function pN(n,e){return n&&n.length>0?(Ke(e!==void 0),n.map((t=>(function(o,a){let u=o.updateTime?Ir(o.updateTime):Ir(a);return u.isEqual(ke.min())&&(u=Ir(a)),new Qk(u,o.transformResults||[])})(t,e)))):[]}function mN(n,e){return{documents:[_E(n,e.path)]}}function gN(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_E(n,o);const a=(function(p){if(p.length!==0)return EE(xr.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(p){if(p.length!==0)return p.map((_=>(function(E){return{field:Yo(E.field),direction:_N(E.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Mp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{_t:t,parent:o}}function yN(n){let e=hN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ke(r===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(w){const E=TE(w);return E instanceof xr&&YT(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((E=>(function(N){return new hh(Xo(N.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(E)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let E;return E=typeof w=="object"?w.value:w,Bh(E)?null:E})(t.limit));let f=null;t.startAt&&(f=(function(w){const E=!!w.before,S=w.values||[];return new ch(S,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(w){const E=!w.before,S=w.values||[];return new ch(S,E)})(t.endAt)),Mk(e,o,u,a,h,"F",f,p)}function vN(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Xo(t.unaryFilter.field);return St.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Xo(t.unaryFilter.field);return St.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Xo(t.unaryFilter.field);return St.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Xo(t.unaryFilter.field);return St.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Re()}})(n):n.fieldFilter!==void 0?(function(t){return St.create(Xo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xr.create(t.compositeFilter.filters.map((r=>TE(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}})(t.compositeFilter.op))})(n):Re()}function _N(n){return oN[n]}function wN(n){return aN[n]}function TN(n){return lN[n]}function Yo(n){return{fieldPath:n.canonicalString()}}function Xo(n){return Ft.fromServerFormat(n.fieldPath)}function EE(n){return n instanceof St?(function(t){if(t.op==="=="){if(N_(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NAN"}};if(k_(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(N_(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NAN"}};if(k_(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(t.field),op:wN(t.op),value:t.value}}})(n):n instanceof xr?(function(t){const r=t.getFilters().map((o=>EE(o)));return r.length===1?r[0]:{compositeFilter:{op:TN(t.op),filters:r}}})(n):Re()}function EN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function IE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t,r,o,a=ke.min(),u=ke.min(),h=Bt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.ct=e}}function SN(n){const e=yN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.un=new xN}addToCollectionParentIndex(e,t){return this.un.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Hi.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class xN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Ut(ut.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ut(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pa(0)}static kn(){return new pa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.changes=new Ea((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&jl(r.mutation,o,Pn.empty(),Pt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Me()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Me()){const o=Ms();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((a=>{let u=Rl();return a.forEach(((h,f)=>{u=u.insert(h,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ms();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Me())))}populateOverlays(e,t,r){const o=[];return r.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,h)=>{t.set(u,h)}))}))}computeViews(e,t,r,o){let a=ii();const u=Ml(),h=(function(){return Ml()})();return t.forEach(((f,p)=>{const _=r.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof Xi)?a=a.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),jl(_.mutation,p,_.mutation.getFieldMask(),Pt.now())):u.set(p.key,Pn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((p,_)=>u.set(p,_))),t.forEach(((p,_)=>{var w;return h.set(p,new CN(_,(w=u.get(p))!==null&&w!==void 0?w:null))})),h)))}recalculateAndSaveOverlays(e,t){const r=Ml();let o=new at(((u,h)=>u-h)),a=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const h of u)h.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let _=r.get(f)||Pn.empty();_=h.applyToLocalView(p,_),r.set(f,_);const w=(o.get(h.batchId)||Me()).add(f);o=o.insert(h.batchId,w)}))})).next((()=>{const u=[],h=o.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,_=f.value,w=iE();_.forEach((E=>{if(!a.has(E)){const S=hE(t.get(E),r.get(E));S!==null&&w.set(E,S),a=a.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,w))}return ne.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):ne.resolve(Ms());let h=-1,f=a;return u.next((p=>ne.forEach(p,((_,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(_)?ne.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{f=f.insert(_,E)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,f,p,Me()))).next((_=>({batchId:h,changes:rE(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((r=>{let o=Rl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let u=Rl();return this.indexManager.getCollectionParents(e,a).next((h=>ne.forEach(h,(f=>{const p=(function(w,E){return new zh(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((_=>{_.forEach(((w,E)=>{u=u.insert(w,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o)))).next((u=>{a.forEach(((f,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,Qt.newInvalidDocument(_)))}));let h=Rl();return u.forEach(((f,p)=>{const _=a.get(f);_!==void 0&&jl(_.mutation,p,Pn.empty(),Pt.now()),Wh(t,p)&&(h=h.insert(f,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ne.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ir(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:SN(o.bundledQuery),readTime:Ir(o.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.overlays=new at(Ie.comparator),this.Ir=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ms();return ne.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&r.set(o,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,a)=>{this.ht(e,t,a)})),ne.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ir.get(r);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const o=Ms(),a=t.length+1,u=new Ie(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&o.set(f.getKey(),f)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new at(((p,_)=>p-_));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=a.get(p.largestBatchId);_===null&&(_=Ms(),a=a.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=Ms(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,_)=>h.set(p,_))),!(h.size()>=o)););return ne.resolve(h)}ht(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const u=this.Ir.get(o.largestBatchId).delete(r.key);this.Ir.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new eN(t,r));let a=this.Ir.get(t);a===void 0&&(a=Me(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(){this.Tr=new Ut(bt.Er),this.dr=new Ut(bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new bt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new bt(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new Ie(new ut([])),r=new bt(t,e),o=new bt(t,e+1),a=[];return this.dr.forEachInRange([r,o],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ie(new ut([])),r=new bt(t,e),o=new bt(t,e+1);let a=Me();return this.dr.forEachInRange([r,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new bt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class bt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ie.comparator(e.key,t.key)||We(e.wr,t.wr)}static Ar(e,t){return We(e.wr,t.wr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ut(bt.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Zk(a,t,r,o);this.mutationQueue.push(u);for(const h of o)this.br=this.br.add(new bt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.vr(r),a=o<0?0:o;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new bt(t,0),o=new bt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,o],(u=>{const h=this.Dr(u.wr);a.push(h)})),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(We);return t.forEach((o=>{const a=new bt(o,0),u=new bt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(h=>{r=r.add(h.wr)}))})),ne.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;Ie.isDocumentKey(a)||(a=a.child(""));const u=new bt(new Ie(a),0);let h=new Ut(We);return this.br.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(h=h.add(f.wr)),!0)}),u),ne.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach((r=>{const o=this.Dr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ne.forEach(t.mutations,(o=>{const a=new bt(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new bt(t,0),o=this.br.firstAfterOrEqual(r);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.Mr=e,this.docs=(function(){return new at(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,u=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(t))}getEntries(e,t){let r=ii();return t.forEach((o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Qt.newInvalidDocument(o))})),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=ii();const u=t.path,h=new Ie(u.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:_}}=f.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||gk(mk(_),r)<=0||(o.has(_.key)||Wh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,r,o){Re()}Or(e,t){return ne.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new MN(this)}getSize(e){return ne.resolve(this.size)}}class MN extends AN{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(r)})),ne.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.persistence=e,this.Nr=new Ea((t=>Pm(t)),xm),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bm,this.targetCount=0,this.kr=pa.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),ne.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new pa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Kn(t),ne.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.Nr.forEach(((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),ne.waitFor(a).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Tm(0),this.Kr=!1,this.Kr=!0,this.$r=new bN,this.referenceDelegate=e(this),this.Ur=new jN(this),this.indexManager=new PN,this.remoteDocumentCache=(function(o){return new VN(o)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new IN(t),this.Gr=new kN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new DN(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const o=new LN(this.Qr.next());return this.referenceDelegate.zr(),r(o).next((a=>this.referenceDelegate.jr(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Hr(e,t){return ne.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class LN extends vk{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.Jr=new bm,this.Yr=null}static Zr(e){return new Dm(e)}get Xr(){if(this.Yr)return this.Yr;throw Re()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,(r=>{const o=Ie.fromPath(r);return this.ei(e,o).next((a=>{a||t.removeEntry(o,ke.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return ne.or([()=>ne.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=o}static Wi(e,t){let r=Me(),o=Me();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Vm(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Tx()?8:_k(Yt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.Yi(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,t,o,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new FN;return this.Xi(e,t,u).next((h=>{if(a.result=h,this.zi)return this.es(e,t,u,h.size)}))})).next((()=>a.result))}es(e,t,r,o){return r.documentReadCount<this.ji?(wl()<=Oe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):(wl()<=Oe.DEBUG&&ye("QueryEngine","Query:",Qo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Hi*o?(wl()<=Oe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(t))):ne.resolve())}Yi(e,t){if(M_(t))return ne.resolve(null);let r=Tr(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Vp(t,null,"F"),r=Tr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Me(...a);return this.Ji.getDocuments(e,u).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.ts(t,h);return this.ns(t,p,u,f.readTime)?this.Yi(e,Vp(t,null,"F")):this.rs(e,p,t,f)}))))})))))}Zi(e,t,r,o){return M_(t)||o.isEqual(ke.min())?ne.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const u=this.ts(t,a);return this.ns(t,u,r,o)?ne.resolve(null):(wl()<=Oe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Qo(t)),this.rs(e,u,t,pk(o,-1)).next((h=>h)))}))}ts(e,t){let r=new Ut(tE(e));return t.forEach(((o,a)=>{Wh(e,a)&&(r=r.add(a))})),r}ns(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Xi(e,t,r){return wl()<=Oe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Hi.min(),r)}rs(e,t,r,o){return this.Ji.getDocumentsMatchingQuery(e,r,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t,r,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new at(We),this._s=new Ea((a=>Pm(a)),xm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function zN(n,e,t,r){return new BN(n,e,t,r)}async function SE(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((a=>(o=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],h=[];let f=Me();for(const p of o){u.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}for(const p of a){h.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((p=>({hs:p,removedBatchIds:u,addedBatchIds:h})))}))}))}function $N(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(h,f,p,_){const w=p.batch,E=w.keys();let S=ne.resolve();return E.forEach((N=>{S=S.next((()=>_.getEntry(f,N))).next((D=>{const C=p.docVersions.get(N);Ke(C!==null),D.version.compareTo(C)<0&&(w.applyToRemoteDocument(D,p),D.isValidDocument()&&(D.setReadTime(p.commitVersion),_.addEntry(D)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(f,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Me();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function PE(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function WN(n,e){const t=Ne(n),r=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const h=[];e.targetChanges.forEach(((_,w)=>{const E=o.get(w);if(!E)return;h.push(t.Ur.removeMatchingKeys(a,_.removedDocuments,w).next((()=>t.Ur.addMatchingKeys(a,_.addedDocuments,w))));let S=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?S=S.withResumeToken(Bt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,r)),o=o.insert(w,S),(function(D,C,G){return D.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(E,S,_)&&h.push(t.Ur.updateTargetData(a,S))}));let f=ii(),p=Me();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(HN(a,u,e.documentUpdates).next((_=>{f=_.Ps,p=_.Is}))),!r.isEqual(ke.min())){const _=t.Ur.getLastRemoteSnapshotVersion(a).next((w=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(_)}return ne.waitFor(h).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,p))).next((()=>f))})).then((a=>(t.os=o,a)))}function HN(n,e,t){let r=Me(),o=Me();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=ii();return t.forEach(((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(h)),f.isNoDocument()&&f.version.isEqual(ke.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):ye("LocalStore","Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)})),{Ps:u,Is:o}}))}function qN(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function KN(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Ur.getTargetData(r,e).next((a=>a?(o=a,ne.resolve(o)):t.Ur.allocateTargetId(r).next((u=>(o=new Ui(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.os.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function Fp(n,e,t){const r=Ne(n),o=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!iu(u))throw u;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(o.target)}function q_(n,e,t){const r=Ne(n);let o=ke.min(),a=Me();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,p,_){const w=Ne(f),E=w._s.get(_);return E!==void 0?ne.resolve(w.os.get(E)):w.Ur.getTargetData(p,_)})(r,u,Tr(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next((f=>{a=f}))})).next((()=>r.ss.getDocumentsMatchingQuery(u,e,t?o:ke.min(),t?a:Me()))).next((h=>(GN(r,Lk(e),h),{documents:h,Ts:a})))))}function GN(n,e,t){let r=n.us.get(e)||ke.min();t.forEach(((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.us.set(e,r)}class K_{constructor(){this.activeTargetIds=Wk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QN{constructor(){this.so=new K_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new K_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc=null;function Jf(){return Vc===null?Vc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vc++,"0x"+Vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class ZN extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${o}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}get Fo(){return!1}Mo(t,r,o,a,u){const h=Jf(),f=this.xo(t,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${h}:`,f,o);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,a,u),this.No(t,f,p,o).then((_=>(ye("RestConnection",`Received RPC '${t}' ${h}: `,_),_)),(_=>{throw la("RestConnection",`RPC '${t}' ${h} failed with error: `,_,"url: ",f,"request:",o),_}))}Lo(t,r,o,a,u,h){return this.Mo(t,r,o,a,u)}Oo(t,r,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ta})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,u)=>t[u]=a)),o&&o.headers.forEach(((a,u)=>t[u]=a))}xo(t,r){const o=XN[t];return`${this.Do}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,o){const a=Jf();return new Promise(((u,h)=>{const f=new LT;f.setWithCredentials(!0),f.listenOnce(FT.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Kc.NO_ERROR:const _=f.getResponseJson();ye(qt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case Kc.TIMEOUT:ye(qt,`RPC '${e}' ${a} timed out`),h(new Ee(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const w=f.getStatus();if(ye(qt,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E?.error;if(S&&S.status&&S.message){const N=(function(C){const G=C.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(G)>=0?G:ie.UNKNOWN})(S.status);h(new Ee(N,S.message))}else h(new Ee(ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new Ee(ie.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{ye(qt,`RPC '${e}' ${a} completed.`)}}));const p=JSON.stringify(o);ye(qt,`RPC '${e}' ${a} sending request:`,o),f.send(t,"POST",p,r,15)}))}Bo(e,t,r){const o=Jf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zT(),h=BT(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");ye(qt,`Creating RPC '${e}' stream ${o}: ${_}`,f);const w=u.createWebChannel(_,f);let E=!1,S=!1;const N=new JN({Io:C=>{S?ye(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,C):(E||(ye(qt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),ye(qt,`RPC '${e}' stream ${o} sending:`,C),w.send(C))},To:()=>w.close()}),D=(C,G,Q)=>{C.listen(G,(z=>{try{Q(z)}catch(J){setTimeout((()=>{throw J}),0)}}))};return D(w,Cl.EventType.OPEN,(()=>{S||(ye(qt,`RPC '${e}' stream ${o} transport opened.`),N.yo())})),D(w,Cl.EventType.CLOSE,(()=>{S||(S=!0,ye(qt,`RPC '${e}' stream ${o} transport closed`),N.So())})),D(w,Cl.EventType.ERROR,(C=>{S||(S=!0,la(qt,`RPC '${e}' stream ${o} transport errored:`,C),N.So(new Ee(ie.UNAVAILABLE,"The operation could not be completed")))})),D(w,Cl.EventType.MESSAGE,(C=>{var G;if(!S){const Q=C.data[0];Ke(!!Q);const z=Q,J=z.error||((G=z[0])===null||G===void 0?void 0:G.error);if(J){ye(qt,`RPC '${e}' stream ${o} received error:`,J);const ce=J.status;let Z=(function(A){const V=gt[A];if(V!==void 0)return pE(V)})(ce),b=J.message;Z===void 0&&(Z=ie.INTERNAL,b="Unknown error status: "+ce+" with message "+J.message),S=!0,N.So(new Ee(Z,b)),w.close()}else ye(qt,`RPC '${e}' stream ${o} received:`,Q),N.bo(Q)}})),D(h,UT.STAT_EVENT,(C=>{C.stat===Rp.PROXY?ye(qt,`RPC '${e}' stream ${o} detected buffering proxy`):C.stat===Rp.NOPROXY&&ye(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{N.wo()}),0),N}}function Zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(n){return new uN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,t,r=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-r);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t,r,o,a,u,h,f){this.ui=e,this.Ho=r,this.Jo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new xE(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(ri(t.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.Yo===t&&this.P_(r,o)}),(r=>{e((()=>{const o=new Ee(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(o)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{r((()=>this.I_(o)))})),this.stream.onMessage((o=>{r((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class e2 extends AE{constructor(e,t,r,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=dN(this.serializer,e),r=(function(a){if(!("targetChange"in a))return ke.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?Ir(u.readTime):ke.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Lp(this.serializer),t.addTarget=(function(a,u){let h;const f=u.target;if(h=Dp(f)?{documents:mN(a,f)}:{query:gN(a,f)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=yE(a,u.resumeToken);const p=Mp(a,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(ke.min())>0){h.readTime=ph(a,u.snapshotVersion.toTimestamp());const p=Mp(a,u.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const r=vN(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Lp(this.serializer),t.removeTarget=e,this.a_(t)}}class t2 extends AE{constructor(e,t,r,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=pN(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Lp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>fN(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new Ee(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,jp(t,r),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(ie.UNKNOWN,a.toString())}))}Lo(e,t,r,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Lo(e,jp(t,r),o,u,h,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(ie.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class r2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ri(t),this.D_=!1):ye("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{r.enqueueAndForget((async()=>{Js(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const p=Ne(f);p.L_.add(4),await au(p),p.q_.set("Unknown"),p.L_.delete(4),await Qh(p)})(this))}))})),this.q_=new r2(r,o)}}async function Qh(n){if(Js(n))for(const e of n.B_)await e(!0)}async function au(n){for(const e of n.B_)await e(!1)}function CE(n,e){const t=Ne(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Lm(t)?Om(t):Ia(t).r_()&&jm(t,e))}function Mm(n,e){const t=Ne(n),r=Ia(t);t.N_.delete(e),r.r_()&&RE(t,e),t.N_.size===0&&(r.r_()?r.o_():Js(t)&&t.q_.set("Unknown"))}function jm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ia(n).A_(e)}function RE(n,e){n.Q_.xe(e),Ia(n).R_(e)}function Om(n){n.Q_=new sN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ia(n).start(),n.q_.v_()}function Lm(n){return Js(n)&&!Ia(n).n_()&&n.N_.size>0}function Js(n){return Ne(n).L_.size===0}function kE(n){n.Q_=void 0}async function s2(n){n.q_.set("Online")}async function o2(n){n.N_.forEach(((e,t)=>{jm(n,e)}))}async function a2(n,e){kE(n),Lm(n)?(n.q_.M_(e),Om(n)):n.q_.set("Unknown")}async function l2(n,e,t){if(n.q_.set("Online"),e instanceof gE&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const h of a.targetIds)o.N_.has(h)&&(await o.remoteSyncer.rejectListen(h,u),o.N_.delete(h),o.Q_.removeTarget(h))})(n,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mh(n,r)}else if(e instanceof Yc?n.Q_.Ke(e):e instanceof mE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ke.min()))try{const r=await PE(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const h=a.Q_.rt(u);return h.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.N_.get(p);_&&a.N_.set(p,_.withResumeToken(f.resumeToken,u))}})),h.targetMismatches.forEach(((f,p)=>{const _=a.N_.get(f);if(!_)return;a.N_.set(f,_.withResumeToken(Bt.EMPTY_BYTE_STRING,_.snapshotVersion)),RE(a,f);const w=new Ui(_.target,f,p,_.sequenceNumber);jm(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),await mh(n,r)}}async function mh(n,e,t){if(!iu(e))throw e;n.L_.add(1),await au(n),n.q_.set("Offline"),t||(t=()=>PE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Qh(n)}))}function NE(n,e){return e().catch((t=>mh(n,t,e)))}async function Yh(n){const e=Ne(n),t=Ki(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;u2(e);)try{const o=await qN(e.localStore,r);if(o===null){e.O_.length===0&&t.o_();break}r=o.batchId,c2(e,o)}catch(o){await mh(e,o)}bE(e)&&DE(e)}function u2(n){return Js(n)&&n.O_.length<10}function c2(n,e){n.O_.push(e);const t=Ki(n);t.r_()&&t.V_&&t.m_(e.mutations)}function bE(n){return Js(n)&&!Ki(n).n_()&&n.O_.length>0}function DE(n){Ki(n).start()}async function h2(n){Ki(n).p_()}async function d2(n){const e=Ki(n);for(const t of n.O_)e.m_(t.mutations)}async function f2(n,e,t){const r=n.O_.shift(),o=Rm.from(r,e,t);await NE(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Yh(n)}async function p2(n,e){e&&Ki(n).V_&&await(async function(r,o){if((function(u){return nN(u)&&u!==ie.ABORTED})(o.code)){const a=r.O_.shift();Ki(r).s_(),await NE(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Yh(r)}})(n,e),bE(n)&&DE(n)}async function Q_(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=Js(t);t.L_.add(3),await au(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Qh(t)}async function m2(n,e){const t=Ne(n);e?(t.L_.delete(2),await Qh(t)):e||(t.L_.add(2),await au(t),t.q_.set("Unknown"))}function Ia(n){return n.K_||(n.K_=(function(t,r,o){const a=Ne(t);return a.w_(),new e2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:s2.bind(null,n),Ro:o2.bind(null,n),mo:a2.bind(null,n),d_:l2.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Lm(n)?Om(n):n.q_.set("Unknown")):(await n.K_.stop(),kE(n))}))),n.K_}function Ki(n){return n.U_||(n.U_=(function(t,r,o){const a=Ne(t);return a.w_(),new t2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:h2.bind(null,n),mo:p2.bind(null,n),f_:d2.bind(null,n),g_:f2.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await Yh(n)):(await n.U_.stop(),n.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const u=Date.now()+r,h=new Fm(e,t,u,o,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Um(n,e){if(ri("AsyncQueue",`${e}: ${n}`),iu(n))return new Ee(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ie.comparator(t.key,r.key):(t,r)=>Ie.comparator(t.key,r.key),this.keyedMap=Rl(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new oa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new oa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.W_=new at(Ie.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Re():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ma{constructor(e,t,r,o,a,u,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,a){const u=[];return t.forEach((h=>{u.push({type:0,doc:h})})),new ma(e,t,oa.emptySet(t),u,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class y2{constructor(){this.queries=X_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const o=Ne(t),a=o.queries;o.queries=X_(),a.forEach(((u,h)=>{for(const f of h.j_)f.onError(r)}))})(this,new Ee(ie.ABORTED,"Firestore shutting down"))}}function X_(){return new Ea((n=>eE(n)),$h)}async function v2(n,e){const t=Ne(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.H_()&&e.J_()&&(r=2):(a=new g2,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(o,!0);break;case 1:a.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const h=Um(u,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&Bm(t)}async function _2(n,e){const t=Ne(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?o=e.J_()?0:1:!a.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function w2(n,e){const t=Ne(n);let r=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const h of u.j_)h.X_(o)&&(r=!0);u.z_=o}}r&&Bm(t)}function T2(n,e,t){const r=Ne(n),o=r.queries.get(e);if(o)for(const a of o.j_)a.onError(t);r.queries.delete(e)}function Bm(n){n.Y_.forEach((e=>{e.next()}))}var Up,J_;(J_=Up||(Up={})).ea="default",J_.Cache="cache";class E2{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ma(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.key=e}}class ME{constructor(e){this.key=e}}class I2{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=tE(e),this.Ra=new oa(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Y_,o=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,h=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,w)=>{const E=o.get(_),S=Wh(this.query,w)?w:null,N=!!E&&this.mutatedKeys.has(E.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let C=!1;E&&S?E.data.isEqual(S.data)?N!==D&&(r.track({type:3,doc:S}),C=!0):this.ga(E,S)||(r.track({type:2,doc:S}),C=!0,(f&&this.Aa(S,f)>0||p&&this.Aa(S,p)<0)&&(h=!0)):!E&&S?(r.track({type:0,doc:S}),C=!0):E&&!S&&(r.track({type:1,doc:E}),C=!0,(f||p)&&(h=!0)),C&&(S?(u=u.add(S),a=D?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{Ra:u,fa:r,ns:h,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,w)=>(function(S,N){const D=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return D(S)-D(N)})(_.type,w.type)||this.Aa(_.doc,w.doc))),this.pa(r),o=o!=null&&o;const h=t&&!o?this.ya():[],f=this.da.size===0&&this.current&&!o?1:0,p=f!==this.Ea;return this.Ea=f,u.length!==0||p?{snapshot:new ma(this.query,e.Ra,a,u,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Y_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Me(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new ME(r))})),this.da.forEach((r=>{e.has(r)||t.push(new VE(r))})),t}ba(e){this.Ta=e.Ts,this.da=Me();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ma.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class S2{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P2{constructor(e){this.key=e,this.va=!1}}class x2{constructor(e,t,r,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Ea((h=>eE(h)),$h),this.Ma=new Map,this.xa=new Set,this.Oa=new at(Ie.comparator),this.Na=new Map,this.La=new bm,this.Ba={},this.ka=new Map,this.qa=pa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function A2(n,e,t=!0){const r=BE(n);let o;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Da()):o=await jE(r,e,t,!0),o}async function C2(n,e){const t=BE(n);await jE(t,e,!0,!1)}async function jE(n,e,t,r){const o=await KN(n.localStore,Tr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await R2(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&CE(n.remoteStore,o),h}async function R2(n,e,t,r,o){n.Ka=(w,E,S)=>(async function(D,C,G,Q){let z=C.view.ma(G);z.ns&&(z=await q_(D.localStore,C.query,!1).then((({documents:b})=>C.view.ma(b,z))));const J=Q&&Q.targetChanges.get(C.targetId),ce=Q&&Q.targetMismatches.get(C.targetId)!=null,Z=C.view.applyChanges(z,D.isPrimaryClient,J,ce);return e0(D,C.targetId,Z.wa),Z.snapshot})(n,w,E,S);const a=await q_(n.localStore,e,!0),u=new I2(e,a.Ts),h=u.ma(a.documents),f=ou.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),p=u.applyChanges(h,n.isPrimaryClient,f);e0(n,t,p.wa);const _=new S2(e,t,u);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),p.snapshot}async function k2(n,e,t){const r=Ne(n),o=r.Fa.get(e),a=r.Ma.get(o.targetId);if(a.length>1)return r.Ma.set(o.targetId,a.filter((u=>!$h(u,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Fp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Mm(r.remoteStore,o.targetId),Bp(r,o.targetId)})).catch(ru)):(Bp(r,o.targetId),await Fp(r.localStore,o.targetId,!0))}async function N2(n,e){const t=Ne(n),r=t.Fa.get(e),o=t.Ma.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mm(t.remoteStore,r.targetId))}async function b2(n,e,t){const r=F2(n);try{const o=await(function(u,h){const f=Ne(u),p=Pt.now(),_=h.reduce(((S,N)=>S.add(N.key)),Me());let w,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let N=ii(),D=Me();return f.cs.getEntries(S,_).next((C=>{N=C,N.forEach(((G,Q)=>{Q.isValidDocument()||(D=D.add(G))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,N))).next((C=>{w=C;const G=[];for(const Q of h){const z=Xk(Q,w.get(Q.key).overlayedDocument);z!=null&&G.push(new Xi(Q.key,z,KT(z.value.mapValue),Er.exists(!0)))}return f.mutationQueue.addMutationBatch(S,p,G,h)})).next((C=>{E=C;const G=C.applyToLocalDocumentSet(w,D);return f.documentOverlayCache.saveOverlays(S,C.batchId,G)}))})).then((()=>({batchId:E.batchId,changes:rE(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(u,h,f){let p=u.Ba[u.currentUser.toKey()];p||(p=new at(We)),p=p.insert(h,f),u.Ba[u.currentUser.toKey()]=p})(r,o.batchId,t),await lu(r,o.changes),await Yh(r.remoteStore)}catch(o){const a=Um(o,"Failed to persist write");t.reject(a)}}async function OE(n,e){const t=Ne(n);try{const r=await WN(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Na.get(a);u&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.va=!0:o.modifiedDocuments.size>0?Ke(u.va):o.removedDocuments.size>0&&(Ke(u.va),u.va=!1))})),await lu(t,r,e)}catch(r){await ru(r)}}function Z_(n,e,t){const r=Ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Fa.forEach(((a,u)=>{const h=u.view.Z_(e);h.snapshot&&o.push(h.snapshot)})),(function(u,h){const f=Ne(u);f.onlineState=h;let p=!1;f.queries.forEach(((_,w)=>{for(const E of w.j_)E.Z_(h)&&(p=!0)})),p&&Bm(f)})(r.eventManager,e),o.length&&r.Ca.d_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D2(n,e,t){const r=Ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Na.get(e),a=o&&o.key;if(a){let u=new at(Ie.comparator);u=u.insert(a,Qt.newNoDocument(a,ke.min()));const h=Me().add(a),f=new Kh(ke.min(),new Map,new at(We),u,h);await OE(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),zm(r)}else await Fp(r.localStore,e,!1).then((()=>Bp(r,e,t))).catch(ru)}async function V2(n,e){const t=Ne(n),r=e.batch.batchId;try{const o=await $N(t.localStore,e);FE(t,r,null),LE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await lu(t,o)}catch(o){await ru(o)}}async function M2(n,e,t){const r=Ne(n);try{const o=await(function(u,h){const f=Ne(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return f.mutationQueue.lookupMutationBatch(p,h).next((w=>(Ke(w!==null),_=w.keys(),f.mutationQueue.removeMutationBatch(p,w)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,_,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>f.localDocuments.getDocuments(p,_)))}))})(r.localStore,e);FE(r,e,t),LE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await lu(r,o)}catch(o){await ru(o)}}function LE(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function FE(n,e,t){const r=Ne(n);let o=r.Ba[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Ba[r.currentUser.toKey()]=o}}function Bp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||UE(n,r)}))}function UE(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Mm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),zm(n))}function e0(n,e,t){for(const r of t)r instanceof VE?(n.La.addReference(r.key,e),j2(n,r)):r instanceof ME?(ye("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||UE(n,r.key)):Re()}function j2(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ye("SyncEngine","New document in limbo: "+t),n.xa.add(r),zm(n))}function zm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ie(ut.fromString(e)),r=n.qa.next();n.Na.set(r,new P2(t)),n.Oa=n.Oa.insert(t,r),CE(n.remoteStore,new Ui(Tr(Am(t.path)),r,"TargetPurposeLimboResolution",Tm.oe))}}async function lu(n,e,t){const r=Ne(n),o=[],a=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach(((h,f)=>{u.push(r.Ka(f,e,t).then((p=>{var _;if((p||t)&&r.isPrimaryClient){const w=p?!p.fromCache:(_=t?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(p){o.push(p);const w=Vm.Wi(f.targetId,p);a.push(w)}})))})),await Promise.all(u),r.Ca.d_(o),await(async function(f,p){const _=Ne(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ne.forEach(p,(E=>ne.forEach(E.$i,(S=>_.persistence.referenceDelegate.addReference(w,E.targetId,S))).next((()=>ne.forEach(E.Ui,(S=>_.persistence.referenceDelegate.removeReference(w,E.targetId,S)))))))))}catch(w){if(!iu(w))throw w;ye("LocalStore","Failed to update sequence numbers: "+w)}for(const w of p){const E=w.targetId;if(!w.fromCache){const S=_.os.get(E),N=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(N);_.os=_.os.insert(E,D)}}})(r.localStore,a))}async function O2(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=await SE(t.localStore,e);t.currentUser=e,(function(a,u){a.ka.forEach((h=>{h.forEach((f=>{f.reject(new Ee(ie.CANCELLED,u))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lu(t,r.hs)}}function L2(n,e){const t=Ne(n),r=t.Na.get(e);if(r&&r.va)return Me().add(r.key);{let o=Me();const a=t.Ma.get(e);if(!a)return o;for(const u of a){const h=t.Fa.get(u);o=o.unionWith(h.view.Va)}return o}}function BE(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D2.bind(null,e),e.Ca.d_=w2.bind(null,e.eventManager),e.Ca.$a=T2.bind(null,e.eventManager),e}function F2(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M2.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return zN(this.persistence,new UN,e.initialUser,this.serializer)}Ga(e){return new ON(Dm.Zr,this.serializer)}Wa(e){return new QN}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class zp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Z_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O2.bind(null,this.syncEngine),await m2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new y2})()}createDatastore(e){const t=Gh(e.databaseInfo.databaseId),r=(function(a){return new ZN(a)})(e.databaseInfo);return(function(a,u,h,f){return new n2(a,u,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,a,u,h){return new i2(r,o,a,u,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>Z_(this.syncEngine,t,0)),(function(){return G_.D()?new G_:new YN})())}createSyncEngine(e,t){return(function(o,a,u,h,f,p,_){const w=new x2(o,a,u,h,f,p);return _&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ne(o);ye("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await au(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zp.provider={build:()=>new zp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Gt.UNAUTHENTICATED,this.clientId=WT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ye("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ye("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Um(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ep(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await SE(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function t0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await z2(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Q_(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>Q_(e.remoteStore,o))),n._onlineComponents=e}async function z2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await ep(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;la("Error using user provided cache. Falling back to memory cache: "+t),await ep(n,new gh)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await ep(n,new gh);return n._offlineComponents}async function zE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await t0(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await t0(n,new zp))),n._onlineComponents}function $2(n){return zE(n).then((e=>e.syncEngine))}async function W2(n){const e=await zE(n),t=e.eventManager;return t.onListen=A2.bind(null,e.syncEngine),t.onUnlisten=k2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=N2.bind(null,e.syncEngine),t}function H2(n,e,t={}){const r=new $i;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,h,f,p){const _=new U2({next:E=>{_.Za(),u.enqueueAndForget((()=>_2(a,w)));const S=E.docs.has(h);!S&&E.fromCache?p.reject(new Ee(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&f&&f.source==="server"?p.reject(new Ee(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),w=new E2(Am(h.path),_,{includeMetadataChanges:!0,_a:!0});return v2(a,w)})(await W2(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n,e,t){if(!t)throw new Ee(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function K2(n,e,t,r){if(e===!0&&r===!0)throw new Ee(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function r0(n){if(!Ie.isDocumentKey(n))throw new Ee(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $m(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re()}function qs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$m(n);throw new Ee(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$E((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wm{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i0(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sk;switch(r.type){case"firstParty":return new uk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=n0.get(t);r&&(ye("ComponentProvider","Removing Datastore"),n0.delete(t),r.terminate())})(this),Promise.resolve()}}function G2(n,e,t,r={}){var o;const a=(n=qs(n,Wm))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Gt.MOCK_USER;else{h=Gw(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ee(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Gt(p)}n._authCredentials=new ok(new $T(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hm(this.firestore,e,this._query)}}class xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Gl extends Hm{constructor(e,t,r){super(e,t,Am(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Ie(e))}withConverter(e){return new Gl(this.firestore,e,this._path)}}function kt(n,e,...t){if(n=vt(n),arguments.length===1&&(e=WT.newId()),q2("doc","path",e),n instanceof Wm){const r=ut.fromString(e,...t);return r0(r),new xn(n,null,new Ie(r))}{if(!(n instanceof xn||n instanceof Gl))throw new Ee(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return r0(r),new xn(n.firestore,n instanceof Gl?n.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new xE(this,"async_queue_retry"),this.Vu=()=>{const r=Zf();r&&ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Zf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Zf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new $i;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!iu(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const o=(function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h})(r);throw ri("INTERNAL UNHANDLED ERROR: ",o),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Fm.createAndSchedule(this,e,t,r,(a=>this.yu(a)));return this.Tu.push(o),o}fu(){this.Eu&&Re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Xh extends Wm{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new s0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s0(e),this._firestoreClient=void 0,await e}}}function Q2(n,e){const t=typeof n=="object"?n:Oh(),r=typeof n=="string"?n:"(default)",o=Yi(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=Hw("firestore");a&&G2(o,...a)}return o}function WE(n){if(n._terminated)throw new Ee(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Y2(n),n._firestoreClient}function Y2(n){var e,t,r;const o=n._freezeSettings(),a=(function(h,f,p,_){return new Ek(h,f,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,$E(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new B2(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(h){const f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ga(Bt.fromBase64String(e))}catch(t){throw new Ee(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ga(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=/^__.*__$/;class J2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}class HE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Zh{constructor(e,t,r,o,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Zh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.Ou(e),o}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:r,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qE(this.Cu)&&X2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Z2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gh(e)}Qu(e,t,r,o=!1){return new Zh({Cu:e,methodName:t,qu:r,path:Ft.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KE(n){const e=n._freezeSettings(),t=Gh(n._databaseId);return new Z2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eb(n,e,t,r,o,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,o);Ym("Data must be an object, but it was:",u,r);const h=QE(r,u);let f,p;if(a.merge)f=new Pn(u.fieldMask),p=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const E=$p(e,w,t);if(!u.contains(E))throw new Ee(ie.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);XE(_,E)||_.push(E)}f=new Pn(_),p=u.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,p=u.fieldTransforms;return new J2(new dn(h),f,p)}class ed extends uu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ed}}function GE(n,e,t){return new Zh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Gm extends uu{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=GE(this,e,!0),r=this.Ku.map((a=>Sa(a,t))),o=new da(r);return new cE(e.path,o)}isEqual(e){return e instanceof Gm&&Us(this.Ku,e.Ku)}}class Qm extends uu{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=GE(this,e,!0),r=this.Ku.map((a=>Sa(a,t))),o=new fa(r);return new cE(e.path,o)}isEqual(e){return e instanceof Qm&&Us(this.Ku,e.Ku)}}function tb(n,e,t,r){const o=n.Qu(1,e,t);Ym("Data must be an object, but it was:",o,r);const a=[],u=dn.empty();Xs(r,((f,p)=>{const _=Xm(e,f,t);p=vt(p);const w=o.Nu(_);if(p instanceof ed)a.push(_);else{const E=Sa(p,w);E!=null&&(a.push(_),u.set(_,E))}}));const h=new Pn(a);return new HE(u,h,o.fieldTransforms)}function nb(n,e,t,r,o,a){const u=n.Qu(1,e,t),h=[$p(e,r,t)],f=[o];if(a.length%2!=0)throw new Ee(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)h.push($p(e,a[E])),f.push(a[E+1]);const p=[],_=dn.empty();for(let E=h.length-1;E>=0;--E)if(!XE(p,h[E])){const S=h[E];let N=f[E];N=vt(N);const D=u.Nu(S);if(N instanceof ed)p.push(S);else{const C=Sa(N,D);C!=null&&(p.push(S),_.set(S,C))}}const w=new Pn(p);return new HE(_,w,u.fieldTransforms)}function Sa(n,e){if(YE(n=vt(n)))return Ym("Unsupported field value:",e,n),QE(n,e);if(n instanceof uu)return(function(r,o){if(!qE(o.Cu))throw o.Bu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,o){const a=[];let u=0;for(const h of r){let f=Sa(h,o.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,o){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Hk(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Pt.fromDate(r);return{timestampValue:ph(o.serializer,a)}}if(r instanceof Pt){const a=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ph(o.serializer,a)}}if(r instanceof qm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ga)return{bytesValue:yE(o.serializer,r._byteString)};if(r instanceof xn){const a=o.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw o.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Nm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Km)return(function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return Cm(h.serializer,f)}))}}}}}})(r,o);throw o.Bu(`Unsupported field value: ${$m(r)}`)})(n,e)}function QE(n,e){const t={};return HT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(n,((r,o)=>{const a=Sa(o,e.Mu(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function YE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pt||n instanceof qm||n instanceof ga||n instanceof xn||n instanceof uu||n instanceof Km)}function Ym(n,e,t){if(!YE(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const r=$m(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function $p(n,e,t){if((e=vt(e))instanceof Jh)return e._internalPath;if(typeof e=="string")return Xm(n,e);throw yh("Field path arguments must be of type string or ",n,!1,void 0,t)}const rb=new RegExp("[~\\*/\\[\\]]");function Xm(n,e,t){if(e.search(rb)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jh(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yh(n,e,t,r,o){const a=r&&!r.isEmpty(),u=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${o}`),f+=")"),new Ee(ie.INVALID_ARGUMENT,h+n+f)}function XE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ib(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ib extends JE{data(){return super.data()}}function ZE(n,e){return typeof e=="string"?Xm(n,e):e instanceof Jh?e._internalPath:e._delegate._internalPath}class sb{convertValue(e,t="none"){switch(Hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Xs(e,((o,a)=>{r[o]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((u=>dt(u.doubleValue)));return new Km(a)}convertGeoPoint(e){return new qm(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Im(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){const t=qi(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);Ke(IE(r));const o=new ql(r.get(1),r.get(3)),a=new Ie(r.popFirst(5));return o.isEqual(t)||ri(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eI extends JE{constructor(e,t,r,o,a,u){super(e,t,r,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ZE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lb extends eI{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(n){n=qs(n,xn);const e=qs(n.firestore,Xh);return H2(WE(e),n._key).then((t=>hb(e,n,t)))}class ub extends sb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function cb(n,e,t){n=qs(n,xn);const r=qs(n.firestore,Xh),o=ob(n.converter,e);return tI(r,[eb(KE(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Er.none())])}function tn(n,e,t,...r){n=qs(n,xn);const o=qs(n.firestore,Xh),a=KE(o);let u;return u=typeof(e=vt(e))=="string"||e instanceof Jh?nb(a,"updateDoc",n._key,e,t,r):tb(a,"updateDoc",n._key,e),tI(o,[u.toMutation(n._key,Er.exists(!0))])}function tI(n,e){return(function(r,o){const a=new $i;return r.asyncQueue.enqueueAndForget((async()=>b2(await $2(r),o,a))),a.promise})(WE(n),e)}function hb(n,e,t){const r=t.docs.get(e._key),o=new ub(n);return new eI(n,o,e._key,r,new ab(t.hasPendingWrites,t.fromCache),e.converter)}function o0(...n){return new Gm("arrayUnion",n)}function a0(...n){return new Qm("arrayRemove",n)}(function(e,t=!0){(function(o){Ta=o})(Ys),lr(new Bn("firestore",((r,{instanceIdentifier:o,options:a})=>{const u=r.getProvider("app").getImmediate(),h=new Xh(new ak(r.getProvider("auth-internal")),new hk(r.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ee(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ql(p.options.projectId,_)})(u,o),u);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),fn(P_,"4.7.3",e),fn(P_,"4.7.3","esm2017")})();var db="firebase",fb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn(db,fb,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebasestorage.googleapis.com",pb="storageBucket",mb=120*1e3,gb=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends $n{constructor(e,t,r=0){super(tp(e),`Firebase Storage: ${t} (${tp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ar;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ar||(Ar={}));function tp(n){return"storage/"+n}function yb(){const n="An unknown error occurred, please check the error payload for server response.";return new Rr(Ar.UNKNOWN,n)}function vb(){return new Rr(Ar.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _b(){return new Rr(Ar.CANCELED,"User canceled the upload/download.")}function wb(n){return new Rr(Ar.INVALID_URL,"Invalid URL '"+n+"'.")}function Tb(n){return new Rr(Ar.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function l0(n){return new Rr(Ar.INVALID_ARGUMENT,n)}function rI(){return new Rr(Ar.APP_DELETED,"The Firebase app was deleted.")}function Eb(n){return new Rr(Ar.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=or.makeFromUrl(e,t)}catch{return new or(e,"")}if(r.path==="")return r;throw Tb(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function a(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+o+u,"i"),f={bucket:1,path:3};function p(J){J.path_=decodeURIComponent(J.path)}const _="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",S=new RegExp(`^https?://${w}/${_}/b/${o}/o${E}`,"i"),N={bucket:1,path:3},D=t===nI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",G=new RegExp(`^https?://${D}/${o}/${C}`,"i"),z=[{regex:h,indices:f,postModify:a},{regex:S,indices:N,postModify:p},{regex:G,indices:{bucket:1,path:2},postModify:p}];for(let J=0;J<z.length;J++){const ce=z[J],Z=ce.regex.exec(e);if(Z){const b=Z[ce.indices.bucket];let x=Z[ce.indices.path];x||(x=""),r=new or(b,x),ce.postModify(r);break}}if(r==null)throw wb(e);return r}}class Ib{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(n,e,t){let r=1,o=null,a=null,u=!1,h=0;function f(){return h===2}let p=!1;function _(...C){p||(p=!0,e.apply(null,C))}function w(C){o=setTimeout(()=>{o=null,n(S,f())},C)}function E(){a&&clearTimeout(a)}function S(C,...G){if(p){E();return}if(C){E(),_.call(null,C,...G);return}if(f()||u){E(),_.call(null,C,...G);return}r<64&&(r*=2);let z;h===1?(h=2,z=0):z=(r+Math.random())*1e3,w(z)}let N=!1;function D(C){N||(N=!0,E(),!p&&(o!==null?(C||(h=2),clearTimeout(o),w(0)):C||(h=1)))}return w(0),a=setTimeout(()=>{u=!0,D(!0)},t),D}function Pb(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(n){return n!==void 0}function u0(n,e,t,r){if(r<e)throw l0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw l0(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ab(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const o=e(r)+"="+e(n[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var vh;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(vh||(vh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t,r,o,a,u,h,f,p,_,w,E=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=w,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,N)=>{this.resolve_=S,this.reject_=N,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Mc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{const f=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===vh.NO_ERROR,f=a.getStatus();if(!h||Cb(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===vh.ABORT;r(!1,new Mc(!1,null,_));return}const p=this.successCodes_.indexOf(f)!==-1;r(!0,new Mc(p,a))})},t=(r,o)=>{const a=this.resolve_,u=this.reject_,h=o.connection;if(o.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());xb(f)?a(f):a()}catch(f){u(f)}else if(h!==null){const f=yb();f.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,f)):u(f)}else if(o.canceled){const f=this.appDelete_?rI():_b();u(f)}else{const f=vb();u(f)}};this.canceled_?t(!1,new Mc(!1,null,!0)):this.backoffId_=Sb(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Pb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kb(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Nb(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bb(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Db(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Vb(n,e,t,r,o,a,u=!0){const h=Ab(n.urlParams),f=n.url+h,p=Object.assign({},n.headers);return bb(p,e),kb(p,t),Nb(p,a),Db(p,r),new Rb(f,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function jb(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t){this._service=e,t instanceof or?this._location=t:this._location=or.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _h(e,t)}get root(){const e=new or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jb(this._location.path)}get storage(){return this._service}get parent(){const e=Mb(this._location.path);if(e===null)return null;const t=new or(this._location.bucket,e);return new _h(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Eb(e)}}function c0(n,e){const t=e?.[pb];return t==null?null:or.makeFromBucketSpec(t,n)}function Ob(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:Gw(o,n.app.options.projectId))}class Lb{constructor(e,t,r,o,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=a,this._bucket=null,this._host=nI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mb,this._maxUploadRetryTime=gb,this._requests=new Set,o!=null?this._bucket=or.makeFromBucketSpec(o,this._host):this._bucket=c0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=or.makeFromBucketSpec(this._url,e):this._bucket=c0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _h(this,e)}_makeRequest(e,t,r,o,a=!0){if(this._deleted)return new Ib(rI());{const u=Vb(e,this._appId,r,o,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const h0="@firebase/storage",d0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="storage";function Fb(n=Oh(),e){n=vt(n);const r=Yi(n,iI).getImmediate({identifier:e}),o=Hw("storage");return o&&Ub(r,...o),r}function Ub(n,e,t,r={}){Ob(n,e,t,r)}function Bb(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Lb(t,r,o,e,Ys)}function zb(){lr(new Bn(iI,Bb,"PUBLIC").setMultipleInstances(!0)),fn(h0,d0,""),fn(h0,d0,"esm2017")}zb();const sI="@firebase/installations",Jm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=1e4,aI=`w:${Jm}`,lI="FIS_v2",$b="https://firebaseinstallations.googleapis.com/v1",Wb=3600*1e3,Hb="installations",qb="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ks=new Qs(Hb,qb,Kb);function uI(n){return n instanceof $n&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI({projectId:n}){return`${$b}/projects/${n}/installations`}function hI(n){return{token:n.token,requestStatus:2,expiresIn:Qb(n.expiresIn),creationTime:Date.now()}}async function dI(n,e){const r=(await e.json()).error;return Ks.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function fI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Gb(n,{refreshToken:e}){const t=fI(n);return t.append("Authorization",Yb(e)),t}async function pI(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Qb(n){return Number(n.replace("s","000"))}function Yb(n){return`${lI} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=cI(n),o=fI(n),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}const u={fid:t,authVersion:lI,appId:n.appId,sdkVersion:aI},h={method:"POST",headers:o,body:JSON.stringify(u)},f=await pI(()=>fetch(r,h));if(f.ok){const p=await f.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:hI(p.authToken)}}else throw await dI("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=/^[cdef][\w-]{21}$/,Wp="";function eD(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=tD(n);return Zb.test(t)?t:Wp}catch{return Wp}}function tD(n){return Jb(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Map;function yI(n,e){const t=td(n);vI(t,e),nD(t,e)}function vI(n,e){const t=gI.get(n);if(t)for(const r of t)r(e)}function nD(n,e){const t=rD();t&&t.postMessage({key:n,fid:e}),iD()}let js=null;function rD(){return!js&&"BroadcastChannel"in self&&(js=new BroadcastChannel("[Firebase] FID Change"),js.onmessage=n=>{vI(n.data.key,n.data.fid)}),js}function iD(){gI.size===0&&js&&(js.close(),js=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="firebase-installations-database",oD=1,Gs="firebase-installations-store";let np=null;function Zm(){return np||(np=eT(sD,oD,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Gs)}}})),np}async function wh(n,e){const t=td(n),o=(await Zm()).transaction(Gs,"readwrite"),a=o.objectStore(Gs),u=await a.get(t);return await a.put(e,t),await o.done,(!u||u.fid!==e.fid)&&yI(n,e.fid),e}async function _I(n){const e=td(n),r=(await Zm()).transaction(Gs,"readwrite");await r.objectStore(Gs).delete(e),await r.done}async function nd(n,e){const t=td(n),o=(await Zm()).transaction(Gs,"readwrite"),a=o.objectStore(Gs),u=await a.get(t),h=e(u);return h===void 0?await a.delete(t):await a.put(h,t),await o.done,h&&(!u||u.fid!==h.fid)&&yI(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eg(n){let e;const t=await nd(n.appConfig,r=>{const o=aD(r),a=lD(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===Wp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function aD(n){const e=n||{fid:eD(),registrationStatus:0};return wI(e)}function lD(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Ks.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=uD(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:cD(n)}:{installationEntry:e}}async function uD(n,e){try{const t=await Xb(n,e);return wh(n.appConfig,t)}catch(t){throw uI(t)&&t.customData.serverCode===409?await _I(n.appConfig):await wh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function cD(n){let e=await f0(n.appConfig);for(;e.registrationStatus===1;)await mI(100),e=await f0(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await eg(n);return r||t}return e}function f0(n){return nd(n,e=>{if(!e)throw Ks.create("installation-not-found");return wI(e)})}function wI(n){return hD(n)?{fid:n.fid,registrationStatus:0}:n}function hD(n){return n.registrationStatus===1&&n.registrationTime+oI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD({appConfig:n,heartbeatServiceProvider:e},t){const r=fD(n,t),o=Gb(n,t),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}const u={installation:{sdkVersion:aI,appId:n.appId}},h={method:"POST",headers:o,body:JSON.stringify(u)},f=await pI(()=>fetch(r,h));if(f.ok){const p=await f.json();return hI(p)}else throw await dI("Generate Auth Token",f)}function fD(n,{fid:e}){return`${cI(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tg(n,e=!1){let t;const r=await nd(n.appConfig,a=>{if(!TI(a))throw Ks.create("not-registered");const u=a.authToken;if(!e&&gD(u))return a;if(u.requestStatus===1)return t=pD(n,e),a;{if(!navigator.onLine)throw Ks.create("app-offline");const h=vD(a);return t=mD(n,h),h}});return t?await t:r.authToken}async function pD(n,e){let t=await p0(n.appConfig);for(;t.authToken.requestStatus===1;)await mI(100),t=await p0(n.appConfig);const r=t.authToken;return r.requestStatus===0?tg(n,e):r}function p0(n){return nd(n,e=>{if(!TI(e))throw Ks.create("not-registered");const t=e.authToken;return _D(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function mD(n,e){try{const t=await dD(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await wh(n.appConfig,r),t}catch(t){if(uI(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await _I(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await wh(n.appConfig,r)}throw t}}function TI(n){return n!==void 0&&n.registrationStatus===2}function gD(n){return n.requestStatus===2&&!yD(n)}function yD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Wb}function vD(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function _D(n){return n.requestStatus===1&&n.requestTime+oI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(n){const e=n,{installationEntry:t,registrationPromise:r}=await eg(e);return r?r.catch(console.error):tg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(n,e=!1){const t=n;return await ED(t),(await tg(t,e)).token}async function ED(n){const{registrationPromise:e}=await eg(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(n){if(!n||!n.options)throw rp("App Configuration");if(!n.name)throw rp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw rp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function rp(n){return Ks.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="installations",SD="installations-internal",PD=n=>{const e=n.getProvider("app").getImmediate(),t=ID(e),r=Yi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},xD=n=>{const e=n.getProvider("app").getImmediate(),t=Yi(e,EI).getImmediate();return{getId:()=>wD(t),getToken:o=>TD(t,o)}};function AD(){lr(new Bn(EI,PD,"PUBLIC")),lr(new Bn(SD,xD,"PRIVATE"))}AD();fn(sI,Jm);fn(sI,Jm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="analytics",CD="firebase_id",RD="origin",kD=60*1e3,ND="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ng="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new jh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},An=new Qs("analytics","Analytics",bD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n){if(!n.startsWith(ng)){const e=An.create("invalid-gtag-resource",{gtagURL:n});return pn.warn(e.message),""}return n}function II(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function VD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function MD(n,e){const t=VD("firebase-js-sdk-policy",{createScriptURL:DD}),r=document.createElement("script"),o=`${ng}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function jD(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function OD(n,e,t,r,o,a){const u=r[o];try{if(u)await e[u];else{const f=(await II(t)).find(p=>p.measurementId===o);f&&await e[f.appId]}}catch(h){pn.error(h)}n("config",o,a)}async function LD(n,e,t,r,o){try{let a=[];if(o&&o.send_to){let u=o.send_to;Array.isArray(u)||(u=[u]);const h=await II(t);for(const f of u){const p=h.find(w=>w.measurementId===f),_=p&&e[p.appId];if(_)a.push(_);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,o||{})}catch(a){pn.error(a)}}function FD(n,e,t,r){async function o(a,...u){try{if(a==="event"){const[h,f]=u;await LD(n,e,t,h,f)}else if(a==="config"){const[h,f]=u;await OD(n,e,t,r,h,f)}else if(a==="consent"){const[h,f]=u;n("consent",h,f)}else if(a==="get"){const[h,f,p]=u;n("get",h,f,p)}else if(a==="set"){const[h]=u;n("set",h)}else n(a,...u)}catch(h){pn.error(h)}}return o}function UD(n,e,t,r,o){let a=function(...u){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=FD(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function BD(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ng)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=30,$D=1e3;class WD{constructor(e={},t=$D){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const SI=new WD;function HD(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function qD(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:HD(r)},a=ND.replace("{app-id}",t),u=await fetch(a,o);if(u.status!==200&&u.status!==304){let h="";try{const f=await u.json();!((e=f.error)===null||e===void 0)&&e.message&&(h=f.error.message)}catch{}throw An.create("config-fetch-failed",{httpStatus:u.status,responseMessage:h})}return u.json()}async function KD(n,e=SI,t){const{appId:r,apiKey:o,measurementId:a}=n.options;if(!r)throw An.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:r};throw An.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new YD;return setTimeout(async()=>{h.abort()},kD),PI({appId:r,apiKey:o,measurementId:a},u,h,e)}async function PI(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=SI){var a;const{appId:u,measurementId:h}=n;try{await GD(r,e)}catch(f){if(h)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:h};throw f}try{const f=await qD(n);return o.deleteThrottleMetadata(u),f}catch(f){const p=f;if(!QD(p)){if(o.deleteThrottleMetadata(u),h)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:u,measurementId:h};throw f}const _=Number((a=p?.customData)===null||a===void 0?void 0:a.httpStatus)===503?Yv(t,o.intervalMillis,zD):Yv(t,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return o.setThrottleMetadata(u,w),pn.debug(`Calling attemptFetch again in ${_} millis`),PI(n,w,r,o)}}function GD(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),r(An.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QD(n){if(!(n instanceof $n)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class YD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function XD(n,e,t,r,o){if(o&&o.global){n("event",t,r);return}else{const a=await e,u=Object.assign(Object.assign({},r),{send_to:a});n("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(){if(Yw())try{await Xw()}catch(n){return pn.warn(An.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return pn.warn(An.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ZD(n,e,t,r,o,a,u){var h;const f=KD(n);f.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>pn.error(S)),e.push(f);const p=JD().then(S=>{if(S)return r.getId()}),[_,w]=await Promise.all([f,p]);BD(a)||MD(a,_.measurementId),o("js",new Date);const E=(h=u?.config)!==null&&h!==void 0?h:{};return E[RD]="firebase",E.update=!0,w!=null&&(E[CD]=w),o("config",_.measurementId,E),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.app=e}_delete(){return delete Ol[this.app.options.appId],Promise.resolve()}}let Ol={},m0=[];const g0={};let ip="dataLayer",tV="gtag",y0,xI,v0=!1;function nV(){const n=[];if(Qw()&&n.push("This is a browser extension environment."),Ex()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=An.create("invalid-analytics-context",{errorInfo:e});pn.warn(t.message)}}function rV(n,e,t){nV();const r=n.options.appId;if(!r)throw An.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw An.create("no-api-key");if(Ol[r]!=null)throw An.create("already-exists",{id:r});if(!v0){jD(ip);const{wrappedGtag:a,gtagCore:u}=UD(Ol,m0,g0,ip,tV);xI=a,y0=u,v0=!0}return Ol[r]=ZD(n,m0,g0,e,y0,ip,t),new eV(n)}function iV(n=Oh()){n=vt(n);const e=Yi(n,Th);return e.isInitialized()?e.getImmediate():sV(n)}function sV(n,e={}){const t=Yi(n,Th);if(t.isInitialized()){const o=t.getImmediate();if(Us(e,t.getOptions()))return o;throw An.create("already-initialized")}return t.initialize({options:e})}function oV(n,e,t,r){n=vt(n),XD(xI,Ol[n.app.options.appId],e,t,r).catch(o=>pn.error(o))}const _0="@firebase/analytics",w0="0.10.8";function aV(){lr(new Bn(Th,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return rV(r,o,t)},"PUBLIC")),lr(new Bn("analytics-internal",n,"PRIVATE")),fn(_0,w0),fn(_0,w0,"esm2017");function n(e){try{const t=e.getProvider(Th).getImmediate();return{logEvent:(r,o,a)=>oV(t,r,o,a)}}catch(t){throw An.create("interop-component-reg-failed",{reason:t})}}}aV();const lV={apiKey:"AIzaSyANyxIoJ8wSa9MXCBCHvLvLAgbTuggabeA",authDomain:"video-streamer-68dca.firebaseapp.com",projectId:"video-streamer-68dca",storageBucket:"video-streamer-68dca.firebasestorage.app",messagingSenderId:"941147798723",appId:"1:941147798723:web:dabee00fe9914f5e6b7676",measurementId:"G-N0TSV7M9LW"},rd=tT(lV),Cs=rk(rd),Nt=Q2(rd);Fb(rd);iV(rd);const AI=B.createContext(),Zs=()=>{const n=B.useContext(AI);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},uV=({children:n})=>{const[e,t]=B.useState(null),[r,o]=B.useState(null),[a,u]=B.useState({}),[h,f]=B.useState(null),[p,_]=B.useState(!0),[w,E]=B.useState(""),[S,N]=B.useState(""),D=()=>{setTimeout(()=>{E(""),N("")},5e3)},C=U=>{E(U),N(""),D()},G=U=>{N(U),E(""),D()};B.useEffect(()=>HC(Cs,async X=>{X?(t(X),await Q(X.uid)):(t(null),o(null),u({}),f(null)),_(!1)}),[]);const Q=async U=>{try{const X=await Tl(kt(Nt,"users",U));if(X.exists()){const oe=X.data();if(u(oe.preferences||{language:"en",autoplay:!0,quality:"hd",notifications:!0,maturityRating:"PG-13"}),oe.subscription&&f(oe.subscription),oe.profiles&&oe.profiles.length>0){const he=oe.profiles;if(o(he[0]),oe.lastActiveProfile){const _e=he.find(De=>De.id===oe.lastActiveProfile);_e&&o(_e)}}else await J(U)}else await z(U)}catch(X){console.error("Error loading user data:",X),C("Failed to load user data")}},z=async(U,X={})=>{try{const oe={email:Cs.currentUser?.email,createdAt:new Date,lastLogin:new Date,subscription:{status:"inactive",plan:null,startDate:null,endDate:null,stripeCustomerId:null},preferences:{language:"en",autoplay:!0,quality:"hd",notifications:!0,maturityRating:"PG-13",...X.preferences},profiles:X.profiles||[],watchHistory:[],analytics:{totalWatchTime:0,moviesWatched:0,seriesWatched:0,averageRating:0,favoriteGenres:[],lastWatched:null},...X};await cb(kt(Nt,"users",U),oe),u(oe.preferences)}catch(oe){throw console.error("Error creating user document:",oe),oe}},J=async U=>{try{const X={id:"default",name:"Default",avatar:null,isChild:!1,pinProtected:!1,restrictions:[],likedMovies:[],dislikedMovies:[],watchlist:[],continueWatching:[],watchStats:{totalHours:0,totalMovies:0,totalSeries:0,lastWatched:null},createdAt:new Date};await tn(kt(Nt,"users",U),{profiles:[X]}),o(X)}catch(X){console.error("Error creating default profile:",X)}},ce=async(U,X,oe={})=>{try{C("");const{user:he}=await FC(Cs,U,X);return oe.displayName&&await zC(he,{displayName:oe.displayName}),await z(he.uid,oe),G("Account created successfully!"),he}catch(he){throw console.error("Signup error:",he),q(he),he}},Z=async(U,X)=>{try{C("");const{user:oe}=await UC(Cs,U,X);return await tn(kt(Nt,"users",oe.uid),{lastLogin:new Date}),G("Welcome back!"),oe}catch(oe){throw console.error("Login error:",oe),q(oe),oe}},b=async()=>{try{C("");const U=new Kr;U.addScope("profile"),U.addScope("email");const{user:X}=await dR(Cs,U);return(await Tl(kt(Nt,"users",X.uid))).exists()?await tn(kt(Nt,"users",X.uid),{lastLogin:new Date}):await z(X.uid,{displayName:X.displayName,photoURL:X.photoURL}),G("Signed in with Google successfully!"),X}catch(U){throw console.error("Google sign-in error:",U),q(U),U}},x=async()=>{try{C(""),await qC(Cs),G("Signed out successfully")}catch(U){throw console.error("Logout error:",U),q(U),U}},A=async U=>{try{C(""),await LC(Cs,U),G("Password reset email sent!")}catch(X){throw console.error("Password reset error:",X),q(X),X}},V=async U=>{if(e)try{const X={...a,...U};u(X),await tn(kt(Nt,"users",e.uid),{preferences:X}),G("Preferences updated successfully")}catch(X){throw console.error("Error updating preferences:",X),C("Failed to update preferences"),X}},O=async U=>{if(o(U),e)try{await tn(kt(Nt,"users",e.uid),{lastActiveProfile:U.id})}catch(X){console.error("Error updating last active profile:",X)}},F=async U=>{if(e)try{const oe=(await Tl(kt(Nt,"users",e.uid))).data()?.profiles||[],he={id:`profile_${Date.now()}`,name:U.name,avatar:U.avatar||null,isChild:U.isChild||!1,pinProtected:U.pinProtected||!1,restrictions:U.restrictions||[],likedMovies:[],dislikedMovies:[],watchlist:[],continueWatching:[],watchStats:{totalHours:0,totalMovies:0,totalSeries:0,lastWatched:null},createdAt:new Date},_e=[...oe,he];return await tn(kt(Nt,"users",e.uid),{profiles:_e}),o(he),G(`Profile "${U.name}" created successfully`),he}catch(X){throw console.error("Error creating profile:",X),C("Failed to create profile"),X}},R=async(U,X)=>{if(e)try{const _e=((await Tl(kt(Nt,"users",e.uid))).data()?.profiles||[]).map(De=>De.id===U?{...De,...X}:De);await tn(kt(Nt,"users",e.uid),{profiles:_e}),r?.id===U&&o({...r,...X}),G("Profile updated successfully")}catch(oe){throw console.error("Error updating profile:",oe),C("Failed to update profile"),oe}},se=async U=>{if(e)try{const oe=(await Tl(kt(Nt,"users",e.uid))).data()?.profiles||[];if(oe.length<=1){C("Cannot delete the last profile");return}const he=oe.filter(_e=>_e.id!==U);await tn(kt(Nt,"users",e.uid),{profiles:he}),r?.id===U&&o(he[0]),G("Profile deleted successfully")}catch(X){throw console.error("Error deleting profile:",X),C("Failed to delete profile"),X}},be=async(U,X)=>{if(!(!e||!r))try{const oe=kt(Nt,"users",e.uid,"profiles",r.id);X==="like"?await tn(oe,{likedMovies:[...new Set([...r.likedMovies,U])],dislikedMovies:r.dislikedMovies.filter(he=>he!==U)}):X==="dislike"?await tn(oe,{dislikedMovies:[...new Set([...r.dislikedMovies,U])],likedMovies:r.likedMovies.filter(he=>he!==U)}):X==="remove"&&await tn(oe,{likedMovies:r.likedMovies.filter(he=>he!==U),dislikedMovies:r.dislikedMovies.filter(he=>he!==U)}),o(he=>({...he,likedMovies:X==="like"?[...new Set([...he.likedMovies,U])]:X==="dislike"?he.likedMovies.filter(_e=>_e!==U):he.likedMovies,dislikedMovies:X==="dislike"?[...new Set([...he.dislikedMovies,U])]:X==="like"?he.dislikedMovies.filter(_e=>_e!==U):he.dislikedMovies}))}catch(oe){console.error("Error tracking movie interaction:",oe)}},xe=async U=>{if(!(!e||!r))try{const X=kt(Nt,"users",e.uid,"profiles",r.id),oe=[...new Set([...r.watchlist,U])];await tn(X,{watchlist:oe}),o(he=>({...he,watchlist:oe}))}catch(X){console.error("Error adding to watchlist:",X)}},Ae=async U=>{if(!(!e||!r))try{const X=kt(Nt,"users",e.uid,"profiles",r.id),oe=r.watchlist.filter(he=>he!==U);await tn(X,{watchlist:oe}),o(he=>({...he,watchlist:oe}))}catch(X){console.error("Error removing from watchlist:",X)}},q=U=>{switch(U.code){case"auth/email-already-in-use":C("Email is already registered. Please sign in.");break;case"auth/invalid-email":C("Invalid email address.");break;case"auth/weak-password":C("Password should be at least 6 characters.");break;case"auth/user-not-found":C("No account found with this email.");break;case"auth/wrong-password":C("Incorrect password.");break;case"auth/too-many-requests":C("Too many attempts. Please try again later.");break;case"auth/network-request-failed":C("Network error. Please check your connection.");break;default:C("An error occurred. Please try again.")}},de=()=>h?.status==="active"&&h?.endDate>new Date,j={currentUser:e,currentProfile:r,userPreferences:a,userSubscription:h,loading:p,authError:w,authSuccess:S,signup:ce,login:Z,signInWithGoogle:b,logout:x,resetPassword:A,switchProfile:O,createProfile:F,updateProfileData:R,deleteProfile:se,updatePreferences:V,trackMovieInteraction:be,addToWatchlist:xe,removeFromWatchlist:Ae,hasActiveSubscription:de,getSubscriptionInfo:()=>({hasSubscription:de(),plan:h?.plan,status:h?.status,endDate:h?.endDate}),setError:C,setSuccess:G,clearMessages:()=>{E(""),N("")}};return g.jsxs(AI.Provider,{value:j,children:[n,(w||S)&&g.jsx("div",{className:"auth-messages-overlay",children:g.jsxs("div",{className:`auth-message ${w?"error":"success"}`,children:[g.jsx("span",{children:w||S}),g.jsx("button",{onClick:()=>{E(""),N("")},className:"auth-message-close",children:"×"})]})})]})},CI=B.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),id=B.createContext({}),sd=B.createContext(null),od=typeof document<"u",rg=od?B.useLayoutEffect:B.useEffect,RI=B.createContext({strict:!1}),ig=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),cV="framerAppearId",kI="data-"+ig(cV);function hV(n,e,t,r){const{visualElement:o}=B.useContext(id),a=B.useContext(RI),u=B.useContext(sd),h=B.useContext(CI).reducedMotion,f=B.useRef();r=r||a.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const p=f.current;B.useInsertionEffect(()=>{p&&p.update(t,u)});const _=B.useRef(!!(t[kI]&&!window.HandoffComplete));return rg(()=>{p&&(p.render(),_.current&&p.animationState&&p.animationState.animateChanges())}),B.useEffect(()=>{p&&(p.updateFeatures(),!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(_.current=!1,window.HandoffComplete=!0))}),p}function Jo(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function dV(n,e,t){return B.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Jo(t)&&(t.current=r))},[e])}function Ql(n){return typeof n=="string"||Array.isArray(n)}function ad(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const sg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],og=["initial",...sg];function ld(n){return ad(n.animate)||og.some(e=>Ql(n[e]))}function NI(n){return!!(ld(n)||n.variants)}function fV(n,e){if(ld(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Ql(t)?t:void 0,animate:Ql(r)?r:void 0}}return n.inherit!==!1?e:{}}function pV(n){const{initial:e,animate:t}=fV(n,B.useContext(id));return B.useMemo(()=>({initial:e,animate:t}),[T0(e),T0(t)])}function T0(n){return Array.isArray(n)?n.join(" "):n}const E0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yl={};for(const n in E0)Yl[n]={isEnabled:e=>E0[n].some(t=>!!e[t])};function mV(n){for(const e in n)Yl[e]={...Yl[e],...n[e]}}const ag=B.createContext({}),bI=B.createContext({}),gV=Symbol.for("motionComponentSymbol");function yV({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:o}){n&&mV(n);function a(h,f){let p;const _={...B.useContext(CI),...h,layoutId:vV(h)},{isStatic:w}=_,E=pV(h),S=r(h,w);if(!w&&od){E.visualElement=hV(o,S,_,e);const N=B.useContext(bI),D=B.useContext(RI).strict;E.visualElement&&(p=E.visualElement.loadFeatures(_,D,n,N))}return B.createElement(id.Provider,{value:E},p&&E.visualElement?B.createElement(p,{visualElement:E.visualElement,..._}):null,t(o,h,dV(S,E.visualElement,f),S,w,E.visualElement))}const u=B.forwardRef(a);return u[gV]=o,u}function vV({layoutId:n}){const e=B.useContext(ag).id;return e&&n!==void 0?e+"-"+n:n}function _V(n){function e(r,o={}){return yV(n(r,o))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,o)=>(t.has(o)||t.set(o,e(o)),t.get(o))})}const wV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lg(n){return typeof n!="string"||n.includes("-")?!1:!!(wV.indexOf(n)>-1||/[A-Z]/.test(n))}const Eh={};function TV(n){Object.assign(Eh,n)}const cu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eo=new Set(cu);function DI(n,{layout:e,layoutId:t}){return eo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Eh[n]||n==="opacity")}const gn=n=>!!(n&&n.getVelocity),EV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},IV=cu.length;function SV(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,o){let a="";for(let u=0;u<IV;u++){const h=cu[u];if(n[h]!==void 0){const f=EV[h]||h;a+=`${f}(${n[h]}) `}}return e&&!n.z&&(a+="translateZ(0)"),a=a.trim(),o?a=o(n,r?"":a):t&&r&&(a="none"),a}const VI=n=>e=>typeof e=="string"&&e.startsWith(n),MI=VI("--"),Hp=VI("var(--"),PV=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,xV=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Gi=(n,e,t)=>Math.min(Math.max(t,n),e),to={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ll={...to,transform:n=>Gi(0,1,n)},jc={...to,default:1},Fl=n=>Math.round(n*1e5)/1e5,ud=/(-)?([\d]*\.?[\d])+/g,jI=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,AV=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function hu(n){return typeof n=="string"}const du=n=>({test:e=>hu(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Vi=du("deg"),Sr=du("%"),Se=du("px"),CV=du("vh"),RV=du("vw"),I0={...Sr,parse:n=>Sr.parse(n)/100,transform:n=>Sr.transform(n*100)},S0={...to,transform:Math.round},OI={borderWidth:Se,borderTopWidth:Se,borderRightWidth:Se,borderBottomWidth:Se,borderLeftWidth:Se,borderRadius:Se,radius:Se,borderTopLeftRadius:Se,borderTopRightRadius:Se,borderBottomRightRadius:Se,borderBottomLeftRadius:Se,width:Se,maxWidth:Se,height:Se,maxHeight:Se,size:Se,top:Se,right:Se,bottom:Se,left:Se,padding:Se,paddingTop:Se,paddingRight:Se,paddingBottom:Se,paddingLeft:Se,margin:Se,marginTop:Se,marginRight:Se,marginBottom:Se,marginLeft:Se,rotate:Vi,rotateX:Vi,rotateY:Vi,rotateZ:Vi,scale:jc,scaleX:jc,scaleY:jc,scaleZ:jc,skew:Vi,skewX:Vi,skewY:Vi,distance:Se,translateX:Se,translateY:Se,translateZ:Se,x:Se,y:Se,z:Se,perspective:Se,transformPerspective:Se,opacity:Ll,originX:I0,originY:I0,originZ:Se,zIndex:S0,fillOpacity:Ll,strokeOpacity:Ll,numOctaves:S0};function ug(n,e,t,r){const{style:o,vars:a,transform:u,transformOrigin:h}=n;let f=!1,p=!1,_=!0;for(const w in e){const E=e[w];if(MI(w)){a[w]=E;continue}const S=OI[w],N=xV(E,S);if(eo.has(w)){if(f=!0,u[w]=N,!_)continue;E!==(S.default||0)&&(_=!1)}else w.startsWith("origin")?(p=!0,h[w]=N):o[w]=N}if(e.transform||(f||r?o.transform=SV(n.transform,t,_,r):o.transform&&(o.transform="none")),p){const{originX:w="50%",originY:E="50%",originZ:S=0}=h;o.transformOrigin=`${w} ${E} ${S}`}}const cg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LI(n,e,t){for(const r in e)!gn(e[r])&&!DI(r,t)&&(n[r]=e[r])}function kV({transformTemplate:n},e,t){return B.useMemo(()=>{const r=cg();return ug(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function NV(n,e,t){const r=n.style||{},o={};return LI(o,r,n),Object.assign(o,kV(n,e,t)),n.transformValues?n.transformValues(o):o}function bV(n,e,t){const r={},o=NV(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=o,r}const DV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ih(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||DV.has(n)}let FI=n=>!Ih(n);function VV(n){n&&(FI=e=>e.startsWith("on")?!Ih(e):n(e))}try{VV(require("@emotion/is-prop-valid").default)}catch{}function MV(n,e,t){const r={};for(const o in n)o==="values"&&typeof n.values=="object"||(FI(o)||t===!0&&Ih(o)||!e&&!Ih(o)||n.draggable&&o.startsWith("onDrag"))&&(r[o]=n[o]);return r}function P0(n,e,t){return typeof n=="string"?n:Se.transform(e+t*n)}function jV(n,e,t){const r=P0(e,n.x,n.width),o=P0(t,n.y,n.height);return`${r} ${o}`}const OV={offset:"stroke-dashoffset",array:"stroke-dasharray"},LV={offset:"strokeDashoffset",array:"strokeDasharray"};function FV(n,e,t=1,r=0,o=!0){n.pathLength=1;const a=o?OV:LV;n[a.offset]=Se.transform(-r);const u=Se.transform(e),h=Se.transform(t);n[a.array]=`${u} ${h}`}function hg(n,{attrX:e,attrY:t,attrScale:r,originX:o,originY:a,pathLength:u,pathSpacing:h=1,pathOffset:f=0,...p},_,w,E){if(ug(n,p,_,E),w){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:S,style:N,dimensions:D}=n;S.transform&&(D&&(N.transform=S.transform),delete S.transform),D&&(o!==void 0||a!==void 0||N.transform)&&(N.transformOrigin=jV(D,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(S.x=e),t!==void 0&&(S.y=t),r!==void 0&&(S.scale=r),u!==void 0&&FV(S,u,h,f,!1)}const UI=()=>({...cg(),attrs:{}}),dg=n=>typeof n=="string"&&n.toLowerCase()==="svg";function UV(n,e,t,r){const o=B.useMemo(()=>{const a=UI();return hg(a,e,{enableHardwareAcceleration:!1},dg(r),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};LI(a,n.style,n),o.style={...a,...o.style}}return o}function BV(n=!1){return(t,r,o,{latestValues:a},u)=>{const f=(lg(t)?UV:bV)(r,a,u,t),_={...MV(r,typeof t=="string",n),...f,ref:o},{children:w}=r,E=B.useMemo(()=>gn(w)?w.get():w,[w]);return B.createElement(t,{..._,children:E})}}function BI(n,{style:e,vars:t},r,o){Object.assign(n.style,e,o&&o.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}const zI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $I(n,e,t,r){BI(n,e,void 0,r);for(const o in e.attrs)n.setAttribute(zI.has(o)?o:ig(o),e.attrs[o])}function fg(n,e){const{style:t}=n,r={};for(const o in t)(gn(t[o])||e.style&&gn(e.style[o])||DI(o,n))&&(r[o]=t[o]);return r}function WI(n,e){const t=fg(n,e);for(const r in n)if(gn(n[r])||gn(e[r])){const o=cu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[o]=n[r]}return t}function pg(n,e,t,r={},o={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,o)),e}function HI(n){const e=B.useRef(null);return e.current===null&&(e.current=n()),e.current}const Sh=n=>Array.isArray(n),zV=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),$V=n=>Sh(n)?n[n.length-1]||0:n;function Xc(n){const e=gn(n)?n.get():n;return zV(e)?e.toValue():e}function WV({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,o,a){const u={latestValues:HV(r,o,a,n),renderState:e()};return t&&(u.mount=h=>t(r,h,u)),u}const qI=n=>(e,t)=>{const r=B.useContext(id),o=B.useContext(sd),a=()=>WV(n,e,r,o);return t?a():HI(a)};function HV(n,e,t,r){const o={},a=r(n,{});for(const E in a)o[E]=Xc(a[E]);let{initial:u,animate:h}=n;const f=ld(n),p=NI(n);e&&p&&!f&&n.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let _=t?t.initial===!1:!1;_=_||u===!1;const w=_?h:u;return w&&typeof w!="boolean"&&!ad(w)&&(Array.isArray(w)?w:[w]).forEach(S=>{const N=pg(n,S);if(!N)return;const{transitionEnd:D,transition:C,...G}=N;for(const Q in G){let z=G[Q];if(Array.isArray(z)){const J=_?z.length-1:0;z=z[J]}z!==null&&(o[Q]=z)}for(const Q in D)o[Q]=D[Q]}),o}const ft=n=>n;class x0{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function qV(n){let e=new x0,t=new x0,r=0,o=!1,a=!1;const u=new WeakSet,h={schedule:(f,p=!1,_=!1)=>{const w=_&&o,E=w?e:t;return p&&u.add(f),E.add(f)&&w&&o&&(r=e.order.length),f},cancel:f=>{t.remove(f),u.delete(f)},process:f=>{if(o){a=!0;return}if(o=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let p=0;p<r;p++){const _=e.order[p];_(f),u.has(_)&&(h.schedule(_),n())}o=!1,a&&(a=!1,h.process(f))}};return h}const Oc=["prepare","read","update","preRender","render","postRender"],KV=40;function GV(n,e){let t=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=Oc.reduce((w,E)=>(w[E]=qV(()=>t=!0),w),{}),u=w=>a[w].process(o),h=()=>{const w=performance.now();t=!1,o.delta=r?1e3/60:Math.max(Math.min(w-o.timestamp,KV),1),o.timestamp=w,o.isProcessing=!0,Oc.forEach(u),o.isProcessing=!1,t&&e&&(r=!1,n(h))},f=()=>{t=!0,r=!0,o.isProcessing||n(h)};return{schedule:Oc.reduce((w,E)=>{const S=a[E];return w[E]=(N,D=!1,C=!1)=>(t||f(),S.schedule(N,D,C)),w},{}),cancel:w=>Oc.forEach(E=>a[E].cancel(w)),state:o,steps:a}}const{schedule:Je,cancel:si,state:Kt,steps:sp}=GV(typeof requestAnimationFrame<"u"?requestAnimationFrame:ft,!0),QV={useVisualState:qI({scrapeMotionValuesFromProps:WI,createRenderState:UI,onMount:(n,e,{renderState:t,latestValues:r})=>{Je.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Je.render(()=>{hg(t,r,{enableHardwareAcceleration:!1},dg(e.tagName),n.transformTemplate),$I(e,t)})}})},YV={useVisualState:qI({scrapeMotionValuesFromProps:fg,createRenderState:cg})};function XV(n,{forwardMotionProps:e=!1},t,r){return{...lg(n)?QV:YV,preloadedFeatures:t,useRender:BV(e),createVisualElement:r,Component:n}}function Xr(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const KI=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function cd(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const JV=n=>e=>KI(e)&&n(e,cd(e));function Zr(n,e,t,r){return Xr(n,e,JV(t),r)}const ZV=(n,e)=>t=>e(n(t)),Wi=(...n)=>n.reduce(ZV);function GI(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const A0=GI("dragHorizontal"),C0=GI("dragVertical");function QI(n){let e=!1;if(n==="y")e=C0();else if(n==="x")e=A0();else{const t=A0(),r=C0();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function YI(){const n=QI(!0);return n?(n(),!1):!0}class Ji{constructor(e){this.isMounted=!1,this.node=e}update(){}}function R0(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),o=(a,u)=>{if(a.pointerType==="touch"||YI())return;const h=n.getProps();n.animationState&&h.whileHover&&n.animationState.setActive("whileHover",e),h[r]&&Je.update(()=>h[r](a,u))};return Zr(n.current,t,o,{passive:!n.getProps()[r]})}class eM extends Ji{mount(){this.unmount=Wi(R0(this.node,!0),R0(this.node,!1))}unmount(){}}class tM extends Ji{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wi(Xr(this.node.current,"focus",()=>this.onFocus()),Xr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const XI=(n,e)=>e?n===e?!0:XI(n,e.parentElement):!1;function op(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,cd(t))}class nM extends Ji{constructor(){super(...arguments),this.removeStartListeners=ft,this.removeEndListeners=ft,this.removeAccessibleListeners=ft,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=Zr(window,"pointerup",(h,f)=>{if(!this.checkPressEnd())return;const{onTap:p,onTapCancel:_,globalTapTarget:w}=this.node.getProps();Je.update(()=>{!w&&!XI(this.node.current,h.target)?_&&_(h,f):p&&p(h,f)})},{passive:!(r.onTap||r.onPointerUp)}),u=Zr(window,"pointercancel",(h,f)=>this.cancelPress(h,f),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Wi(a,u),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const u=h=>{h.key!=="Enter"||!this.checkPressEnd()||op("up",(f,p)=>{const{onTap:_}=this.node.getProps();_&&Je.update(()=>_(f,p))})};this.removeEndListeners(),this.removeEndListeners=Xr(this.node.current,"keyup",u),op("down",(h,f)=>{this.startPress(h,f)})},t=Xr(this.node.current,"keydown",e),r=()=>{this.isPressing&&op("cancel",(a,u)=>this.cancelPress(a,u))},o=Xr(this.node.current,"blur",r);this.removeAccessibleListeners=Wi(t,o)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Je.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!YI()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Je.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Zr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Xr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Wi(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const qp=new WeakMap,ap=new WeakMap,rM=n=>{const e=qp.get(n.target);e&&e(n)},iM=n=>{n.forEach(rM)};function sM({root:n,...e}){const t=n||document;ap.has(t)||ap.set(t,{});const r=ap.get(t),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(iM,{root:n,...e})),r[o]}function oM(n,e,t){const r=sM(e);return qp.set(n,t),r.observe(n),()=>{qp.delete(n),r.unobserve(n)}}const aM={some:0,all:1};class lM extends Ji{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:o="some",once:a}=e,u={root:t?t.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:aM[o]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:_,onViewportLeave:w}=this.node.getProps(),E=p?_:w;E&&E(f)};return oM(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(uM(e,t))&&this.startObserver()}unmount(){}}function uM({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const cM={inView:{Feature:lM},tap:{Feature:nM},focus:{Feature:tM},hover:{Feature:eM}};function JI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function hM(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function dM(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function hd(n,e,t){const r=n.getProps();return pg(r,e,t!==void 0?t:r.custom,hM(n),dM(n))}let mg=ft;const Fs=n=>n*1e3,ei=n=>n/1e3,fM={current:!1},ZI=n=>Array.isArray(n)&&typeof n[0]=="number";function eS(n){return!!(!n||typeof n=="string"&&tS[n]||ZI(n)||Array.isArray(n)&&n.every(eS))}const Nl=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,tS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nl([0,.65,.55,1]),circOut:Nl([.55,0,1,.45]),backIn:Nl([.31,.01,.66,-.59]),backOut:Nl([.33,1.53,.69,.99])};function nS(n){if(n)return ZI(n)?Nl(n):Array.isArray(n)?n.map(nS):tS[n]}function pM(n,e,t,{delay:r=0,duration:o,repeat:a=0,repeatType:u="loop",ease:h,times:f}={}){const p={[e]:t};f&&(p.offset=f);const _=nS(h);return Array.isArray(_)&&(p.easing=_),n.animate(p,{delay:r,duration:o,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}function mM(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const rS=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,gM=1e-7,yM=12;function vM(n,e,t,r,o){let a,u,h=0;do u=e+(t-e)/2,a=rS(u,r,o)-n,a>0?t=u:e=u;while(Math.abs(a)>gM&&++h<yM);return u}function fu(n,e,t,r){if(n===e&&t===r)return ft;const o=a=>vM(a,0,1,n,t);return a=>a===0||a===1?a:rS(o(a),e,r)}const _M=fu(.42,0,1,1),wM=fu(0,0,.58,1),iS=fu(.42,0,.58,1),TM=n=>Array.isArray(n)&&typeof n[0]!="number",sS=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,oS=n=>e=>1-n(1-e),gg=n=>1-Math.sin(Math.acos(n)),aS=oS(gg),EM=sS(gg),lS=fu(.33,1.53,.69,.99),yg=oS(lS),IM=sS(yg),SM=n=>(n*=2)<1?.5*yg(n):.5*(2-Math.pow(2,-10*(n-1))),PM={linear:ft,easeIn:_M,easeInOut:iS,easeOut:wM,circIn:gg,circInOut:EM,circOut:aS,backIn:yg,backInOut:IM,backOut:lS,anticipate:SM},k0=n=>{if(Array.isArray(n)){mg(n.length===4);const[e,t,r,o]=n;return fu(e,t,r,o)}else if(typeof n=="string")return PM[n];return n},vg=(n,e)=>t=>!!(hu(t)&&AV.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),uS=(n,e,t)=>r=>{if(!hu(r))return r;const[o,a,u,h]=r.match(ud);return{[n]:parseFloat(o),[e]:parseFloat(a),[t]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},xM=n=>Gi(0,255,n),lp={...to,transform:n=>Math.round(xM(n))},Os={test:vg("rgb","red"),parse:uS("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+lp.transform(n)+", "+lp.transform(e)+", "+lp.transform(t)+", "+Fl(Ll.transform(r))+")"};function AM(n){let e="",t="",r="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const Kp={test:vg("#"),parse:AM,transform:Os.transform},Zo={test:vg("hsl","hue"),parse:uS("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Sr.transform(Fl(e))+", "+Sr.transform(Fl(t))+", "+Fl(Ll.transform(r))+")"},nn={test:n=>Os.test(n)||Kp.test(n)||Zo.test(n),parse:n=>Os.test(n)?Os.parse(n):Zo.test(n)?Zo.parse(n):Kp.parse(n),transform:n=>hu(n)?n:n.hasOwnProperty("red")?Os.transform(n):Zo.transform(n)},ot=(n,e,t)=>-t*n+t*e+n;function up(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function CM({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let o=0,a=0,u=0;if(!e)o=a=u=t;else{const h=t<.5?t*(1+e):t+e-t*e,f=2*t-h;o=up(f,h,n+1/3),a=up(f,h,n),u=up(f,h,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}const cp=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},RM=[Kp,Os,Zo],kM=n=>RM.find(e=>e.test(n));function N0(n){const e=kM(n);let t=e.parse(n);return e===Zo&&(t=CM(t)),t}const cS=(n,e)=>{const t=N0(n),r=N0(e),o={...t};return a=>(o.red=cp(t.red,r.red,a),o.green=cp(t.green,r.green,a),o.blue=cp(t.blue,r.blue,a),o.alpha=ot(t.alpha,r.alpha,a),Os.transform(o))};function NM(n){var e,t;return isNaN(n)&&hu(n)&&(((e=n.match(ud))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(jI))===null||t===void 0?void 0:t.length)||0)>0}const hS={regex:PV,countKey:"Vars",token:"${v}",parse:ft},dS={regex:jI,countKey:"Colors",token:"${c}",parse:nn.parse},fS={regex:ud,countKey:"Numbers",token:"${n}",parse:to.parse};function hp(n,{regex:e,countKey:t,token:r,parse:o}){const a=n.tokenised.match(e);a&&(n["num"+t]=a.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...a.map(o)))}function Ph(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&hp(t,hS),hp(t,dS),hp(t,fS),t}function pS(n){return Ph(n).values}function mS(n){const{values:e,numColors:t,numVars:r,tokenised:o}=Ph(n),a=e.length;return u=>{let h=o;for(let f=0;f<a;f++)f<r?h=h.replace(hS.token,u[f]):f<r+t?h=h.replace(dS.token,nn.transform(u[f])):h=h.replace(fS.token,Fl(u[f]));return h}}const bM=n=>typeof n=="number"?0:n;function DM(n){const e=pS(n);return mS(n)(e.map(bM))}const Qi={test:NM,parse:pS,createTransformer:mS,getAnimatableNone:DM},gS=(n,e)=>t=>`${t>0?e:n}`;function yS(n,e){return typeof n=="number"?t=>ot(n,e,t):nn.test(n)?cS(n,e):n.startsWith("var(")?gS(n,e):_S(n,e)}const vS=(n,e)=>{const t=[...n],r=t.length,o=n.map((a,u)=>yS(a,e[u]));return a=>{for(let u=0;u<r;u++)t[u]=o[u](a);return t}},VM=(n,e)=>{const t={...n,...e},r={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(r[o]=yS(n[o],e[o]));return o=>{for(const a in r)t[a]=r[a](o);return t}},_S=(n,e)=>{const t=Qi.createTransformer(e),r=Ph(n),o=Ph(e);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?Wi(vS(r.values,o.values),t):gS(n,e)},Xl=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},b0=(n,e)=>t=>ot(n,e,t);function MM(n){return typeof n=="number"?b0:typeof n=="string"?nn.test(n)?cS:_S:Array.isArray(n)?vS:typeof n=="object"?VM:b0}function jM(n,e,t){const r=[],o=t||MM(n[0]),a=n.length-1;for(let u=0;u<a;u++){let h=o(n[u],n[u+1]);if(e){const f=Array.isArray(e)?e[u]||ft:e;h=Wi(f,h)}r.push(h)}return r}function wS(n,e,{clamp:t=!0,ease:r,mixer:o}={}){const a=n.length;if(mg(a===e.length),a===1)return()=>e[0];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=jM(e,r,o),h=u.length,f=p=>{let _=0;if(h>1)for(;_<n.length-2&&!(p<n[_+1]);_++);const w=Xl(n[_],n[_+1],p);return u[_](w)};return t?p=>f(Gi(n[0],n[a-1],p)):f}function OM(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const o=Xl(0,e,r);n.push(ot(t,1,o))}}function LM(n){const e=[0];return OM(e,n.length-1),e}function FM(n,e){return n.map(t=>t*e)}function UM(n,e){return n.map(()=>e||iS).splice(0,n.length-1)}function xh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const o=TM(r)?r.map(k0):k0(r),a={done:!1,value:e[0]},u=FM(t&&t.length===e.length?t:LM(e),n),h=wS(u,e,{ease:Array.isArray(o)?o:UM(e,o)});return{calculatedDuration:n,next:f=>(a.value=h(f),a.done=f>=n,a)}}function TS(n,e){return e?n*(1e3/e):0}const BM=5;function ES(n,e,t){const r=Math.max(e-BM,0);return TS(t-n(r),e-r)}const dp=.001,zM=.01,$M=10,WM=.05,HM=1;function qM({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let o,a,u=1-e;u=Gi(WM,HM,u),n=Gi(zM,$M,ei(n)),u<1?(o=p=>{const _=p*u,w=_*n,E=_-t,S=Gp(p,u),N=Math.exp(-w);return dp-E/S*N},a=p=>{const w=p*u*n,E=w*t+t,S=Math.pow(u,2)*Math.pow(p,2)*n,N=Math.exp(-w),D=Gp(Math.pow(p,2),u);return(-o(p)+dp>0?-1:1)*((E-S)*N)/D}):(o=p=>{const _=Math.exp(-p*n),w=(p-t)*n+1;return-dp+_*w},a=p=>{const _=Math.exp(-p*n),w=(t-p)*(n*n);return _*w});const h=5/n,f=GM(o,a,h);if(n=Fs(n),isNaN(f))return{stiffness:100,damping:10,duration:n};{const p=Math.pow(f,2)*r;return{stiffness:p,damping:u*2*Math.sqrt(r*p),duration:n}}}const KM=12;function GM(n,e,t){let r=t;for(let o=1;o<KM;o++)r=r-n(r)/e(r);return r}function Gp(n,e){return n*Math.sqrt(1-e*e)}const QM=["duration","bounce"],YM=["stiffness","damping","mass"];function D0(n,e){return e.some(t=>n[t]!==void 0)}function XM(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!D0(n,YM)&&D0(n,QM)){const t=qM(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function IS({keyframes:n,restDelta:e,restSpeed:t,...r}){const o=n[0],a=n[n.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:p,duration:_,velocity:w,isResolvedFromDuration:E}=XM({...r,velocity:-ei(r.velocity||0)}),S=w||0,N=f/(2*Math.sqrt(h*p)),D=a-o,C=ei(Math.sqrt(h/p)),G=Math.abs(D)<5;t||(t=G?.01:2),e||(e=G?.005:.5);let Q;if(N<1){const z=Gp(C,N);Q=J=>{const ce=Math.exp(-N*C*J);return a-ce*((S+N*C*D)/z*Math.sin(z*J)+D*Math.cos(z*J))}}else if(N===1)Q=z=>a-Math.exp(-C*z)*(D+(S+C*D)*z);else{const z=C*Math.sqrt(N*N-1);Q=J=>{const ce=Math.exp(-N*C*J),Z=Math.min(z*J,300);return a-ce*((S+N*C*D)*Math.sinh(Z)+z*D*Math.cosh(Z))/z}}return{calculatedDuration:E&&_||null,next:z=>{const J=Q(z);if(E)u.done=z>=_;else{let ce=S;z!==0&&(N<1?ce=ES(Q,z,J):ce=0);const Z=Math.abs(ce)<=t,b=Math.abs(a-J)<=e;u.done=Z&&b}return u.value=u.done?a:J,u}}}function V0({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:u,min:h,max:f,restDelta:p=.5,restSpeed:_}){const w=n[0],E={done:!1,value:w},S=x=>h!==void 0&&x<h||f!==void 0&&x>f,N=x=>h===void 0?f:f===void 0||Math.abs(h-x)<Math.abs(f-x)?h:f;let D=t*e;const C=w+D,G=u===void 0?C:u(C);G!==C&&(D=G-w);const Q=x=>-D*Math.exp(-x/r),z=x=>G+Q(x),J=x=>{const A=Q(x),V=z(x);E.done=Math.abs(A)<=p,E.value=E.done?G:V};let ce,Z;const b=x=>{S(E.value)&&(ce=x,Z=IS({keyframes:[E.value,N(E.value)],velocity:ES(z,x,E.value),damping:o,stiffness:a,restDelta:p,restSpeed:_}))};return b(0),{calculatedDuration:null,next:x=>{let A=!1;return!Z&&ce===void 0&&(A=!0,J(x),b(x)),ce!==void 0&&x>ce?Z.next(x-ce):(!A&&J(x),E)}}}const JM=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Je.update(e,!0),stop:()=>si(e),now:()=>Kt.isProcessing?Kt.timestamp:performance.now()}},M0=2e4;function j0(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<M0;)e+=t,r=n.next(e);return e>=M0?1/0:e}const ZM={decay:V0,inertia:V0,tween:xh,keyframes:xh,spring:IS};function Ah({autoplay:n=!0,delay:e=0,driver:t=JM,keyframes:r,type:o="keyframes",repeat:a=0,repeatDelay:u=0,repeatType:h="loop",onPlay:f,onStop:p,onComplete:_,onUpdate:w,...E}){let S=1,N=!1,D,C;const G=()=>{C=new Promise(j=>{D=j})};G();let Q;const z=ZM[o]||xh;let J;z!==xh&&typeof r[0]!="number"&&(J=wS([0,100],r,{clamp:!1}),r=[0,100]);const ce=z({...E,keyframes:r});let Z;h==="mirror"&&(Z=z({...E,keyframes:[...r].reverse(),velocity:-(E.velocity||0)}));let b="idle",x=null,A=null,V=null;ce.calculatedDuration===null&&a&&(ce.calculatedDuration=j0(ce));const{calculatedDuration:O}=ce;let F=1/0,R=1/0;O!==null&&(F=O+u,R=F*(a+1)-u);let se=0;const be=j=>{if(A===null)return;S>0&&(A=Math.min(A,j)),S<0&&(A=Math.min(j-R/S,A)),x!==null?se=x:se=Math.round(j-A)*S;const U=se-e*(S>=0?1:-1),X=S>=0?U<0:U>R;se=Math.max(U,0),b==="finished"&&x===null&&(se=R);let oe=se,he=ce;if(a){const He=Math.min(se,R)/F;let rt=Math.floor(He),Dt=He%1;!Dt&&He>=1&&(Dt=1),Dt===1&&rt--,rt=Math.min(rt,a+1),!!(rt%2)&&(h==="reverse"?(Dt=1-Dt,u&&(Dt-=u/F)):h==="mirror"&&(he=Z)),oe=Gi(0,1,Dt)*F}const _e=X?{done:!1,value:r[0]}:he.next(oe);J&&(_e.value=J(_e.value));let{done:De}=_e;!X&&O!==null&&(De=S>=0?se>=R:se<=0);const Be=x===null&&(b==="finished"||b==="running"&&De);return w&&w(_e.value),Be&&q(),_e},xe=()=>{Q&&Q.stop(),Q=void 0},Ae=()=>{b="idle",xe(),D(),G(),A=V=null},q=()=>{b="finished",_&&_(),xe(),D()},de=()=>{if(N)return;Q||(Q=t(be));const j=Q.now();f&&f(),x!==null?A=j-x:(!A||b==="finished")&&(A=j),b==="finished"&&G(),V=A,x=null,b="running",Q.start()};n&&de();const le={then(j,U){return C.then(j,U)},get time(){return ei(se)},set time(j){j=Fs(j),se=j,x!==null||!Q||S===0?x=j:A=Q.now()-j/S},get duration(){const j=ce.calculatedDuration===null?j0(ce):ce.calculatedDuration;return ei(j)},get speed(){return S},set speed(j){j===S||!Q||(S=j,le.time=ei(se))},get state(){return b},play:de,pause:()=>{b="paused",x=se},stop:()=>{N=!0,b!=="idle"&&(b="idle",p&&p(),Ae())},cancel:()=>{V!==null&&be(V),Ae()},complete:()=>{b="finished"},sample:j=>(A=0,be(j))};return le}function ej(n){let e;return()=>(e===void 0&&(e=n()),e)}const tj=ej(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nj=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Lc=10,rj=2e4,ij=(n,e)=>e.type==="spring"||n==="backgroundColor"||!eS(e.ease);function sj(n,e,{onUpdate:t,onComplete:r,...o}){if(!(tj()&&nj.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let u=!1,h,f,p=!1;const _=()=>{f=new Promise(z=>{h=z})};_();let{keyframes:w,duration:E=300,ease:S,times:N}=o;if(ij(e,o)){const z=Ah({...o,repeat:0,delay:0});let J={done:!1,value:w[0]};const ce=[];let Z=0;for(;!J.done&&Z<rj;)J=z.sample(Z),ce.push(J.value),Z+=Lc;N=void 0,w=ce,E=Z-Lc,S="linear"}const D=pM(n.owner.current,e,w,{...o,duration:E,ease:S,times:N}),C=()=>{p=!1,D.cancel()},G=()=>{p=!0,Je.update(C),h(),_()};return D.onfinish=()=>{p||(n.set(mM(w,o)),r&&r(),G())},{then(z,J){return f.then(z,J)},attachTimeline(z){return D.timeline=z,D.onfinish=null,ft},get time(){return ei(D.currentTime||0)},set time(z){D.currentTime=Fs(z)},get speed(){return D.playbackRate},set speed(z){D.playbackRate=z},get duration(){return ei(E)},play:()=>{u||(D.play(),si(C))},pause:()=>D.pause(),stop:()=>{if(u=!0,D.playState==="idle")return;const{currentTime:z}=D;if(z){const J=Ah({...o,autoplay:!1});n.setWithVelocity(J.sample(z-Lc).value,J.sample(z).value,Lc)}G()},complete:()=>{p||D.finish()},cancel:G}}function oj({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const o=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ft,pause:ft,stop:ft,then:a=>(a(),Promise.resolve()),cancel:ft,complete:ft});return e?Ah({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const aj={type:"spring",stiffness:500,damping:25,restSpeed:10},lj=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),uj={type:"keyframes",duration:.8},cj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hj=(n,{keyframes:e})=>e.length>2?uj:eo.has(n)?n.startsWith("scale")?lj(e[1]):aj:cj,Qp=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Qi.test(e)||e==="0")&&!e.startsWith("url(")),dj=new Set(["brightness","contrast","saturate","opacity"]);function fj(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(ud)||[];if(!r)return n;const o=t.replace(r,"");let a=dj.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+o+")"}const pj=/([a-z-]*)\(.*?\)/g,Yp={...Qi,getAnimatableNone:n=>{const e=n.match(pj);return e?e.map(fj).join(" "):n}},mj={...OI,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:Yp,WebkitFilter:Yp},_g=n=>mj[n];function SS(n,e){let t=_g(n);return t!==Yp&&(t=Qi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const PS=n=>/^0[^.\s]+$/.test(n);function gj(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||PS(n)}function yj(n,e,t,r){const o=Qp(e,t);let a;Array.isArray(t)?a=[...t]:a=[null,t];const u=r.from!==void 0?r.from:n.get();let h;const f=[];for(let p=0;p<a.length;p++)a[p]===null&&(a[p]=p===0?u:a[p-1]),gj(a[p])&&f.push(p),typeof a[p]=="string"&&a[p]!=="none"&&a[p]!=="0"&&(h=a[p]);if(o&&f.length&&h)for(let p=0;p<f.length;p++){const _=f[p];a[_]=SS(e,h)}return a}function vj({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:u,repeatDelay:h,from:f,elapsed:p,..._}){return!!Object.keys(_).length}function wg(n,e){return n[e]||n.default||n}const _j={skipAnimations:!1},Tg=(n,e,t,r={})=>o=>{const a=wg(r,n)||{},u=a.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Fs(u);const f=yj(e,n,t,a),p=f[0],_=f[f.length-1],w=Qp(n,p),E=Qp(n,_);let S={keyframes:f,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-h,onUpdate:N=>{e.set(N),a.onUpdate&&a.onUpdate(N)},onComplete:()=>{o(),a.onComplete&&a.onComplete()}};if(vj(a)||(S={...S,...hj(n,S)}),S.duration&&(S.duration=Fs(S.duration)),S.repeatDelay&&(S.repeatDelay=Fs(S.repeatDelay)),!w||!E||fM.current||a.type===!1||_j.skipAnimations)return oj(S);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const N=sj(e,n,S);if(N)return N}return Ah(S)};function Ch(n){return!!(gn(n)&&n.add)}const xS=n=>/^\-?\d*\.?\d+$/.test(n);function Eg(n,e){n.indexOf(e)===-1&&n.push(e)}function Ig(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Sg{constructor(){this.subscriptions=[]}add(e){return Eg(this.subscriptions,e),()=>Ig(this.subscriptions,e)}notify(e,t,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,r);else for(let a=0;a<o;a++){const u=this.subscriptions[a];u&&u(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wj=n=>!isNaN(parseFloat(n));class Tj{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:a,timestamp:u}=Kt;this.lastUpdated!==u&&(this.timeDelta=a,this.lastUpdated=u,Je.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Je.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=wj(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Sg);const r=this.events[e].add(t);return e==="change"?()=>{r(),Je.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?TS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ya(n,e){return new Tj(n,e)}const AS=n=>e=>e.test(n),Ej={test:n=>n==="auto",parse:n=>n},CS=[to,Se,Sr,Vi,RV,CV,Ej],El=n=>CS.find(AS(n)),Ij=[...CS,nn,Qi],Sj=n=>Ij.find(AS(n));function Pj(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ya(t))}function xj(n,e){const t=hd(n,e);let{transitionEnd:r={},transition:o={},...a}=t?n.makeTargetAnimatable(t,!1):{};a={...a,...r};for(const u in a){const h=$V(a[u]);Pj(n,u,h)}}function Aj(n,e,t){var r,o;const a=Object.keys(e).filter(h=>!n.hasValue(h)),u=a.length;if(u)for(let h=0;h<u;h++){const f=a[h],p=e[f];let _=null;Array.isArray(p)&&(_=p[0]),_===null&&(_=(o=(r=t[f])!==null&&r!==void 0?r:n.readValue(f))!==null&&o!==void 0?o:e[f]),_!=null&&(typeof _=="string"&&(xS(_)||PS(_))?_=parseFloat(_):!Sj(_)&&Qi.test(p)&&(_=SS(f,p)),n.addValue(f,ya(_,{owner:n})),t[f]===void 0&&(t[f]=_),_!==null&&n.setBaseTarget(f,_))}}function Cj(n,e){return e?(e[n]||e.default||e).from:void 0}function Rj(n,e,t){const r={};for(const o in n){const a=Cj(o,e);if(a!==void 0)r[o]=a;else{const u=t.getValue(o);u&&(r[o]=u.get())}}return r}function kj({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Nj(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function RS(n,e,{delay:t=0,transitionOverride:r,type:o}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:u,...h}=n.makeTargetAnimatable(e);const f=n.getValue("willChange");r&&(a=r);const p=[],_=o&&n.animationState&&n.animationState.getState()[o];for(const w in h){const E=n.getValue(w),S=h[w];if(!E||S===void 0||_&&kj(_,w))continue;const N={delay:t,elapsed:0,...wg(a||{},w)};if(window.HandoffAppearAnimations){const G=n.getProps()[kI];if(G){const Q=window.HandoffAppearAnimations(G,w,E,Je);Q!==null&&(N.elapsed=Q,N.isHandoff=!0)}}let D=!N.isHandoff&&!Nj(E,S);if(N.type==="spring"&&(E.getVelocity()||N.velocity)&&(D=!1),E.animation&&(D=!1),D)continue;E.start(Tg(w,E,S,n.shouldReduceMotion&&eo.has(w)?{type:!1}:N));const C=E.animation;Ch(f)&&(f.add(w),C.then(()=>f.remove(w))),p.push(C)}return u&&Promise.all(p).then(()=>{u&&xj(n,u)}),p}function Xp(n,e,t={}){const r=hd(n,e,t.custom);let{transition:o=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(o=t.transitionOverride);const a=r?()=>Promise.all(RS(n,r,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:_,staggerDirection:w}=o;return bj(n,e,p+f,_,w,t)}:()=>Promise.resolve(),{when:h}=o;if(h){const[f,p]=h==="beforeChildren"?[a,u]:[u,a];return f().then(()=>p())}else return Promise.all([a(),u(t.delay)])}function bj(n,e,t=0,r=0,o=1,a){const u=[],h=(n.variantChildren.size-1)*r,f=o===1?(p=0)=>p*r:(p=0)=>h-p*r;return Array.from(n.variantChildren).sort(Dj).forEach((p,_)=>{p.notify("AnimationStart",e),u.push(Xp(p,e,{...a,delay:t+f(_)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(u)}function Dj(n,e){return n.sortNodePosition(e)}function Vj(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(a=>Xp(n,a,t));r=Promise.all(o)}else if(typeof e=="string")r=Xp(n,e,t);else{const o=typeof e=="function"?hd(n,e,t.custom):e;r=Promise.all(RS(n,o,t))}return r.then(()=>n.notify("AnimationComplete",e))}const Mj=[...sg].reverse(),jj=sg.length;function Oj(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Vj(n,t,r)))}function Lj(n){let e=Oj(n);const t=Uj();let r=!0;const o=(f,p)=>{const _=hd(n,p);if(_){const{transition:w,transitionEnd:E,...S}=_;f={...f,...S,...E}}return f};function a(f){e=f(n)}function u(f,p){const _=n.getProps(),w=n.getVariantContext(!0)||{},E=[],S=new Set;let N={},D=1/0;for(let G=0;G<jj;G++){const Q=Mj[G],z=t[Q],J=_[Q]!==void 0?_[Q]:w[Q],ce=Ql(J),Z=Q===p?z.isActive:null;Z===!1&&(D=G);let b=J===w[Q]&&J!==_[Q]&&ce;if(b&&r&&n.manuallyAnimateOnMount&&(b=!1),z.protectedKeys={...N},!z.isActive&&Z===null||!J&&!z.prevProp||ad(J)||typeof J=="boolean")continue;let A=Fj(z.prevProp,J)||Q===p&&z.isActive&&!b&&ce||G>D&&ce,V=!1;const O=Array.isArray(J)?J:[J];let F=O.reduce(o,{});Z===!1&&(F={});const{prevResolvedValues:R={}}=z,se={...R,...F},be=xe=>{A=!0,S.has(xe)&&(V=!0,S.delete(xe)),z.needsAnimating[xe]=!0};for(const xe in se){const Ae=F[xe],q=R[xe];if(N.hasOwnProperty(xe))continue;let de=!1;Sh(Ae)&&Sh(q)?de=!JI(Ae,q):de=Ae!==q,de?Ae!==void 0?be(xe):S.add(xe):Ae!==void 0&&S.has(xe)?be(xe):z.protectedKeys[xe]=!0}z.prevProp=J,z.prevResolvedValues=F,z.isActive&&(N={...N,...F}),r&&n.blockInitialAnimation&&(A=!1),A&&(!b||V)&&E.push(...O.map(xe=>({animation:xe,options:{type:Q,...f}})))}if(S.size){const G={};S.forEach(Q=>{const z=n.getBaseTarget(Q);z!==void 0&&(G[Q]=z)}),E.push({animation:G})}let C=!!E.length;return r&&(_.initial===!1||_.initial===_.animate)&&!n.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(E):Promise.resolve()}function h(f,p,_){var w;if(t[f].isActive===p)return Promise.resolve();(w=n.variantChildren)===null||w===void 0||w.forEach(S=>{var N;return(N=S.animationState)===null||N===void 0?void 0:N.setActive(f,p)}),t[f].isActive=p;const E=u(_,f);for(const S in t)t[S].protectedKeys={};return E}return{animateChanges:u,setActive:h,setAnimateFunction:a,getState:()=>t}}function Fj(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!JI(e,n):!1}function Rs(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Uj(){return{animate:Rs(!0),whileInView:Rs(),whileHover:Rs(),whileTap:Rs(),whileDrag:Rs(),whileFocus:Rs(),exit:Rs()}}class Bj extends Ji{constructor(e){super(e),e.animationState||(e.animationState=Lj(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ad(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let zj=0;class $j extends Ji{constructor(){super(...arguments),this.id=zj++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const a=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Wj={animation:{Feature:Bj},exit:{Feature:$j}},O0=(n,e)=>Math.abs(n-e);function Hj(n,e){const t=O0(n.x,e.x),r=O0(n.y,e.y);return Math.sqrt(t**2+r**2)}class kS{constructor(e,t,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=pp(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,S=Hj(w.offset,{x:0,y:0})>=3;if(!E&&!S)return;const{point:N}=w,{timestamp:D}=Kt;this.history.push({...N,timestamp:D});const{onStart:C,onMove:G}=this.handlers;E||(C&&C(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),G&&G(this.lastMoveEvent,w)},this.handlePointerMove=(w,E)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=fp(E,this.transformPagePoint),Je.update(this.updatePoint,!0)},this.handlePointerUp=(w,E)=>{this.end();const{onEnd:S,onSessionEnd:N,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=pp(w.type==="pointercancel"?this.lastMoveEventInfo:fp(E,this.transformPagePoint),this.history);this.startEvent&&S&&S(w,C),N&&N(w,C)},!KI(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=o||window;const u=cd(e),h=fp(u,this.transformPagePoint),{point:f}=h,{timestamp:p}=Kt;this.history=[{...f,timestamp:p}];const{onSessionStart:_}=t;_&&_(e,pp(h,this.history)),this.removeListeners=Wi(Zr(this.contextWindow,"pointermove",this.handlePointerMove),Zr(this.contextWindow,"pointerup",this.handlePointerUp),Zr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),si(this.updatePoint)}}function fp(n,e){return e?{point:e(n.point)}:n}function L0(n,e){return{x:n.x-e.x,y:n.y-e.y}}function pp({point:n},e){return{point:n,delta:L0(n,NS(e)),offset:L0(n,qj(e)),velocity:Kj(e,.1)}}function qj(n){return n[0]}function NS(n){return n[n.length-1]}function Kj(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const o=NS(n);for(;t>=0&&(r=n[t],!(o.timestamp-r.timestamp>Fs(e)));)t--;if(!r)return{x:0,y:0};const a=ei(o.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function Cn(n){return n.max-n.min}function Jp(n,e=0,t=.01){return Math.abs(n-e)<=t}function F0(n,e,t,r=.5){n.origin=r,n.originPoint=ot(e.min,e.max,n.origin),n.scale=Cn(t)/Cn(e),(Jp(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=ot(t.min,t.max,n.origin)-n.originPoint,(Jp(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Ul(n,e,t,r){F0(n.x,e.x,t.x,r?r.originX:void 0),F0(n.y,e.y,t.y,r?r.originY:void 0)}function U0(n,e,t){n.min=t.min+e.min,n.max=n.min+Cn(e)}function Gj(n,e,t){U0(n.x,e.x,t.x),U0(n.y,e.y,t.y)}function B0(n,e,t){n.min=e.min-t.min,n.max=n.min+Cn(e)}function Bl(n,e,t){B0(n.x,e.x,t.x),B0(n.y,e.y,t.y)}function Qj(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ot(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ot(t,n,r.max):Math.min(n,t)),n}function z0(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Yj(n,{top:e,left:t,bottom:r,right:o}){return{x:z0(n.x,t,o),y:z0(n.y,e,r)}}function $0(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Xj(n,e){return{x:$0(n.x,e.x),y:$0(n.y,e.y)}}function Jj(n,e){let t=.5;const r=Cn(n),o=Cn(e);return o>r?t=Xl(e.min,e.max-r,n.min):r>o&&(t=Xl(n.min,n.max-o,e.min)),Gi(0,1,t)}function Zj(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Zp=.35;function eO(n=Zp){return n===!1?n=0:n===!0&&(n=Zp),{x:W0(n,"left","right"),y:W0(n,"top","bottom")}}function W0(n,e,t){return{min:H0(n,e),max:H0(n,t)}}function H0(n,e){return typeof n=="number"?n:n[e]||0}const q0=()=>({translate:0,scale:1,origin:0,originPoint:0}),ea=()=>({x:q0(),y:q0()}),K0=()=>({min:0,max:0}),yt=()=>({x:K0(),y:K0()});function Un(n){return[n("x"),n("y")]}function bS({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function tO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function nO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function mp(n){return n===void 0||n===1}function em({scale:n,scaleX:e,scaleY:t}){return!mp(n)||!mp(e)||!mp(t)}function Ns(n){return em(n)||DS(n)||n.z||n.rotate||n.rotateX||n.rotateY}function DS(n){return G0(n.x)||G0(n.y)}function G0(n){return n&&n!=="0%"}function Rh(n,e,t){const r=n-t,o=e*r;return t+o}function Q0(n,e,t,r,o){return o!==void 0&&(n=Rh(n,o,r)),Rh(n,t,r)+e}function tm(n,e=0,t=1,r,o){n.min=Q0(n.min,e,t,r,o),n.max=Q0(n.max,e,t,r,o)}function VS(n,{x:e,y:t}){tm(n.x,e.translate,e.scale,e.originPoint),tm(n.y,t.translate,t.scale,t.originPoint)}function rO(n,e,t,r=!1){const o=t.length;if(!o)return;e.x=e.y=1;let a,u;for(let h=0;h<o;h++){a=t[h],u=a.projectionDelta;const f=a.instance;f&&f.style&&f.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ta(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,VS(n,u)),r&&Ns(a.latestValues)&&ta(n,a.latestValues))}e.x=Y0(e.x),e.y=Y0(e.y)}function Y0(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Mi(n,e){n.min=n.min+e,n.max=n.max+e}function X0(n,e,[t,r,o]){const a=e[o]!==void 0?e[o]:.5,u=ot(n.min,n.max,a);tm(n,e[t],e[r],u,e.scale)}const iO=["x","scaleX","originX"],sO=["y","scaleY","originY"];function ta(n,e){X0(n.x,e,iO),X0(n.y,e,sO)}function MS(n,e){return bS(nO(n.getBoundingClientRect(),e))}function oO(n,e,t){const r=MS(n,t),{scroll:o}=e;return o&&(Mi(r.x,o.offset.x),Mi(r.y,o.offset.y)),r}const jS=({current:n})=>n?n.ownerDocument.defaultView:null,aO=new WeakMap;class lO{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(cd(_,"page").point)},a=(_,w)=>{const{drag:E,dragPropagation:S,onDragStart:N}=this.getProps();if(E&&!S&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=QI(E),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Un(C=>{let G=this.getAxisMotionValue(C).get()||0;if(Sr.test(G)){const{projection:Q}=this.visualElement;if(Q&&Q.layout){const z=Q.layout.layoutBox[C];z&&(G=Cn(z)*(parseFloat(G)/100))}}this.originPoint[C]=G}),N&&Je.update(()=>N(_,w),!1,!0);const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},u=(_,w)=>{const{dragPropagation:E,dragDirectionLock:S,onDirectionLock:N,onDrag:D}=this.getProps();if(!E&&!this.openGlobalLock)return;const{offset:C}=w;if(S&&this.currentDirection===null){this.currentDirection=uO(C),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",w.point,C),this.updateAxis("y",w.point,C),this.visualElement.render(),D&&D(_,w)},h=(_,w)=>this.stop(_,w),f=()=>Un(_=>{var w;return this.getAnimationState(_)==="paused"&&((w=this.getAxisMotionValue(_).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new kS(e,{onSessionStart:o,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:jS(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Je.update(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:o}=this.getProps();if(!r||!Fc(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=Qj(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&Jo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=Yj(o.layoutBox,t):this.constraints=!1,this.elastic=eO(r),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Un(u=>{this.getAxisMotionValue(u)&&(this.constraints[u]=Zj(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Jo(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=oO(r,o.root,this.visualElement.getTransformPagePoint());let u=Xj(o.layout.layoutBox,a);if(t){const h=t(tO(u));this.hasMutatedConstraints=!!h,h&&(u=bS(h))}return u}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:o,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=Un(_=>{if(!Fc(_,t,this.currentDirection))return;let w=f&&f[_]||{};u&&(w={min:0,max:0});const E=o?200:1e6,S=o?40:1e7,N={type:"inertia",velocity:r?e[_]:0,bounceStiffness:E,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(_,N)});return Promise.all(p).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Tg(e,r,0,t))}stopAnimation(){Un(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Un(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),o=r[t];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Un(t=>{const{drag:r}=this.getProps();if(!Fc(t,r,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(t);if(o&&o.layout){const{min:u,max:h}=o.layout.layoutBox[t];a.set(e[t]-ot(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Jo(t)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Un(u=>{const h=this.getAxisMotionValue(u);if(h){const f=h.get();o[u]=Jj({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Un(u=>{if(!Fc(u,e,null))return;const h=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];h.set(ot(f,p,o[u]))})}addListeners(){if(!this.visualElement.current)return;aO.set(this.visualElement,this);const e=this.visualElement.current,t=Zr(e,"pointerdown",f=>{const{drag:p,dragListener:_=!0}=this.getProps();p&&_&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Jo(f)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const u=Xr(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(Un(_=>{const w=this.getAxisMotionValue(_);w&&(this.originPoint[_]+=f[_].translate,w.set(w.get()+f[_].translate))}),this.visualElement.render())}));return()=>{u(),t(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:u=Zp,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:o,dragConstraints:a,dragElastic:u,dragMomentum:h}}}function Fc(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function uO(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class cO extends Ji{constructor(e){super(e),this.removeGroupControls=ft,this.removeListeners=ft,this.controls=new lO(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ft}unmount(){this.removeGroupControls(),this.removeListeners()}}const J0=n=>(e,t)=>{n&&Je.update(()=>n(e,t))};class hO extends Ji{constructor(){super(...arguments),this.removePointerDownListener=ft}onPointerDown(e){this.session=new kS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:J0(e),onStart:J0(t),onMove:r,onEnd:(a,u)=>{delete this.session,o&&Je.update(()=>o(a,u))}}}mount(){this.removePointerDownListener=Zr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function dO(){const n=B.useContext(sd);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,o=B.useId();return B.useEffect(()=>r(o),[]),!e&&t?[!1,()=>t&&t(o)]:[!0]}const Jc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Z0(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Il={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Se.test(n))n=parseFloat(n);else return n;const t=Z0(n,e.target.x),r=Z0(n,e.target.y);return`${t}% ${r}%`}},fO={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,o=Qi.parse(n);if(o.length>5)return r;const a=Qi.createTransformer(n),u=typeof o[0]!="number"?1:0,h=t.x.scale*e.x,f=t.y.scale*e.y;o[0+u]/=h,o[1+u]/=f;const p=ot(h,f,.5);return typeof o[2+u]=="number"&&(o[2+u]/=p),typeof o[3+u]=="number"&&(o[3+u]/=p),a(o)}};class pO extends Nh.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:o}=this.props,{projection:a}=e;TV(mO),a&&(t.group&&t.group.add(a),r&&r.register&&o&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Jc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:o,isPresent:a}=this.props,u=r.projection;return u&&(u.isPresent=a,o||e.layoutDependency!==t||t===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||Je.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OS(n){const[e,t]=dO(),r=B.useContext(ag);return Nh.createElement(pO,{...n,layoutGroup:r,switchLayoutGroup:B.useContext(bI),isPresent:e,safeToRemove:t})}const mO={borderRadius:{...Il,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Il,borderTopRightRadius:Il,borderBottomLeftRadius:Il,borderBottomRightRadius:Il,boxShadow:fO},LS=["TopLeft","TopRight","BottomLeft","BottomRight"],gO=LS.length,ew=n=>typeof n=="string"?parseFloat(n):n,tw=n=>typeof n=="number"||Se.test(n);function yO(n,e,t,r,o,a){o?(n.opacity=ot(0,t.opacity!==void 0?t.opacity:1,vO(r)),n.opacityExit=ot(e.opacity!==void 0?e.opacity:1,0,_O(r))):a&&(n.opacity=ot(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let u=0;u<gO;u++){const h=`border${LS[u]}Radius`;let f=nw(e,h),p=nw(t,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||tw(f)===tw(p)?(n[h]=Math.max(ot(ew(f),ew(p),r),0),(Sr.test(p)||Sr.test(f))&&(n[h]+="%")):n[h]=p}(e.rotate||t.rotate)&&(n.rotate=ot(e.rotate||0,t.rotate||0,r))}function nw(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const vO=FS(0,.5,aS),_O=FS(.5,.95,ft);function FS(n,e,t){return r=>r<n?0:r>e?1:t(Xl(n,e,r))}function rw(n,e){n.min=e.min,n.max=e.max}function Fn(n,e){rw(n.x,e.x),rw(n.y,e.y)}function iw(n,e,t,r,o){return n-=e,n=Rh(n,1/t,r),o!==void 0&&(n=Rh(n,1/o,r)),n}function wO(n,e=0,t=1,r=.5,o,a=n,u=n){if(Sr.test(e)&&(e=parseFloat(e),e=ot(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=ot(a.min,a.max,r);n===a&&(h-=e),n.min=iw(n.min,e,t,h,o),n.max=iw(n.max,e,t,h,o)}function sw(n,e,[t,r,o],a,u){wO(n,e[t],e[r],e[o],e.scale,a,u)}const TO=["x","scaleX","originX"],EO=["y","scaleY","originY"];function ow(n,e,t,r){sw(n.x,e,TO,t?t.x:void 0,r?r.x:void 0),sw(n.y,e,EO,t?t.y:void 0,r?r.y:void 0)}function aw(n){return n.translate===0&&n.scale===1}function US(n){return aw(n.x)&&aw(n.y)}function IO(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function BS(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function lw(n){return Cn(n.x)/Cn(n.y)}class SO{constructor(){this.members=[]}add(e){Eg(this.members,e),e.scheduleRender()}remove(e){if(Ig(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let r;for(let o=t;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uw(n,e,t){let r="";const o=n.x.translate/e.x,a=n.y.translate/e.y;if((o||a)&&(r=`translate3d(${o}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:f,rotateX:p,rotateY:_}=t;f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),_&&(r+=`rotateY(${_}deg) `)}const u=n.x.scale*e.x,h=n.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const PO=(n,e)=>n.depth-e.depth;class xO{constructor(){this.children=[],this.isDirty=!1}add(e){Eg(this.children,e),this.isDirty=!0}remove(e){Ig(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(PO),this.isDirty=!1,this.children.forEach(e)}}function AO(n,e){const t=performance.now(),r=({timestamp:o})=>{const a=o-t;a>=e&&(si(r),n(a-e))};return Je.read(r,!0),()=>si(r)}function CO(n){window.MotionDebug&&window.MotionDebug.record(n)}function RO(n){return n instanceof SVGElement&&n.tagName!=="svg"}function kO(n,e,t){const r=gn(n)?n:ya(n);return r.start(Tg("",r,e,t)),r.animation}const cw=["","X","Y","Z"],NO={visibility:"hidden"},hw=1e3;let bO=0;const bs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function zS({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(u={},h=e?.()){this.id=bO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,bs.totalNodes=bs.resolvedTargetDeltas=bs.recalculatedProjection=0,this.nodes.forEach(MO),this.nodes.forEach(UO),this.nodes.forEach(BO),this.nodes.forEach(jO),CO(bs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new xO)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Sg),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=RO(u),this.instance=u;const{layoutId:f,layout:p,visualElement:_}=this.options;if(_&&!_.current&&_.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(p||f)&&(this.isLayoutDirty=!0),n){let w;const E=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=AO(E,250),Jc.hasAnimatedSinceResize&&(Jc.hasAnimatedSinceResize=!1,this.nodes.forEach(fw))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&_&&(f||p)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeTargetChanged:S,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||_.getDefaultTransition()||qO,{onLayoutAnimationStart:C,onLayoutAnimationComplete:G}=_.getProps(),Q=!this.targetLayout||!BS(this.targetLayout,N)||S,z=!E&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||z||E&&(Q||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,z);const J={...wg(D,"layout"),onPlay:C,onComplete:G};(_.shouldReduceMotion||this.options.layoutRoot)&&(J.delay=0,J.type=!1),this.startAnimation(J)}else E||fw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,si(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zO),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _=0;_<this.path.length;_++){const w=this.path[_];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dw);return}this.isUpdating||this.nodes.forEach(LO),this.isUpdating=!1,this.nodes.forEach(FO),this.nodes.forEach(DO),this.nodes.forEach(VO),this.clearAllSnapshots();const h=performance.now();Kt.delta=Gi(0,1e3/60,h-Kt.timestamp),Kt.timestamp=h,Kt.isProcessing=!0,sp.update.process(Kt),sp.preRender.process(Kt),sp.render.process(Kt),Kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(OO),this.sharedNodes.forEach($O)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&(this.scroll={animationId:this.root.animationId,phase:u,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform,h=this.projectionDelta&&!US(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,_=p!==this.prevTransformTemplateValue;u&&(h||Ns(this.latestValues)||_)&&(o(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),KO(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return yt();const h=u.measureViewportBox(),{scroll:f}=this.root;return f&&(Mi(h.x,f.offset.x),Mi(h.y,f.offset.y)),h}removeElementScroll(u){const h=yt();Fn(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:_,options:w}=p;if(p!==this.root&&_&&w.layoutScroll){if(_.isRoot){Fn(h,u);const{scroll:E}=this.root;E&&(Mi(h.x,-E.offset.x),Mi(h.y,-E.offset.y))}Mi(h.x,_.offset.x),Mi(h.y,_.offset.y)}}return h}applyTransform(u,h=!1){const f=yt();Fn(f,u);for(let p=0;p<this.path.length;p++){const _=this.path[p];!h&&_.options.layoutScroll&&_.scroll&&_!==_.root&&ta(f,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),Ns(_.latestValues)&&ta(f,_.latestValues)}return Ns(this.latestValues)&&ta(f,this.latestValues),f}removeTransform(u){const h=yt();Fn(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!Ns(p.latestValues))continue;em(p.latestValues)&&p.updateSnapshot();const _=yt(),w=p.measurePageBox();Fn(_,w),ow(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,_)}return Ns(this.latestValues)&&ow(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=Kt.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Bl(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fn(this.target,this.layout.layoutBox),VS(this.target,this.targetDelta)):Fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),Bl(this.relativeTargetOrigin,this.target,S.target),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}bs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||em(this.parent.latestValues)||DS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Kt.timestamp&&(p=!1),p)return;const{layout:_,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(_||w))return;Fn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,S=this.treeScale.y;rO(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox);const{target:N}=h;if(!N){this.projectionTransform&&(this.projectionDelta=ea(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ea(),this.projectionDeltaWithTransform=ea());const D=this.projectionTransform;Ul(this.projectionDelta,this.layoutCorrected,N,this.latestValues),this.projectionTransform=uw(this.projectionDelta,this.treeScale),(this.projectionTransform!==D||this.treeScale.x!==E||this.treeScale.y!==S)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N)),bs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(u,h=!1){const f=this.snapshot,p=f?f.latestValues:{},_={...this.latestValues},w=ea();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=yt(),S=f?f.source:void 0,N=this.layout?this.layout.source:void 0,D=S!==N,C=this.getStack(),G=!C||C.members.length<=1,Q=!!(D&&!G&&this.options.crossfade===!0&&!this.path.some(HO));this.animationProgress=0;let z;this.mixTargetDelta=J=>{const ce=J/1e3;pw(w.x,u.x,ce),pw(w.y,u.y,ce),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bl(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),WO(this.relativeTarget,this.relativeTargetOrigin,E,ce),z&&IO(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=yt()),Fn(z,this.relativeTarget)),D&&(this.animationValues=_,yO(_,p,this.latestValues,ce,Q,G)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ce},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(si(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Je.update(()=>{Jc.hasAnimatedSinceResize=!0,this.currentAnimation=kO(0,hw,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:_}=u;if(!(!h||!f||!p)){if(this!==u&&this.layout&&p&&$S(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||yt();const w=Cn(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+w;const E=Cn(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+E}Fn(h,f),ta(h,_),Ul(this.projectionDeltaWithTransform,this.layoutCorrected,h,_)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new SO),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.rotate||f.rotateX||f.rotateY||f.rotateZ)&&(h=!0),!h)return;const p={};for(let _=0;_<cw.length;_++){const w="rotate"+cw[_];f[w]&&(p[w]=f[w],u.setStaticValue(w,0))}u.render();for(const _ in p)u.setStaticValue(_,p[_]);u.scheduleRender()}getProjectionStyles(u){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return NO;const p={visibility:""},_=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Xc(u?.pointerEvents)||"",p.transform=_?_(this.latestValues,""):"none",p;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const D={};return this.options.layoutId&&(D.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,D.pointerEvents=Xc(u?.pointerEvents)||""),this.hasProjected&&!Ns(this.latestValues)&&(D.transform=_?_({},""):"none",this.hasProjected=!1),D}const E=w.animationValues||w.latestValues;this.applyTransformsToTarget(),p.transform=uw(this.projectionDeltaWithTransform,this.treeScale,E),_&&(p.transform=_(E,p.transform));const{x:S,y:N}=this.projectionDelta;p.transformOrigin=`${S.origin*100}% ${N.origin*100}% 0`,w.animationValues?p.opacity=w===this?(f=(h=E.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:p.opacity=w===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const D in Eh){if(E[D]===void 0)continue;const{correct:C,applyTo:G}=Eh[D],Q=p.transform==="none"?E[D]:C(E[D],w);if(G){const z=G.length;for(let J=0;J<z;J++)p[G[J]]=Q}else p[D]=Q}return this.options.layoutId&&(p.pointerEvents=w===this?Xc(u?.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(dw),this.root.sharedNodes.clear()}}}function DO(n){n.updateLayout()}function VO(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=n.layout,{animationType:a}=n.options,u=t.source!==n.layout.source;a==="size"?Un(w=>{const E=u?t.measuredBox[w]:t.layoutBox[w],S=Cn(E);E.min=r[w].min,E.max=E.min+S}):$S(a,t.layoutBox,r)&&Un(w=>{const E=u?t.measuredBox[w]:t.layoutBox[w],S=Cn(r[w]);E.max=E.min+S,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[w].max=n.relativeTarget[w].min+S)});const h=ea();Ul(h,r,t.layoutBox);const f=ea();u?Ul(f,n.applyTransform(o,!0),t.measuredBox):Ul(f,r,t.layoutBox);const p=!US(h);let _=!1;if(!n.resumeFrom){const w=n.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:E,layout:S}=w;if(E&&S){const N=yt();Bl(N,t.layoutBox,E.layoutBox);const D=yt();Bl(D,r,S.layoutBox),BS(N,D)||(_=!0),w.options.layoutRoot&&(n.relativeTarget=D,n.relativeTargetOrigin=N,n.relativeParent=w)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeTargetChanged:_})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function MO(n){bs.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function jO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function OO(n){n.clearSnapshot()}function dw(n){n.clearMeasurements()}function LO(n){n.isLayoutDirty=!1}function FO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function fw(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function UO(n){n.resolveTargetDelta()}function BO(n){n.calcProjection()}function zO(n){n.resetRotation()}function $O(n){n.removeLeadSnapshot()}function pw(n,e,t){n.translate=ot(e.translate,0,t),n.scale=ot(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function mw(n,e,t,r){n.min=ot(e.min,t.min,r),n.max=ot(e.max,t.max,r)}function WO(n,e,t,r){mw(n.x,e.x,t.x,r),mw(n.y,e.y,t.y,r)}function HO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const qO={duration:.45,ease:[.4,0,.1,1]},gw=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),yw=gw("applewebkit/")&&!gw("chrome/")?Math.round:ft;function vw(n){n.min=yw(n.min),n.max=yw(n.max)}function KO(n){vw(n.x),vw(n.y)}function $S(n,e,t){return n==="position"||n==="preserve-aspect"&&!Jp(lw(e),lw(t),.2)}const GO=zS({attachResizeListener:(n,e)=>Xr(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gp={current:void 0},WS=zS({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!gp.current){const n=new GO({});n.mount(window),n.setOptions({layoutScroll:!0}),gp.current=n}return gp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),QO={pan:{Feature:hO},drag:{Feature:cO,ProjectionNode:WS,MeasureLayout:OS}},YO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function XO(n){const e=YO.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function nm(n,e,t=1){const[r,o]=XO(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const u=a.trim();return xS(u)?parseFloat(u):u}else return Hp(o)?nm(o,e,t+1):o}function JO(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(o=>{const a=o.get();if(!Hp(a))return;const u=nm(a,r);u&&o.set(u)});for(const o in e){const a=e[o];if(!Hp(a))continue;const u=nm(a,r);u&&(e[o]=u,t||(t={}),t[o]===void 0&&(t[o]=a))}return{target:e,transitionEnd:t}}const ZO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),HS=n=>ZO.has(n),eL=n=>Object.keys(n).some(HS),_w=n=>n===to||n===Se,ww=(n,e)=>parseFloat(n.split(", ")[e]),Tw=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return ww(o[1],e);{const a=r.match(/^matrix\((.+)\)$/);return a?ww(a[1],n):0}},tL=new Set(["x","y","z"]),nL=cu.filter(n=>!tL.has(n));function rL(n){const e=[];return nL.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const va={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Tw(4,13),y:Tw(5,14)};va.translateX=va.x;va.translateY=va.y;const iL=(n,e,t)=>{const r=e.measureViewportBox(),o=e.current,a=getComputedStyle(o),{display:u}=a,h={};u==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(p=>{h[p]=va[p](r,a)}),e.render();const f=e.measureViewportBox();return t.forEach(p=>{const _=e.getValue(p);_&&_.jump(h[p]),n[p]=va[p](f,a)}),n},sL=(n,e,t={},r={})=>{e={...e},r={...r};const o=Object.keys(e).filter(HS);let a=[],u=!1;const h=[];if(o.forEach(f=>{const p=n.getValue(f);if(!n.hasValue(f))return;let _=t[f],w=El(_);const E=e[f];let S;if(Sh(E)){const N=E.length,D=E[0]===null?1:0;_=E[D],w=El(_);for(let C=D;C<N&&E[C]!==null;C++)S?mg(El(E[C])===S):S=El(E[C])}else S=El(E);if(w!==S)if(_w(w)&&_w(S)){const N=p.get();typeof N=="string"&&p.set(parseFloat(N)),typeof E=="string"?e[f]=parseFloat(E):Array.isArray(E)&&S===Se&&(e[f]=E.map(parseFloat))}else w?.transform&&S?.transform&&(_===0||E===0)?_===0?p.set(S.transform(_)):e[f]=w.transform(E):(u||(a=rL(n),u=!0),h.push(f),r[f]=r[f]!==void 0?r[f]:e[f],p.jump(E))}),h.length){const f=h.indexOf("height")>=0?window.pageYOffset:null,p=iL(e,n,h);return a.length&&a.forEach(([_,w])=>{n.getValue(_).set(w)}),n.render(),od&&f!==null&&window.scrollTo({top:f}),{target:p,transitionEnd:r}}else return{target:e,transitionEnd:r}};function oL(n,e,t,r){return eL(e)?sL(n,e,t,r):{target:e,transitionEnd:r}}const aL=(n,e,t,r)=>{const o=JO(n,e,r);return e=o.target,r=o.transitionEnd,oL(n,e,t,r)},rm={current:null},qS={current:!1};function lL(){if(qS.current=!0,!!od)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>rm.current=n.matches;n.addListener(e),e()}else rm.current=!1}function uL(n,e,t){const{willChange:r}=e;for(const o in e){const a=e[o],u=t[o];if(gn(a))n.addValue(o,a),Ch(r)&&r.add(o);else if(gn(u))n.addValue(o,ya(a,{owner:n})),Ch(r)&&r.remove(o);else if(u!==a)if(n.hasValue(o)){const h=n.getValue(o);!h.hasAnimated&&h.set(a)}else{const h=n.getStaticValue(o);n.addValue(o,ya(h!==void 0?h:a,{owner:n}))}}for(const o in t)e[o]===void 0&&n.removeValue(o);return e}const Ew=new WeakMap,KS=Object.keys(Yl),cL=KS.length,Iw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],hL=og.length;class dL{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Je.render(this.render,!1,!0);const{latestValues:h,renderState:f}=a;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=u,this.isControllingVariants=ld(t),this.isVariantNode=NI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,..._}=this.scrapeMotionValuesFromProps(t,{});for(const w in _){const E=_[w];h[w]!==void 0&&gn(E)&&(E.set(h[w],!1),Ch(p)&&p.add(w))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Ew.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),qS.current||lL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ew.delete(this.current),this.projection&&this.projection.unmount(),si(this.notifyUpdate),si(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=eo.has(e),o=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Je.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,o,a){let u,h;for(let f=0;f<cL;f++){const p=KS[f],{isEnabled:_,Feature:w,ProjectionNode:E,MeasureLayout:S}=Yl[p];E&&(u=E),_(t)&&(!this.features[p]&&w&&(this.features[p]=new w(this)),S&&(h=S))}if((this.type==="html"||this.type==="svg")&&!this.projection&&u){this.projection=new u(this.latestValues,this.parent&&this.parent.projection);const{layoutId:f,layout:p,drag:_,dragConstraints:w,layoutScroll:E,layoutRoot:S}=t;this.projection.setOptions({layoutId:f,layout:p,alwaysMeasureLayout:!!_||w&&Jo(w),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof p=="string"?p:"both",initialPromotionConfig:a,layoutScroll:E,layoutRoot:S})}return h}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Iw.length;r++){const o=Iw[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a=e["on"+o];a&&(this.propEventSubscriptions[o]=this.on(o,a))}this.prevMotionValues=uL(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<hL;r++){const o=og[r],a=this.props[o];(Ql(a)||a===!1)&&(t[o]=a)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=ya(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(t=pg(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!gn(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Sg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class GS extends dL{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:o},a){let u=Rj(r,e||{},this);if(o&&(t&&(t=o(t)),r&&(r=o(r)),u&&(u=o(u))),a){Aj(this,r,u);const h=aL(this,r,u,t);t=h.transitionEnd,r=h.target}return{transition:e,transitionEnd:t,...r}}}function fL(n){return window.getComputedStyle(n)}class pL extends GS{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(eo.has(t)){const r=_g(t);return r&&r.default||0}else{const r=fL(e),o=(MI(t)?r.getPropertyValue(t):r[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return MS(e,t)}build(e,t,r,o){ug(e,t,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,t){return fg(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,o){BI(e,t,r,o)}}class mL extends GS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(eo.has(t)){const r=_g(t);return r&&r.default||0}return t=zI.has(t)?t:ig(t),e.getAttribute(t)}measureInstanceViewportBox(){return yt()}scrapeMotionValuesFromProps(e,t){return WI(e,t)}build(e,t,r,o){hg(e,t,r,this.isSVGTag,o.transformTemplate)}renderInstance(e,t,r,o){$I(e,t,r,o)}mount(e){this.isSVGTag=dg(e.tagName),super.mount(e)}}const gL=(n,e)=>lg(n)?new mL(e,{enableHardwareAcceleration:!1}):new pL(e,{enableHardwareAcceleration:!0}),yL={layout:{ProjectionNode:WS,MeasureLayout:OS}},vL={...Wj,...cM,...QO,...yL},Xe=_V((n,e)=>XV(n,e,vL,gL));function QS(){const n=B.useRef(!1);return rg(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function _L(){const n=QS(),[e,t]=B.useState(0),r=B.useCallback(()=>{n.current&&t(e+1)},[e]);return[B.useCallback(()=>Je.postRender(r),[r]),e]}class wL extends B.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function TL({children:n,isPresent:e}){const t=B.useId(),r=B.useRef(null),o=B.useRef({width:0,height:0,top:0,left:0});return B.useInsertionEffect(()=>{const{width:a,height:u,top:h,left:f}=o.current;if(e||!r.current||!a||!u)return;r.current.dataset.motionPopId=t;const p=document.createElement("style");return document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${u}px !important;
            top: ${h}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),B.createElement(wL,{isPresent:e,childRef:r,sizeRef:o},B.cloneElement(n,{ref:r}))}const yp=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:u})=>{const h=HI(EL),f=B.useId(),p=B.useMemo(()=>({id:f,initial:e,isPresent:t,custom:o,onExitComplete:_=>{h.set(_,!0);for(const w of h.values())if(!w)return;r&&r()},register:_=>(h.set(_,!1),()=>h.delete(_))}),a?void 0:[t]);return B.useMemo(()=>{h.forEach((_,w)=>h.set(w,!1))},[t]),B.useEffect(()=>{!t&&!h.size&&r&&r()},[t]),u==="popLayout"&&(n=B.createElement(TL,{isPresent:t},n)),B.createElement(sd.Provider,{value:p},n)};function EL(){return new Map}function IL(n){return B.useEffect(()=>()=>n(),[])}const Ds=n=>n.key||"";function SL(n,e){n.forEach(t=>{const r=Ds(t);e.set(r,t)})}function PL(n){const e=[];return B.Children.forEach(n,t=>{B.isValidElement(t)&&e.push(t)}),e}const Sn=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:o,presenceAffectsLayout:a=!0,mode:u="sync"})=>{const h=B.useContext(ag).forceRender||_L()[0],f=QS(),p=PL(n);let _=p;const w=B.useRef(new Map).current,E=B.useRef(_),S=B.useRef(new Map).current,N=B.useRef(!0);if(rg(()=>{N.current=!1,SL(p,S),E.current=_}),IL(()=>{N.current=!0,S.clear(),w.clear()}),N.current)return B.createElement(B.Fragment,null,_.map(Q=>B.createElement(yp,{key:Ds(Q),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:a,mode:u},Q)));_=[..._];const D=E.current.map(Ds),C=p.map(Ds),G=D.length;for(let Q=0;Q<G;Q++){const z=D[Q];C.indexOf(z)===-1&&!w.has(z)&&w.set(z,void 0)}return u==="wait"&&w.size&&(_=[]),w.forEach((Q,z)=>{if(C.indexOf(z)!==-1)return;const J=S.get(z);if(!J)return;const ce=D.indexOf(z);let Z=Q;if(!Z){const b=()=>{w.delete(z);const x=Array.from(S.keys()).filter(A=>!C.includes(A));if(x.forEach(A=>S.delete(A)),E.current=p.filter(A=>{const V=Ds(A);return V===z||x.includes(V)}),!w.size){if(f.current===!1)return;h(),r&&r()}};Z=B.createElement(yp,{key:Ds(J),isPresent:!1,onExitComplete:b,custom:e,presenceAffectsLayout:a,mode:u},J),w.set(z,Z)}_.splice(ce,0,Z)}),_=_.map(Q=>{const z=Q.key;return w.has(z)?Q:B.createElement(yp,{key:Ds(Q),isPresent:!0,presenceAffectsLayout:a,mode:u},Q)}),B.createElement(B.Fragment,null,w.size?_:_.map(Q=>B.cloneElement(Q)))};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(n,e)=>{const t=B.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:u,className:h="",children:f,...p},_)=>B.createElement("svg",{ref:_,...xL,width:o,height:o,stroke:r,strokeWidth:u?Number(a)*24/Number(o):a,className:["lucide",`lucide-${AL(n)}`,h].join(" "),...p},[...e.map(([w,E])=>B.createElement(w,E)),...Array.isArray(f)?f:[f]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=Le("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=Le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=Le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=Le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=Le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=Le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=Le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=Le("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=Le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Le("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=Le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=Le("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=Le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=Le("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=Le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=Le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=Le("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=Le("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=Le("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=Le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=Le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=Le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=Le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=Le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=Le("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Le("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=Le("Tv2",[["path",{d:"M7 21h10",key:"1b0cd5"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=Le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=Le("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=Le("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),qL=async()=>(await new Promise(n=>setTimeout(n,1e3)),{id:1,title:"The Midnight Sky",overview:"A lone scientist in the Arctic races to contact a crew of astronauts returning home to a mysterious global catastrophe.",backdrop_path:"/5UkzNSOK561c2QRy2Zr4AkADzLT.jpg",poster_path:"/51JcEKuBDm03dW0ow170yHmRoL.jpg",release_date:"2020-12-10",vote_average:6.5,video_url:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",gradient:"#0c4a6e, #1e40af"}),KL=async n=>(await new Promise(t=>setTimeout(t,500)),{action:[{id:2,title:"Extraction",poster_path:"/nygOUcBKPHFTbxsYRFZVePqgPK6.jpg",vote_average:7.5,release_date:"2020-04-24"},{id:3,title:"The Old Guard",poster_path:"/cjr4NWURcVN3gW5FlHeabgBHLrY.jpg",vote_average:7.1,release_date:"2020-07-10"},{id:4,title:"Project Power",poster_path:"/TnOeov4w0sTtV2gqICqIxVi74V.jpg",vote_average:6.7,release_date:"2020-08-14"},{id:5,title:"6 Underground",poster_path:"/lnWkyG3LLgbbrIEeyl5mK5VRFe4.jpg",vote_average:6.1,release_date:"2019-12-13"},{id:6,title:"Spenser Confidential",poster_path:"/wcKFYIiVDvRURrzglV9kGu7fpfY.jpg",vote_average:6.2,release_date:"2020-03-06"}],comedy:[{id:7,title:"The Lovebirds",poster_path:"/5jdLnvALCzL6yNbLHWSdAUj6B2A.jpg",vote_average:6.5,release_date:"2020-04-22"},{id:8,title:"Eurovision Song Contest",poster_path:"/lgC7k1S29QhcqQ1x3aSnLlp5hxo.jpg",vote_average:6.9,release_date:"2020-06-26"},{id:9,title:"The Wrong Missy",poster_path:"/vVpXAG2XtOAJ2kqlW6QU6P4MAL2.jpg",vote_average:6.2,release_date:"2020-05-13"},{id:10,title:"Hubie Halloween",poster_path:"/vNn7p4qA507kXlK1prLdWKnjE6.jpg",vote_average:5.7,release_date:"2020-10-07"}],drama:[{id:11,title:"The Trial of the Chicago 7",poster_path:"/ahf5cVdoaTjH4mgSYkGabbmI2cy.jpg",vote_average:7.8,release_date:"2020-09-25"},{id:12,title:"Mank",poster_path:"/x6Hj5Tqhkrt1XhiL4Y9jJbW5Y9O.jpg",vote_average:7.2,release_date:"2020-11-13"},{id:13,title:"The Devil All the Time",poster_path:"/bV7KUXynB7CYVgSfvaBOncE4AlQ.jpg",vote_average:7.1,release_date:"2020-09-11"},{id:14,title:"Da 5 Bloods",poster_path:"/6n7ASmQ2JLaO2deNcWbF6F5X0hI.jpg",vote_average:7.1,release_date:"2020-06-12"}],horror:[{id:15,title:"His House",poster_path:"/4gKx7Vdj4hT4MJLqk4j3X2Pg3dL.jpg",vote_average:6.7,release_date:"2020-10-30"},{id:16,title:"The Babysitter: Killer Queen",poster_path:"/fT5yxT4s8c3u5z4d2KqgFvJmWp2.jpg",vote_average:6.2,release_date:"2020-09-10"},{id:17,title:"Ratched",poster_path:"/hMQdZcM46HwAW6zVTDw2Yf4Yj3s.jpg",vote_average:7.1,release_date:"2020-09-18"}],documentary:[{id:18,title:"The Social Dilemma",poster_path:"/b6RTi5NHU1azbZ2xMPjP6O9uHzB.jpg",vote_average:8,release_date:"2020-09-09"},{id:19,title:"My Octopus Teacher",poster_path:"/uLlfh4Vk9xR6B2w6nyVW0D9V3lF.jpg",vote_average:8.5,release_date:"2020-09-07"},{id:20,title:"The Last Dance",poster_path:"/5xR1Moi3Vfux3XrI9UJx2q3q3Q9.jpg",vote_average:9.1,release_date:"2020-04-19"}]}[n]||[]),GL=async n=>(await new Promise(t=>setTimeout(t,300)),Object.values({...mockMovies.action,...mockMovies.comedy,...mockMovies.drama,...mockMovies.horror,...mockMovies.documentary}).flat().filter(t=>t.title.toLowerCase().includes(n.toLowerCase())).slice(0,8)),QL=({onClose:n})=>{const[e,t]=B.useState(""),[r,o]=B.useState([]),[a,u]=B.useState(!1),h=B.useRef(null),f=B.useRef(null);Nh.useEffect(()=>{f.current&&f.current.focus()},[]);const p=async D=>{if(!D.trim()){o([]);return}u(!0);try{const C=await GL(D);o(C)}catch(C){console.error("Search error:",C)}finally{u(!1)}},_=D=>{clearTimeout(h.current),h.current=setTimeout(()=>{p(D)},300)},w=D=>{const C=D.target.value;t(C),_(C)},E=()=>{t(""),o([]),f.current&&f.current.focus()},S=D=>{console.log("Movie selected:",D),t(""),o([]),n&&n()},N=B.useMemo(()=>r.slice(0,5),[r]);return g.jsxs("div",{className:"search-bar-wrapper",children:[g.jsxs("div",{className:"search-input-wrapper",children:[g.jsx(ZS,{className:"search-icon",size:18}),g.jsx("input",{ref:f,type:"text",value:e,onChange:w,placeholder:"Titles, people, genres...",className:"search-input"}),e&&g.jsx("button",{onClick:E,className:"search-clear",children:g.jsx(n1,{size:18})})]}),g.jsx(Sn,{children:e&&g.jsx(Xe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"search-results-dropdown",children:a?g.jsxs("div",{className:"search-loading",children:[g.jsx("div",{className:"search-spinner"}),g.jsx("span",{children:"Searching..."})]}):N.length>0?g.jsxs(g.Fragment,{children:[N.map(D=>g.jsxs("div",{className:"search-result-item",onClick:()=>S(D),children:[g.jsx("img",{src:`https://image.tmdb.org/t/p/w92${D.poster_path}`,alt:D.title,className:"search-result-poster"}),g.jsxs("div",{className:"search-result-info",children:[g.jsx("div",{className:"search-result-title",children:D.title}),g.jsx("div",{className:"search-result-year",children:new Date(D.release_date).getFullYear()})]})]},D.id)),g.jsx("div",{className:"search-footer",children:g.jsxs("button",{className:"view-all-results",children:['View all results for "',e,'"']})})]}):g.jsxs("div",{className:"search-no-results",children:['No results found for "',e,'"']})})})]})},_a=()=>{const{currentUser:n,currentProfile:e,logout:t,userPreferences:r}=Zs(),[o,a]=B.useState(!1),[u,h]=B.useState(!1),[f,p]=B.useState(!1),[_,w]=B.useState(!1),[E,S]=B.useState(!1),N=B.useRef(null),D=B.useRef(null),C=B.useRef(null);B.useEffect(()=>{const Z=()=>{a(window.scrollY>100)};return window.addEventListener("scroll",Z),()=>window.removeEventListener("scroll",Z)},[]),B.useEffect(()=>{const Z=b=>{D.current&&!D.current.contains(b.target)&&w(!1),C.current&&!C.current.contains(b.target)&&p(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]);const G=[{id:1,title:"New episode available",message:"Stranger Things S4E3 is now available",time:"10 minutes ago",read:!1,type:"new_content"},{id:2,title:"Watchlist update",message:"The Witcher added to your watchlist",time:"1 hour ago",read:!0,type:"watchlist"},{id:3,title:"Subscription reminder",message:"Your subscription renews in 3 days",time:"2 hours ago",read:!0,type:"subscription"}],Q=G.filter(Z=>!Z.read).length,z=[{id:1,label:"Home",path:"/"},{id:2,label:"TV Shows",path:"/tv"},{id:3,label:"Movies",path:"/movies"},{id:4,label:"New & Popular",path:"/latest"},{id:5,label:"My List",path:"/mylist"}],J=async()=>{try{await t(),w(!1)}catch(Z){console.error("Logout error:",Z)}},ce=Z=>{console.log("Notification clicked:",Z),p(!1)};return g.jsxs(g.Fragment,{children:[g.jsxs("nav",{ref:N,className:`navbar ${o?"scrolled":""} ${u?"search-active":""}`,children:[g.jsxs("div",{className:"navbar-container",children:[g.jsxs("div",{className:"navbar-left",children:[g.jsx("a",{href:"/",className:"navbar-logo",children:g.jsx("span",{className:"logo-text",children:"NETFLIX"})}),g.jsx("div",{className:"navbar-links",children:z.map(Z=>g.jsx("a",{href:Z.path,className:"nav-link",children:Z.label},Z.id))})]}),g.jsxs("div",{className:"navbar-right",children:[g.jsxs("div",{className:"search-container",children:[g.jsx("button",{className:"nav-button search-toggle",onClick:()=>h(!u),"aria-label":"Search",children:g.jsx(ZS,{size:20})}),g.jsx(Sn,{children:u&&g.jsx(Xe.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"300px"},exit:{opacity:0,width:0},className:"search-bar-container",children:g.jsx(QL,{onClose:()=>h(!1)})})})]}),g.jsxs("div",{className:"notifications-container",ref:C,children:[g.jsxs("button",{className:"nav-button notifications-toggle",onClick:()=>{p(!f),w(!1)},"aria-label":"Notifications",children:[g.jsx(YS,{size:20}),Q>0&&g.jsx("span",{className:"notification-badge",children:Q})]}),g.jsx(Sn,{children:f&&g.jsxs(Xe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"notifications-dropdown",children:[g.jsxs("div",{className:"notifications-header",children:[g.jsx("h3",{children:"Notifications"}),g.jsxs("span",{className:"notifications-count",children:[Q," new"]})]}),g.jsx("div",{className:"notifications-list",children:G.map(Z=>g.jsxs("div",{className:`notification-item ${Z.read?"read":"unread"}`,onClick:()=>ce(Z.id),children:[g.jsxs("div",{className:"notification-content",children:[g.jsx("div",{className:"notification-title",children:Z.title}),g.jsx("div",{className:"notification-message",children:Z.message}),g.jsx("div",{className:"notification-time",children:Z.time})]}),!Z.read&&g.jsx("div",{className:"notification-indicator"})]},Z.id))}),g.jsx("div",{className:"notifications-footer",children:g.jsx("a",{href:"/notifications",className:"view-all-link",children:"View all notifications"})})]})})]}),g.jsxs("div",{className:"user-menu-container",ref:D,children:[g.jsxs("button",{className:"user-menu-toggle",onClick:()=>{w(!_),p(!1)},"aria-label":"User menu",children:[e?.avatar?g.jsx("img",{src:e.avatar,alt:e.name,className:"user-avatar"}):g.jsx("div",{className:"user-avatar-placeholder",children:e?.name?.charAt(0)?.toUpperCase()||"U"}),g.jsx(XS,{size:16,className:`chevron ${_?"rotated":""}`})]}),g.jsx(Sn,{children:_&&g.jsxs(Xe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"user-menu-dropdown",children:[g.jsxs("div",{className:"user-info",children:[e?.avatar?g.jsx("img",{src:e.avatar,alt:e.name,className:"user-info-avatar"}):g.jsx("div",{className:"user-info-avatar-placeholder",children:e?.name?.charAt(0)?.toUpperCase()||"U"}),g.jsxs("div",{className:"user-details",children:[g.jsx("div",{className:"user-name",children:e?.name||"User"}),g.jsx("div",{className:"user-email",children:n?.email})]})]}),g.jsx("div",{className:"dropdown-divider"}),g.jsxs("a",{href:"/profile",className:"dropdown-item",children:[g.jsx(Rw,{size:18}),g.jsx("span",{children:"Manage Profiles"})]}),g.jsxs("a",{href:"/account",className:"dropdown-item",children:[g.jsx(sm,{size:18}),g.jsx("span",{children:"Account Settings"})]}),g.jsxs("a",{href:"/help",className:"dropdown-item",children:[g.jsx(Sw,{size:18}),g.jsx("span",{children:"Help Center"})]}),g.jsx("div",{className:"dropdown-divider"}),g.jsxs("button",{className:"dropdown-item logout-button",onClick:J,children:[g.jsx(Aw,{size:18}),g.jsx("span",{children:"Sign Out"})]}),g.jsx("div",{className:"app-version",children:"v1.0.0"})]})})]}),g.jsx("button",{className:"mobile-menu-toggle",onClick:()=>S(!E),"aria-label":"Mobile menu",children:g.jsxs("div",{className:`hamburger ${E?"active":""}`,children:[g.jsx("span",{}),g.jsx("span",{}),g.jsx("span",{})]})})]})]}),g.jsx(Sn,{children:E&&g.jsxs(Xe.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},className:"mobile-menu",children:[g.jsxs("div",{className:"mobile-menu-header",children:[g.jsxs("div",{className:"mobile-user-info",children:[e?.avatar?g.jsx("img",{src:e.avatar,alt:e.name,className:"mobile-user-avatar"}):g.jsx("div",{className:"mobile-user-avatar-placeholder",children:e?.name?.charAt(0)?.toUpperCase()||"U"}),g.jsx("span",{className:"mobile-user-name",children:e?.name||"User"})]}),g.jsx("button",{className:"mobile-menu-close",onClick:()=>S(!1),children:"×"})]}),g.jsxs("div",{className:"mobile-menu-content",children:[g.jsx("div",{className:"mobile-nav-links",children:z.map(Z=>g.jsx("a",{href:Z.path,className:"mobile-nav-link",onClick:()=>S(!1),children:Z.label},Z.id))}),g.jsx("div",{className:"mobile-menu-divider"}),g.jsxs("div",{className:"mobile-menu-items",children:[g.jsxs("a",{href:"/profile",className:"mobile-menu-item",children:[g.jsx(Rw,{size:20}),g.jsx("span",{children:"Manage Profiles"})]}),g.jsxs("a",{href:"/account",className:"mobile-menu-item",children:[g.jsx(sm,{size:20}),g.jsx("span",{children:"Account Settings"})]}),g.jsxs("a",{href:"/help",className:"mobile-menu-item",children:[g.jsx(Sw,{size:20}),g.jsx("span",{children:"Help Center"})]}),g.jsxs("button",{className:"mobile-menu-item logout-button",onClick:J,children:[g.jsx(Aw,{size:20}),g.jsx("span",{children:"Sign Out"})]})]})]})]})})]}),g.jsx(Sn,{children:E&&g.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mobile-menu-overlay",onClick:()=>S(!1)})})]})},YL=({movie:n,profile:e})=>{const[t,r]=B.useState(!1),[o,a]=B.useState(!1),u=B.useRef(null),h=B.useRef(null),{currentUser:f}=Zs(),p=()=>{h.current=setTimeout(()=>{r(!0),a(!0)},500)},_=()=>{clearTimeout(h.current),r(!1),a(!1),u.current&&(u.current.currentTime=0,u.current.pause())},w=async N=>{if(!f||!e)return;const D=kt(Nt,"users",f.uid,"profiles",e.id);N==="like"?await tn(D,{likedMovies:o0(n.id),dislikedMovies:a0(n.id)}):N==="dislike"&&await tn(D,{dislikedMovies:o0(n.id),likedMovies:a0(n.id)})},E=e?.likedMovies?.includes(n.id),S=e?.dislikedMovies?.includes(n.id);return g.jsxs(Xe.div,{className:"movie-card",onHoverStart:p,onHoverEnd:_,layout:!0,children:[g.jsx("img",{src:`https://image.tmdb.org/t/p/w500${n.poster_path}`,alt:n.title,className:"movie-poster"}),t&&g.jsxs(Xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"movie-hover-overlay",children:[o&&n.trailer_url&&g.jsx("video",{ref:u,src:n.trailer_url,autoPlay:!0,muted:!0,loop:!0,className:"trailer-video"}),g.jsxs("div",{className:"movie-actions",children:[g.jsx("button",{className:"action-button primary",children:g.jsx(kh,{size:20,fill:"currentColor"})}),g.jsx("button",{className:"action-button secondary",children:g.jsx(JS,{size:20})}),g.jsx("button",{className:`action-button ${E?"liked":"secondary"}`,onClick:()=>w("like"),children:g.jsx(e1,{size:20})}),g.jsx("button",{className:`action-button ${S?"disliked":"secondary"}`,onClick:()=>w("dislike"),children:g.jsx($L,{size:20})})]}),g.jsxs("div",{className:"movie-info",children:[g.jsx("h3",{children:n.title}),g.jsxs("div",{className:"movie-meta",children:[g.jsxs("span",{className:"match-rating",children:[n.match,"% Match"]}),g.jsx("span",{children:n.release_date?.split("-")[0]}),g.jsx("span",{className:"quality-badge",children:"HD"})]}),g.jsx("div",{className:"genre-tags",children:n.genres?.map(N=>g.jsx("span",{className:"genre-tag",children:N},N))})]})]})]})},Go=({title:n,movies:e,genre:t})=>{const[r,o]=B.useState(0),[a,u]=B.useState(!1),h=B.useRef(null),{currentProfile:f}=Zs(),p=E=>{if(a)return;u(!0);const S=400,N=E==="left"?Math.max(0,r-S):r+S;o(N),h.current&&h.current.scrollTo({left:N,behavior:"smooth"}),setTimeout(()=>u(!1),300)},_=r>0,w=h.current&&r<h.current.scrollWidth-h.current.clientWidth;return g.jsxs("div",{className:"movie-carousel",children:[g.jsx("h2",{className:"carousel-title",children:n}),g.jsxs("div",{className:"carousel-container",children:[g.jsx(Sn,{children:_&&g.jsx(Xe.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},whileHover:{scale:1.1},onClick:()=>p("left"),className:"carousel-nav-btn left",children:g.jsx(RL,{className:"text-white",size:24})})}),g.jsx(Sn,{children:w&&g.jsx(Xe.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},whileHover:{scale:1.1},onClick:()=>p("right"),className:"carousel-nav-btn right",children:g.jsx(kL,{className:"text-white",size:24})})}),g.jsx("div",{ref:h,className:"carousel-content",children:e.map((E,S)=>g.jsx(Xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S*.1},className:"carousel-item",children:g.jsx(YL,{movie:E,profile:f})},E.id))})]}),g.jsx("div",{className:"carousel-progress",children:g.jsx("div",{className:"progress-bar",children:g.jsx(Xe.div,{className:"progress-fill",initial:{width:0},animate:{width:h.current?`${r/(h.current.scrollWidth-h.current.clientWidth)*100}%`:"0%"},transition:{type:"spring",stiffness:300,damping:30}})})})]})},XL=({profiles:n,currentProfile:e,onProfileSelect:t,onProfileEdit:r,onProfileDelete:o,onProfileCreate:a})=>{const[u,h]=B.useState(!1),{currentUser:f}=Zs(),p=({profile:_,isCurrent:w=!1})=>g.jsxs(Xe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`profile-card ${w?"current":""}`,onClick:()=>!u&&t(_),children:[g.jsx("div",{className:"profile-avatar",children:_.avatar?g.jsx("img",{src:_.avatar,alt:_.name}):g.jsx("div",{className:"profile-initial",children:_.name.charAt(0).toUpperCase()})}),g.jsx("div",{className:"profile-name",children:_.name}),_.watchStats?.totalHours>0&&g.jsxs("div",{className:"profile-analytics-badge",children:[Math.round(_.watchStats.totalHours),"h"]}),u&&g.jsxs("div",{className:"profile-edit-overlay",children:[g.jsx("button",{onClick:()=>r(_),className:"edit-profile-btn",children:g.jsx(BL,{size:16})}),n.length>1&&g.jsx("button",{onClick:()=>o(_.id),className:"delete-profile-btn",children:g.jsx(t1,{size:16})})]})]});return g.jsxs("div",{className:"profile-switcher",children:[g.jsxs("div",{className:"profile-header",children:[g.jsx("h2",{className:"profile-title",children:"Who's watching?"}),g.jsxs("div",{className:"profile-controls",children:[g.jsx("button",{onClick:()=>h(!u),className:"manage-profiles-btn",children:u?"Done":"Manage Profiles"}),g.jsx("button",{onClick:()=>{},className:"analytics-btn",title:"View Analytics",children:g.jsx(im,{size:24})})]})]}),g.jsxs("div",{className:"profiles-grid",children:[n.map(_=>g.jsx(p,{profile:_,isCurrent:_.id===e?.id},_.id)),n.length<5&&g.jsxs(Xe.div,{whileHover:{scale:1.05},className:"add-profile-card",onClick:a,children:[g.jsx("div",{className:"add-profile-avatar",children:g.jsx(JS,{className:"add-profile-icon",size:48})}),g.jsx("div",{className:"add-profile-text",children:"Add Profile"})]})]}),g.jsxs("div",{className:"analytics-summary",children:[g.jsx("h3",{className:"analytics-title",children:"Viewing Activity"}),g.jsxs("div",{className:"analytics-grid",children:[g.jsxs("div",{className:"analytics-item",children:[g.jsx("div",{className:"analytics-value",children:n.reduce((_,w)=>_+(w.watchStats?.totalMovies||0),0)}),g.jsx("div",{className:"analytics-label",children:"Movies Watched"})]}),g.jsxs("div",{className:"analytics-item",children:[g.jsxs("div",{className:"analytics-value",children:[Math.round(n.reduce((_,w)=>_+(w.watchStats?.totalHours||0),0)),"h"]}),g.jsx("div",{className:"analytics-label",children:"Total Watch Time"})]}),g.jsxs("div",{className:"analytics-item",children:[g.jsx("div",{className:"analytics-value",children:n.reduce((_,w)=>_+(w.likedMovies?.length||0),0)}),g.jsx("div",{className:"analytics-label",children:"Liked Content"})]})]})]})]})},JL=()=>{const{currentUser:n,currentProfile:e,hasActiveSubscription:t}=Zs(),[r,o]=B.useState(null),[a,u]=B.useState({}),[h,f]=B.useState(!e),[p,_]=B.useState(!0),[w,E]=B.useState(!1),[S,N]=B.useState(!1),[D,C]=B.useState(!0),G=B.useRef(null),Q=B.useRef(null);B.useEffect(()=>{(async()=>{try{C(!0);const A=await qL();o(A);const V=["action","comedy","drama","horror","documentary"],O=V.map(se=>KL(se)),F=await Promise.all(O),R={};V.forEach((se,be)=>{R[se]=F[be]}),u(R)}catch(A){console.error("Error loading content:",A)}finally{C(!1)}})()},[]);const z=()=>{G.current&&(w?G.current.pause():G.current.play(),E(!w))},J=()=>{G.current&&(G.current.muted=!p,_(!p))},ce=()=>{N(!0),clearTimeout(Q.current),Q.current=setTimeout(()=>{N(!1)},3e3)},Z=()=>{G.current&&(G.current.requestFullscreen?G.current.requestFullscreen():G.current.webkitRequestFullscreen&&G.current.webkitRequestFullscreen())},b=()=>r?r.backdrop_path?`linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.7)), url(https://image.tmdb.org/t/p/original${r.backdrop_path})`:`linear-gradient(135deg, ${r.gradient||"#0c4a6e, #1e40af"})`:"";return h&&n?g.jsx("div",{className:"home-container",children:g.jsx(XL,{onProfileSelect:()=>f(!1),onProfileCreate:()=>f(!1)})}):D?g.jsxs("div",{className:"home-container",children:[g.jsx(_a,{}),g.jsxs("div",{className:"loading-container",children:[g.jsx("div",{className:"loading-spinner"}),g.jsx("p",{children:"Loading amazing content..."})]})]}):g.jsxs("div",{className:"home-container",children:[g.jsx(_a,{}),g.jsxs("section",{className:"featured-section",style:{backgroundImage:b()},onMouseMove:ce,children:[g.jsx("div",{className:"featured-overlay",children:g.jsxs("div",{className:"featured-content",children:[g.jsxs(Xe.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"featured-info",children:[g.jsx("h1",{className:"featured-title",children:r?.title||r?.name}),g.jsxs("div",{className:"featured-meta",children:[g.jsxs("span",{className:"match-badge",children:[r?.vote_average*10,"% Match"]}),g.jsx("span",{className:"year",children:new Date(r?.release_date).getFullYear()}),g.jsx("span",{className:"quality",children:"HD"}),g.jsx("span",{className:"maturity-rating",children:"PG-13"})]}),g.jsx("p",{className:"featured-description",children:r?.overview}),g.jsxs("div",{className:"featured-actions",children:[g.jsxs("button",{className:"play-button",onClick:z,children:[g.jsx(kh,{size:24,fill:"currentColor"}),w?"Pause":"Play"]}),g.jsxs("button",{className:"more-info-button",children:[g.jsx(jL,{size:24}),"More Info"]})]})]}),r?.video_url&&g.jsxs("div",{className:"featured-video-container",children:[g.jsx("video",{ref:G,src:r.video_url,muted:p,loop:!0,className:"featured-video",onPlay:()=>E(!0),onPause:()=>E(!1)}),g.jsx(Sn,{children:S&&g.jsxs(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"video-controls",children:[g.jsxs("div",{className:"controls-left",children:[g.jsx("button",{className:"control-button",onClick:z,children:w?"❚❚":"▶"}),g.jsx("button",{className:"control-button",onClick:J,children:p?g.jsx(HL,{size:20}):g.jsx(WL,{size:20})}),g.jsx("div",{className:"volume-slider",children:g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",className:"volume-range"})})]}),g.jsxs("div",{className:"controls-right",children:[g.jsx("button",{className:"control-button",onClick:Z,children:g.jsx(OL,{size:20})}),g.jsx("button",{className:"control-button",children:g.jsx(sm,{size:20})})]})]})})]})]})}),g.jsx("div",{className:"bottom-gradient"})]}),g.jsx("section",{className:"carousels-section",children:g.jsxs("div",{className:"container",children:[a.action&&g.jsx(Go,{title:"Trending Now",movies:a.action.slice(0,10),genre:"action"}),a.drama&&g.jsx(Go,{title:"Popular on Netflix",movies:a.drama.slice(0,10),genre:"drama"}),a.comedy&&g.jsx(Go,{title:"Comedies",movies:a.comedy.slice(0,10),genre:"comedy"}),a.horror&&g.jsx(Go,{title:"Horror Movies",movies:a.horror.slice(0,10),genre:"horror"}),a.documentary&&g.jsx(Go,{title:"Documentaries",movies:a.documentary.slice(0,10),genre:"documentary"}),e?.likedMovies&&e.likedMovies.length>0&&g.jsx(Go,{title:"Because you liked...",movies:a.action?.slice(0,8)||[],genre:"recommendations"})]})}),!t()&&g.jsx("section",{className:"subscription-banner",children:g.jsx("div",{className:"container",children:g.jsxs("div",{className:"banner-content",children:[g.jsx("h2",{children:"Unlimited movies, TV shows, and more."}),g.jsx("p",{children:"Watch anywhere. Cancel anytime."}),g.jsx("button",{className:"subscribe-button",children:"Subscribe Now"})]})})}),g.jsx("footer",{className:"home-footer",children:g.jsxs("div",{className:"container",children:[g.jsxs("div",{className:"footer-content",children:[g.jsxs("div",{className:"footer-section",children:[g.jsx("h3",{children:"Questions? Contact us."}),g.jsxs("div",{className:"footer-links",children:[g.jsx("a",{href:"#",children:"FAQ"}),g.jsx("a",{href:"#",children:"Help Center"}),g.jsx("a",{href:"#",children:"Terms of Use"}),g.jsx("a",{href:"#",children:"Privacy"}),g.jsx("a",{href:"#",children:"Cookie Preferences"}),g.jsx("a",{href:"#",children:"Corporate Information"})]})]}),g.jsxs("div",{className:"footer-section",children:[g.jsx("h3",{children:"Account"}),g.jsxs("div",{className:"footer-links",children:[g.jsx("a",{href:"#",children:"Manage Profiles"}),g.jsx("a",{href:"#",children:"Subscription"}),g.jsx("a",{href:"#",children:"Redeem Gift Cards"}),g.jsx("a",{href:"#",children:"Buy Gift Cards"})]})]}),g.jsxs("div",{className:"footer-section",children:[g.jsx("h3",{children:"Ways to Watch"}),g.jsxs("div",{className:"footer-links",children:[g.jsx("a",{href:"#",children:"TV"}),g.jsx("a",{href:"#",children:"Mobile"}),g.jsx("a",{href:"#",children:"Tablet"}),g.jsx("a",{href:"#",children:"Computer"})]})]})]}),g.jsx("div",{className:"footer-bottom",children:g.jsx("p",{children:"© 2024 Netflix Clone. For educational purposes."})})]})})]})},ZL=()=>{const{currentUser:n,currentProfile:e,userPreferences:t,updatePreferences:r,updateProfileData:o,createProfile:a,deleteProfile:u,switchProfile:h,trackMovieInteraction:f}=Zs(),[p,_]=B.useState("profile"),[w,E]=B.useState(!1),[S,N]=B.useState(null),[D,C]=B.useState(!1),[G,Q]=B.useState(!1),[z,J]=B.useState({name:"",isChild:!1,pinProtected:!1,pin:""}),[ce,Z]=B.useState([]),[b,x]=B.useState(null);B.useEffect(()=>{e&&(N({...e}),A(),V())},[e]);const A=async()=>{setTimeout(()=>{Z([{id:1,title:"Stranger Things",type:"TV Show",season:4,episode:3,poster:"/49WJfeN0moxb9IPfGn8AIqMGskD.jpg",progress:75,duration:45,watchedAt:new Date(Date.now()-7200*1e3),continueTime:1200},{id:2,title:"The Gray Man",type:"Movie",poster:"/8cXbitsS6dWQ5gfMTZdorpAAzEH.jpg",progress:100,duration:129,watchedAt:new Date(Date.now()-1440*60*1e3),rating:4}])},500)},V=async()=>{setTimeout(()=>{x({totalWatchTime:14520,moviesWatched:45,seriesWatched:12,averageRating:4.2,favoriteGenres:["Action","Thriller","Sci-Fi"],dailyAverage:120,topContent:[{title:"Stranger Things",hours:24,type:"Series"},{title:"The Gray Man",hours:2.1,type:"Movie"},{title:"Ozark",hours:18,type:"Series"}]})},500)},O=async()=>{if(!(!S||!e))try{await o(e.id,S),E(!1)}catch(q){console.error("Error updating profile:",q)}},F=()=>{N({...e}),E(!1)},R=async()=>{if(z.name.trim())try{await a(z),Q(!1),J({name:"",isChild:!1,pinProtected:!1,pin:""})}catch(q){console.error("Error creating profile:",q)}},se=async()=>{if(e)try{await u(e.id),C(!1)}catch(q){console.error("Error deleting profile:",q)}},be=async(q,de)=>{await r({[q]:de})},xe=q=>{const de=Math.floor(q/60),le=q%60;return de>0?`${de}h ${le}m`:`${le}m`},Ae=q=>{const le=Math.floor((new Date-q)/(1e3*60));return le<60?`${le}m ago`:le<1440?`${Math.floor(le/60)}h ago`:`${Math.floor(le/1440)}d ago`};return e?g.jsxs("div",{className:"profile-container",children:[g.jsx(_a,{}),g.jsxs("div",{className:"profile-content",children:[g.jsx("section",{className:"profile-header",children:g.jsx("div",{className:"container",children:g.jsxs("div",{className:"header-content",children:[g.jsxs("div",{className:"profile-avatar-section",children:[g.jsxs("div",{className:"profile-avatar-large",children:[e.avatar?g.jsx("img",{src:e.avatar,alt:e.name}):g.jsx("span",{className:"avatar-initial",children:e.name.charAt(0).toUpperCase()}),w&&g.jsx("button",{className:"avatar-edit-btn",children:g.jsx(CL,{size:20})})]}),g.jsxs("div",{className:"profile-info",children:[g.jsxs("div",{className:"profile-name-section",children:[w?g.jsx("input",{type:"text",value:S?.name||"",onChange:q=>N({...S,name:q.target.value}),className:"name-input",maxLength:20}):g.jsx("h1",{className:"profile-name",children:e.name}),e.isChild&&g.jsx("span",{className:"child-badge",children:"Kids"})]}),g.jsx("p",{className:"profile-email",children:n?.email}),g.jsxs("p",{className:"profile-stats",children:[ce.length," titles watched • ",b?xe(b.totalWatchTime):"0h 0m"," total"]})]})]}),g.jsx("div",{className:"profile-actions",children:w?g.jsxs("div",{className:"edit-actions",children:[g.jsxs("button",{className:"btn-secondary",onClick:F,children:[g.jsx(n1,{size:18}),"Cancel"]}),g.jsxs("button",{className:"btn-primary",onClick:O,children:[g.jsx(FL,{size:18}),"Save Changes"]})]}):g.jsxs("div",{className:"view-actions",children:[g.jsxs("button",{className:"btn-secondary",onClick:()=>E(!0),children:[g.jsx(LL,{size:18}),"Edit Profile"]}),g.jsxs("button",{className:"btn-tertiary",children:[g.jsx(im,{size:18}),"View Analytics"]})]})})]})})}),g.jsx("section",{className:"profile-tabs",children:g.jsx("div",{className:"container",children:g.jsxs("nav",{className:"tabs-navigation",children:[g.jsx("button",{className:`tab-button ${p==="profile"?"active":""}`,onClick:()=>_("profile"),children:"Profile Settings"}),g.jsx("button",{className:`tab-button ${p==="preferences"?"active":""}`,onClick:()=>_("preferences"),children:"Preferences"}),g.jsx("button",{className:`tab-button ${p==="history"?"active":""}`,onClick:()=>_("history"),children:"Watch History"}),g.jsx("button",{className:`tab-button ${p==="analytics"?"active":""}`,onClick:()=>_("analytics"),children:"Viewing Analytics"})]})})}),g.jsx("section",{className:"tab-content",children:g.jsx("div",{className:"container",children:g.jsxs(Sn,{mode:"wait",children:[p==="profile"&&g.jsx(Xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"tab-panel",children:g.jsxs("div",{className:"settings-grid",children:[g.jsxs("div",{className:"setting-card",children:[g.jsx("h3",{children:"Profile Information"}),g.jsxs("div",{className:"setting-fields",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Display Name"}),g.jsx("input",{type:"text",value:S?.name||"",onChange:q=>N({...S,name:q.target.value}),disabled:!w,maxLength:20}),g.jsxs("span",{className:"char-count",children:[S?.name?.length||0,"/20"]})]}),g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:S?.isChild||!1,onChange:q=>N({...S,isChild:q.target.checked}),disabled:!w}),g.jsx("span",{children:"Kids Profile"})]}),g.jsx("p",{className:"setting-description",children:"Kids profiles only show content rated for children."})]})]})]}),g.jsxs("div",{className:"setting-card",children:[g.jsx("h3",{children:"Security"}),g.jsxs("div",{className:"setting-fields",children:[g.jsxs("div",{className:"form-group",children:[g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:S?.pinProtected||!1,onChange:q=>N({...S,pinProtected:q.target.checked}),disabled:!w}),g.jsx("span",{children:"PIN Protection"})]}),g.jsx("p",{className:"setting-description",children:"Require a PIN to access this profile."})]}),S?.pinProtected&&w&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"PIN Code"}),g.jsx("input",{type:"password",placeholder:"Enter 4-digit PIN",maxLength:4,pattern:"[0-9]*",inputMode:"numeric"})]})]})]}),g.jsxs("div",{className:"setting-card danger-zone",children:[g.jsx("h3",{children:"Danger Zone"}),g.jsxs("div",{className:"danger-actions",children:[g.jsx("p",{children:"Permanently delete this profile and all its data."}),g.jsxs("button",{className:"btn-danger",onClick:()=>C(!0),children:[g.jsx(t1,{size:18}),"Delete Profile"]})]})]})]})},"profile"),p==="preferences"&&g.jsx(Xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"tab-panel",children:g.jsxs("div",{className:"preferences-grid",children:[g.jsxs("div",{className:"preference-card",children:[g.jsxs("div",{className:"preference-header",children:[g.jsx(VL,{size:24}),g.jsx("h3",{children:"Language & Region"})]}),g.jsx("div",{className:"preference-options",children:g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Language"}),g.jsxs("select",{value:t.language||"en",onChange:q=>be("language",q.target.value),children:[g.jsx("option",{value:"en",children:"English"}),g.jsx("option",{value:"es",children:"Spanish"}),g.jsx("option",{value:"fr",children:"French"}),g.jsx("option",{value:"de",children:"German"})]})]})})]}),g.jsxs("div",{className:"preference-card",children:[g.jsxs("div",{className:"preference-header",children:[g.jsx(bL,{size:24}),g.jsx("h3",{children:"Playback Settings"})]}),g.jsxs("div",{className:"preference-options",children:[g.jsx("div",{className:"form-group",children:g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:t.autoplay||!0,onChange:q=>be("autoplay",q.target.checked)}),g.jsx("span",{children:"Autoplay next episode"})]})}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Default Video Quality"}),g.jsxs("select",{value:t.quality||"hd",onChange:q=>be("quality",q.target.value),children:[g.jsx("option",{value:"auto",children:"Auto"}),g.jsx("option",{value:"low",children:"Low"}),g.jsx("option",{value:"medium",children:"Medium"}),g.jsx("option",{value:"hd",children:"HD"}),g.jsx("option",{value:"uhd",children:"Ultra HD"})]})]})]})]}),g.jsxs("div",{className:"preference-card",children:[g.jsxs("div",{className:"preference-header",children:[g.jsx(YS,{size:24}),g.jsx("h3",{children:"Notifications"})]}),g.jsxs("div",{className:"preference-options",children:[g.jsx("div",{className:"form-group",children:g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:t.notifications||!0,onChange:q=>be("notifications",q.target.checked)}),g.jsx("span",{children:"Email notifications"})]})}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Maturity Rating"}),g.jsxs("select",{value:t.maturityRating||"PG-13",onChange:q=>be("maturityRating",q.target.value),children:[g.jsx("option",{value:"G",children:"G - General Audience"}),g.jsx("option",{value:"PG",children:"PG - Parental Guidance"}),g.jsx("option",{value:"PG-13",children:"PG-13 - Teens"}),g.jsx("option",{value:"R",children:"R - Restricted"}),g.jsx("option",{value:"NC-17",children:"NC-17 - Adults Only"})]})]})]})]})]})},"preferences"),p==="history"&&g.jsxs(Xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"tab-panel",children:[g.jsxs("div",{className:"history-header",children:[g.jsx("h2",{children:"Watch History"}),g.jsx("button",{className:"btn-secondary",children:"Clear All History"})]}),g.jsx("div",{className:"history-list",children:ce.map(q=>g.jsxs("div",{className:"history-item",children:[g.jsx("img",{src:`https://image.tmdb.org/t/p/w92${q.poster}`,alt:q.title,className:"history-poster"}),g.jsxs("div",{className:"history-info",children:[g.jsxs("div",{className:"history-main",children:[g.jsx("h4",{children:q.title}),g.jsx("span",{className:"history-type",children:q.type}),q.season&&g.jsxs("span",{className:"history-episode",children:["S",q.season," E",q.episode]})]}),g.jsxs("div",{className:"history-meta",children:[g.jsx("span",{className:"history-time",children:Ae(q.watchedAt)}),q.rating&&g.jsx("div",{className:"history-rating",children:Array.from({length:5}).map((de,le)=>g.jsx("span",{className:`star ${le<q.rating?"filled":""}`,children:"★"},le))})]}),q.progress<100&&g.jsxs("div",{className:"progress-bar",children:[g.jsx("div",{className:"progress-fill",style:{width:`${q.progress}%`}}),g.jsxs("span",{children:["Continue from ",Math.floor(q.continueTime/60),"m"]})]})]}),g.jsxs("div",{className:"history-actions",children:[g.jsx("button",{className:"action-btn",children:g.jsx(Pw,{size:16})}),g.jsx("button",{className:"action-btn",children:g.jsx(e1,{size:16})})]})]},q.id))})]},"history"),p==="analytics"&&g.jsx(Xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"tab-panel",children:b?g.jsxs("div",{className:"analytics-grid",children:[g.jsxs("div",{className:"stat-card primary",children:[g.jsx("div",{className:"stat-icon",children:g.jsx(Pw,{size:24})}),g.jsxs("div",{className:"stat-content",children:[g.jsx("h3",{children:xe(b.totalWatchTime)}),g.jsx("p",{children:"Total Watch Time"})]})]}),g.jsxs("div",{className:"stat-card secondary",children:[g.jsx("div",{className:"stat-icon",children:g.jsx(ML,{size:24})}),g.jsxs("div",{className:"stat-content",children:[g.jsx("h3",{children:b.moviesWatched+b.seriesWatched}),g.jsx("p",{children:"Titles Watched"})]})]}),g.jsxs("div",{className:"stat-card tertiary",children:[g.jsx("div",{className:"stat-icon",children:g.jsx(im,{size:24})}),g.jsxs("div",{className:"stat-content",children:[g.jsxs("h3",{children:[b.averageRating,"/5"]}),g.jsx("p",{children:"Average Rating"})]})]}),g.jsxs("div",{className:"analytics-card",children:[g.jsx("h3",{children:"Favorite Genres"}),g.jsx("div",{className:"genres-list",children:b.favoriteGenres.map((q,de)=>g.jsx("span",{className:"genre-tag",children:q},q))})]}),g.jsxs("div",{className:"analytics-card",children:[g.jsx("h3",{children:"Top Content"}),g.jsx("div",{className:"top-content-list",children:b.topContent.map((q,de)=>g.jsxs("div",{className:"top-content-item",children:[g.jsxs("span",{className:"rank",children:["#",de+1]}),g.jsx("span",{className:"title",children:q.title}),g.jsxs("span",{className:"hours",children:[q.hours,"h"]}),g.jsx("span",{className:"type",children:q.type})]},q.title))})]})]}):g.jsxs("div",{className:"loading-analytics",children:[g.jsx("div",{className:"loading-spinner"}),g.jsx("p",{children:"Loading analytics..."})]})},"analytics")]})})})]}),g.jsx(Sn,{children:G&&g.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"modal-overlay",children:g.jsxs(Xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"modal-content",children:[g.jsx("h2",{children:"Create New Profile"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Profile Name"}),g.jsx("input",{type:"text",value:z.name,onChange:q=>J({...z,name:q.target.value}),placeholder:"Enter profile name",maxLength:20})]}),g.jsx("div",{className:"form-group",children:g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:z.isChild,onChange:q=>J({...z,isChild:q.target.checked})}),g.jsx("span",{children:"Kids Profile"})]})}),g.jsx("div",{className:"form-group",children:g.jsxs("label",{className:"checkbox-label",children:[g.jsx("input",{type:"checkbox",checked:z.pinProtected,onChange:q=>J({...z,pinProtected:q.target.checked})}),g.jsx("span",{children:"PIN Protection"})]})}),g.jsxs("div",{className:"modal-actions",children:[g.jsx("button",{className:"btn-secondary",onClick:()=>Q(!1),children:"Cancel"}),g.jsx("button",{className:"btn-primary",onClick:R,disabled:!z.name.trim(),children:"Create Profile"})]})]})})}),g.jsx(Sn,{children:D&&g.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"modal-overlay",children:g.jsxs(Xe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"modal-content danger",children:[g.jsx("h2",{children:"Delete Profile"}),g.jsxs("p",{children:['Are you sure you want to delete the profile "',e.name,'"? This action cannot be undone.']}),g.jsxs("div",{className:"modal-actions",children:[g.jsx("button",{className:"btn-secondary",onClick:()=>C(!1),children:"Cancel"}),g.jsx("button",{className:"btn-danger",onClick:se,children:"Delete Profile"})]})]})})})]}):g.jsxs("div",{className:"profile-container",children:[g.jsx(_a,{}),g.jsxs("div",{className:"profile-loading",children:[g.jsx("div",{className:"loading-spinner"}),g.jsx("p",{children:"Loading profile..."})]})]})};var r1="https://js.stripe.com/v3",eF=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var tF=function(){for(var e=document.querySelectorAll('script[src^="'.concat(r1,'"]')),t=0;t<e.length;t++){var r=e[t];if(eF.test(r.src))return r}return null},kw=function(e){var t="",r=document.createElement("script");r.src="".concat(r1).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(r),r},nF=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:t})},Sl=null,Uc=null,Bc=null,rF=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},iF=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},sF=function(e){return Sl!==null?Sl:(Sl=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=tF();if(!(o&&e)){if(!o)o=kw(e);else if(o&&Bc!==null&&Uc!==null){var a;o.removeEventListener("load",Bc),o.removeEventListener("error",Uc),(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=kw(e)}}Bc=iF(t,r),Uc=rF(r),o.addEventListener("load",Bc),o.addEventListener("error",Uc)}catch(u){r(u);return}}),Sl.catch(function(t){return Sl=null,Promise.reject(t)}))},oF=function(e,t,r){if(e===null)return null;var o=e.apply(void 0,t);return nF(o,r),o},Pl,i1=!1,s1=function(){return Pl||(Pl=sF(null).catch(function(e){return Pl=null,Promise.reject(e)}),Pl)};Promise.resolve().then(function(){return s1()}).catch(function(n){i1||console.warn(n)});var aF=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i1=!0;var o=Date.now();return s1().then(function(a){return oF(a,t,o)})};const lF=async({priceId:n,userId:e,userEmail:t,successUrl:r,cancelUrl:o})=>(console.log("Creating checkout session for:",{priceId:n,userId:e,userEmail:t}),await new Promise(a=>setTimeout(a,1e3)),{id:`cs_test_${Math.random().toString(36).substr(2,9)}`,url:`https://checkout.stripe.com/pay/${Math.random().toString(36).substr(2)}`}),uF=()=>{const{currentUser:n,userSubscription:e,hasActiveSubscription:t,setSuccess:r,setError:o}=Zs(),[a,u]=B.useState(null),[h,f]=B.useState("monthly"),[p,_]=B.useState({}),[w,E]=B.useState(!1),[S,N]=B.useState(""),[D,C]=B.useState(!1),[G,Q]=B.useState([]),z=aF(void 0),J={monthly:[{id:"basic_monthly",name:"Basic",price:9.99,originalPrice:12.99,description:"720p resolution",features:["Watch on 1 screen at a time","720p (HD) quality","Watch on your laptop, TV, phone, or tablet","Download on 1 device at a time"],icon:kh,popular:!1,savings:23},{id:"standard_monthly",name:"Standard",price:15.99,originalPrice:17.99,description:"1080p resolution",features:["Watch on 2 screens at a time","1080p (Full HD) quality","Watch on your laptop, TV, phone, or tablet","Download on 2 devices at a time","HD available"],icon:Cw,popular:!0,savings:11},{id:"premium_monthly",name:"Premium",price:19.99,originalPrice:22.99,description:"4K + HDR resolution",features:["Watch on 4 screens at a time","4K (Ultra HD) + HDR quality","Watch on your laptop, TV, phone, or tablet","Download on 4 devices at a time","HD and Ultra HD available","Spatial audio"],icon:xw,popular:!1,savings:13}],yearly:[{id:"basic_yearly",name:"Basic",price:99.99,originalPrice:155.88,description:"720p resolution",features:["Watch on 1 screen at a time","720p (HD) quality","Watch on your laptop, TV, phone, or tablet","Download on 1 device at a time","2 months free"],icon:kh,popular:!1,savings:36},{id:"standard_yearly",name:"Standard",price:159.99,originalPrice:215.88,description:"1080p resolution",features:["Watch on 2 screens at a time","1080p (Full HD) quality","Watch on your laptop, TV, phone, or tablet","Download on 2 devices at a time","HD available","2 months free"],icon:Cw,popular:!0,savings:26},{id:"premium_yearly",name:"Premium",price:199.99,originalPrice:275.88,description:"4K + HDR resolution",features:["Watch on 4 screens at a time","4K (Ultra HD) + HDR quality","Watch on your laptop, TV, phone, or tablet","Download on 4 devices at a time","HD and Ultra HD available","Spatial audio","2 months free"],icon:xw,popular:!1,savings:27}]};B.useEffect(()=>{Q([{id:1,date:new Date("2024-01-15"),amount:15.99,plan:"Standard Monthly",status:"completed",invoiceId:"INV-001"},{id:2,date:new Date("2023-12-15"),amount:15.99,plan:"Standard Monthly",status:"completed",invoiceId:"INV-002"},{id:3,date:new Date("2023-11-15"),amount:9.99,plan:"Basic Monthly",status:"completed",invoiceId:"INV-003"}])},[]);const ce=async se=>{if(!n){o("Please sign in to subscribe");return}E(!0),u(se);try{const be=await z,xe=await lF({priceId:se.id,userId:n.uid,userEmail:n.email,successUrl:`${window.location.origin}/subscription/success`,cancelUrl:`${window.location.origin}/subscription`}),Ae=await be.redirectToCheckout({sessionId:xe.id});Ae.error&&o(Ae.error.message)}catch(be){console.error("Subscription error:",be),o("Failed to process subscription. Please try again.")}finally{E(!1)}},Z=async()=>{if(window.confirm("Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period."))try{await new Promise(se=>setTimeout(se,2e3)),r("Your subscription has been cancelled. You will retain access until the end of your billing period.")}catch{o("Failed to cancel subscription. Please try again.")}},b=se=>{_(be=>({...be,[se]:!be[se]}))},x=()=>{if(!S.trim()){o("Please enter a promo code");return}["WELCOME10","STUDENT15","FAMILY20"].includes(S.toUpperCase())?(r(`Promo code ${S} applied successfully!`),N(""),C(!1)):o("Invalid promo code. Please try again.")},A=se=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(se),V=se=>new Date(se).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),O=()=>{if(!e?.endDate)return 0;const xe=new Date(e.endDate)-new Date;return Math.ceil(xe/(1e3*60*60*24))},F=e?.plan||"None",R=t();return g.jsxs("div",{className:"subscription-container",children:[g.jsx(_a,{}),g.jsxs("div",{className:"subscription-content",children:[g.jsx("section",{className:"subscription-header",children:g.jsx("div",{className:"container",children:g.jsxs("div",{className:"header-content",children:[g.jsx("h1",{children:"Choose the plan that's right for you"}),g.jsx("p",{children:"Watch all you want. Ad-free. Cancel anytime."}),g.jsx("div",{className:"billing-toggle",children:g.jsxs("div",{className:"toggle-container",children:[g.jsx("span",{className:h==="monthly"?"active":"",children:"Monthly"}),g.jsx("button",{className:`toggle-switch ${h==="yearly"?"yearly":""}`,onClick:()=>f(h==="monthly"?"yearly":"monthly"),children:g.jsx("div",{className:"toggle-slider"})}),g.jsxs("span",{className:h==="yearly"?"active":"",children:["Yearly ",g.jsx("span",{className:"savings-badge",children:"Save up to 27%"})]})]})})]})})}),R&&g.jsx("section",{className:"current-subscription",children:g.jsx("div",{className:"container",children:g.jsx("div",{className:"subscription-status",children:g.jsxs("div",{className:"status-header",children:[g.jsxs("div",{className:"status-info",children:[g.jsx("h2",{children:"Your Current Plan"}),g.jsx("div",{className:"plan-badge",children:F}),g.jsx("p",{className:"renewal-date",children:e.endDate&&g.jsxs(g.Fragment,{children:["Renews on ",V(e.endDate),g.jsxs("span",{className:"days-remaining",children:[" (",O()," days remaining)"]})]})})]}),g.jsxs("div",{className:"status-actions",children:[g.jsx("button",{className:"btn-secondary",onClick:Z,children:"Cancel Subscription"}),g.jsx("button",{className:"btn-tertiary",children:"Update Payment Method"})]})]})})})}),g.jsx("section",{className:"plans-section",children:g.jsx("div",{className:"container",children:g.jsx("div",{className:"plans-grid",children:J[h].map(se=>{const be=se.icon,xe=R&&se.name===F,Ae=p[se.id];return g.jsxs(Xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`plan-card ${se.popular?"popular":""} ${xe?"current":""}`,children:[se.popular&&g.jsxs("div",{className:"popular-badge",children:[g.jsx(zL,{size:16,fill:"currentColor"}),"Most Popular"]}),xe&&g.jsxs("div",{className:"current-badge",children:[g.jsx(vp,{size:16}),"Current Plan"]}),g.jsxs("div",{className:"plan-header",children:[g.jsx("div",{className:"plan-icon",children:g.jsx(be,{size:32})}),g.jsx("h3",{children:se.name}),g.jsx("p",{className:"plan-description",children:se.description})]}),g.jsxs("div",{className:"plan-pricing",children:[g.jsxs("div",{className:"price",children:[A(se.price),g.jsxs("span",{className:"billing-period",children:["/",h==="monthly"?"month":"year"]})]}),se.originalPrice&&g.jsx("div",{className:"original-price",children:A(se.originalPrice)}),se.savings&&g.jsxs("div",{className:"savings",children:["Save ",se.savings,"%"]})]}),g.jsxs("div",{className:"plan-features",children:[se.features.slice(0,3).map((q,de)=>g.jsxs("div",{className:"feature",children:[g.jsx(vp,{size:18}),g.jsx("span",{children:q})]},de)),g.jsx(Sn,{children:Ae&&g.jsx(Xe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"additional-features",children:se.features.slice(3).map((q,de)=>g.jsxs("div",{className:"feature",children:[g.jsx(vp,{size:18}),g.jsx("span",{children:q})]},de))})}),se.features.length>3&&g.jsx("button",{className:"toggle-features-btn",onClick:()=>b(se.id),children:Ae?g.jsxs(g.Fragment,{children:["Show less ",g.jsx(NL,{size:16})]}):g.jsxs(g.Fragment,{children:["Show all features ",g.jsx(XS,{size:16})]})})]}),g.jsx("div",{className:"plan-actions",children:xe?g.jsx("button",{className:"btn-current",disabled:!0,children:"Current Plan"}):g.jsx("button",{className:`btn-primary ${se.popular?"popular":""}`,onClick:()=>ce(se),disabled:w&&a?.id===se.id,children:w&&a?.id===se.id?"Processing...":`Subscribe to ${se.name}`})})]},se.id)})})})}),g.jsx("section",{className:"features-comparison",children:g.jsxs("div",{className:"container",children:[g.jsx("h2",{children:"Compare Plans"}),g.jsxs("div",{className:"comparison-table",children:[g.jsxs("div",{className:"table-header",children:[g.jsx("div",{className:"feature-column",children:"Features"}),g.jsx("div",{className:"plan-column",children:"Basic"}),g.jsx("div",{className:"plan-column",children:"Standard"}),g.jsx("div",{className:"plan-column",children:"Premium"})]}),g.jsxs("div",{className:"table-row",children:[g.jsx("div",{className:"feature-column",children:"Monthly price"}),g.jsx("div",{className:"plan-column",children:"$9.99"}),g.jsx("div",{className:"plan-column",children:"$15.99"}),g.jsx("div",{className:"plan-column",children:"$19.99"})]}),g.jsxs("div",{className:"table-row",children:[g.jsx("div",{className:"feature-column",children:"Video quality"}),g.jsx("div",{className:"plan-column",children:"720p (HD)"}),g.jsx("div",{className:"plan-column",children:"1080p (Full HD)"}),g.jsx("div",{className:"plan-column",children:"4K (Ultra HD)"})]}),g.jsxs("div",{className:"table-row",children:[g.jsx("div",{className:"feature-column",children:"Screens you can watch on at the same time"}),g.jsx("div",{className:"plan-column",children:"1"}),g.jsx("div",{className:"plan-column",children:"2"}),g.jsx("div",{className:"plan-column",children:"4"})]}),g.jsxs("div",{className:"table-row",children:[g.jsx("div",{className:"feature-column",children:"Devices you can download on"}),g.jsx("div",{className:"plan-column",children:"1"}),g.jsx("div",{className:"plan-column",children:"2"}),g.jsx("div",{className:"plan-column",children:"4"})]})]})]})}),R&&G.length>0&&g.jsx("section",{className:"payment-history",children:g.jsxs("div",{className:"container",children:[g.jsx("h2",{children:"Payment History"}),g.jsxs("div",{className:"history-table",children:[g.jsxs("div",{className:"table-header",children:[g.jsx("div",{children:"Date"}),g.jsx("div",{children:"Description"}),g.jsx("div",{children:"Amount"}),g.jsx("div",{children:"Status"}),g.jsx("div",{children:"Invoice"})]}),G.map(se=>g.jsxs("div",{className:"table-row",children:[g.jsx("div",{children:V(se.date)}),g.jsx("div",{children:se.plan}),g.jsx("div",{children:A(se.amount)}),g.jsx("div",{children:g.jsx("span",{className:`status-badge ${se.status}`,children:se.status})}),g.jsx("div",{children:g.jsx("button",{className:"invoice-link",children:"Download"})})]},se.id))]})]})}),g.jsx("section",{className:"faq-section",children:g.jsxs("div",{className:"container",children:[g.jsx("h2",{children:"Frequently Asked Questions"}),g.jsxs("div",{className:"faq-grid",children:[g.jsxs("div",{className:"faq-item",children:[g.jsx("h3",{children:"Can I change plans anytime?"}),g.jsx("p",{children:"Yes, you can upgrade or downgrade your plan at any time. Changes will be reflected in your next billing cycle."})]}),g.jsxs("div",{className:"faq-item",children:[g.jsx("h3",{children:"How does the free trial work?"}),g.jsx("p",{children:"New members get a 30-day free trial. You won't be charged until the trial ends, and you can cancel anytime during the trial."})]}),g.jsxs("div",{className:"faq-item",children:[g.jsx("h3",{children:"Can I cancel my subscription?"}),g.jsx("p",{children:"Yes, you can cancel your subscription anytime. You'll continue to have access until the end of your billing period."})]}),g.jsxs("div",{className:"faq-item",children:[g.jsx("h3",{children:"What payment methods do you accept?"}),g.jsx("p",{children:"We accept all major credit cards, debit cards, and PayPal for subscription payments."})]})]})]})}),g.jsx("section",{className:"promo-section",children:g.jsx("div",{className:"container",children:g.jsxs("div",{className:"promo-content",children:[g.jsx(DL,{size:32}),g.jsxs("div",{className:"promo-info",children:[g.jsx("h3",{children:"Have a promo code?"}),g.jsx("p",{children:"Enter your code to get a discount on your subscription"})]}),D?g.jsxs("div",{className:"promo-input-group",children:[g.jsx("input",{type:"text",value:S,onChange:se=>N(se.target.value),placeholder:"Enter promo code",className:"promo-input"}),g.jsx("button",{className:"btn-primary",onClick:x,children:"Apply"}),g.jsx("button",{className:"btn-tertiary",onClick:()=>C(!1),children:"Cancel"})]}):g.jsx("button",{className:"btn-secondary",onClick:()=>C(!0),children:"Add Promo Code"})]})})}),g.jsx("section",{className:"security-section",children:g.jsx("div",{className:"container",children:g.jsxs("div",{className:"security-badge",children:[g.jsx(UL,{size:24}),g.jsx("span",{children:"Secure payment processed by Stripe. Your financial information is encrypted and secure."})]})})})]})]})};function cF(){return g.jsx(ax,{children:g.jsx(uV,{children:g.jsxs("div",{className:"app",children:[g.jsx(_a,{}),g.jsx("main",{children:g.jsxs(ix,{children:[g.jsx(zc,{path:"/",element:g.jsx(JL,{})}),g.jsx(zc,{path:"/profile",element:g.jsx(ZL,{})}),g.jsx(zc,{path:"/subscription",element:g.jsx(uF,{})})]})})]})})})}_P.createRoot(document.getElementById("root")).render(g.jsx(B.StrictMode,{children:g.jsx(cF,{})}));
